<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BlockIQ JC ‚Äî Jersey City Neighborhood Intelligence</title>
<link href="https://api.mapbox.com/mapbox-gl-js/v3.1.2/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v3.1.2/mapbox-gl.js"></script>
<link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.css">
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v5.0.0/mapbox-gl-geocoder.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600&family=DM+Mono:wght@400;500&family=Space+Mono&display=swap" rel="stylesheet">
<style>
  * { margin:0; padding:0; box-sizing:border-box; }
  :root {
    --bg: #06060e;
    --panel: #0c0c1a;
    --border: rgba(0,194,255,0.12);
    --border-dim: #1e2235;
    --accent: #00c2ff;
    --accent-hover: #00ffe0;
    --blue: #00c2ff;
    --cyan: #00ffe0;
    --text: #f0f4ff;
    --muted: #8892a4;
    --trend-up: #e63946;
    --trend-down: #52b788;
    --trend-neutral: #e9c46a;
    --card-bg: rgba(255,255,255,0.03);
    --glow: 0 0 30px rgba(0,194,255,0.15);
  }
  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--bg);
    color: var(--text);
    display: flex;
    height: 100vh;
    overflow: hidden;
  }
  #sidebar {
    width: 360px;
    min-width: 360px;
    background: var(--panel);
    border-right: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    z-index: 10;
  }
  #sidebar::-webkit-scrollbar { width: 4px; }
  #sidebar::-webkit-scrollbar-track { background: var(--bg); }
  #sidebar::-webkit-scrollbar-thumb { background: rgba(0,194,255,0.3); border-radius: 2px; }
  #header {
    padding: 20px 20px 18px;
    border-bottom: 1px solid var(--border);
    background: linear-gradient(180deg, rgba(0,194,255,0.04) 0%, transparent 100%);
  }
  .biq-nav-logo {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.7rem;
    letter-spacing: 3px;
    color: var(--text);
    line-height: 1;
    margin-bottom: 10px;
  }
  .biq-nav-logo span {
    color: var(--accent);
  }
  .biq-eyebrow {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: rgba(0,194,255,0.08);
    border: 1px solid rgba(0,194,255,0.18);
    border-radius: 100px;
    padding: 4px 12px;
    font-family: 'DM Mono', monospace;
    font-size: 0.62rem;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--accent);
    margin-bottom: 10px;
  }
  .biq-dot {
    width: 5px;
    height: 5px;
    background: var(--cyan);
    border-radius: 50%;
    animation: biqBlink 2s ease-in-out infinite;
  }
  @keyframes biqBlink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.2; }
  }
  .biq-back-link {
    font-size: 0.75rem;
    color: var(--muted);
    text-decoration: none;
    font-family: 'DM Mono', monospace;
    letter-spacing: 0.5px;
    transition: color 0.2s;
  }
  .biq-back-link:hover {
    color: var(--accent);
  }
  .eyebrow { font-family:'Space Mono',monospace; font-size:9px; letter-spacing:.15em; color:var(--accent); text-transform:uppercase; margin-bottom:6px; }
  h1 { font-size:18px; font-weight:600; line-height:1.2; }
  .subtitle { font-size:11px; color:var(--muted); margin-top:4px; font-family:'Space Mono',monospace; }
  .section { padding:16px 20px; border-bottom:1px solid var(--border); }
  .section-collapsible { padding:0; }
  .panel-content { padding: 0 16px 14px; }
  .section-label {
    font-family: 'DM Mono', monospace;
    font-size: 0.76rem;
    letter-spacing: 2.5px;
    text-transform: uppercase;
    color: var(--accent);
    padding: 14px 16px 6px;
  }
  .section-subtitle {
    font-size: 0.85rem;
    color: var(--muted);
    line-height: 1.5;
    margin-bottom: 10px;
  }
  .consumer-guide {
    padding: 14px 16px;
    background: rgba(0,194,255,0.04);
    border-bottom: 1px solid var(--border);
  }
  .guide-step {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    margin-bottom: 10px;
    font-size: 0.78rem;
    color: var(--muted);
    line-height: 1.5;
  }
  .guide-step:last-child { margin-bottom: 0; }
  .guide-num {
    width: 20px;
    height: 20px;
    background: var(--accent);
    color: #000;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.65rem;
    font-weight: 700;
    flex-shrink: 0;
    margin-top: 1px;
  }
  .guide-text strong {
    color: var(--text);
    font-weight: 600;
  }
  .score-explainer {
    font-size: 0.85rem;
    color: var(--muted);
    padding: 0 16px 10px;
    line-height: 1.5;
    font-style: italic;
  }
  .stats-grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
  .stat-card {
    background: var(--card-bg);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 14px;
    position: relative;
    overflow: hidden;
    transition: border-color 0.3s, box-shadow 0.3s;
  }
  .stat-card:hover {
    border-color: rgba(0,194,255,0.25);
    box-shadow: var(--glow);
  }
  .stat-card::before { content:''; position:absolute; top:0; left:0; right:0; height:2px; }
  .stat-card.red::before { background:#e63946; }
  .stat-card.yellow::before { background:#e9c46a; }
  .stat-card.blue::before { background:#457b9d; }
  .stat-label {
    font-family: 'DM Mono', monospace;
    font-size: 0.78rem;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 6px;
  }
  .stat-value {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 2.2rem;
    letter-spacing: 1px;
    line-height: 1;
    color: var(--text);
  }
  .stat-sub { font-size:10px; color:#6b7280; margin-top:3px; font-family:'Space Mono',monospace; }
  .stat-change { font-size:10px; margin-top:4px; font-family:'Space Mono',monospace; }
  .sparkline{position:absolute;right:8px;bottom:8px;opacity:.9;pointer-events:none;}
  .sparkline svg{width:60px;height:30px;display:block;}
  .sparkline path{fill:none;stroke-width:2;}
  .up{color:var(--trend-up);} .down{color:var(--trend-down);} .neutral{color:var(--trend-neutral);}
  .with-tooltip{cursor:help;}
  .with-tooltip:hover::after{
    content:attr(data-tooltip); position:absolute; left:10px; right:10px; bottom:10px; z-index:3;
    background:#0b1016; border:1px solid #1e2229; border-radius:6px; padding:8px 9px;
    color:#e8eaed; font-size:10px; line-height:1.4; font-family:'DM Sans',sans-serif;
    box-shadow:0 8px 18px rgba(0,0,0,.45);
  }
  .with-tooltip:hover::before{height:2px;}
  .nibrs-note{
    border:1px solid #e9c46a; background:rgba(233,196,106,.08); border-radius:6px;
    padding:10px; font-size:11px; line-height:1.45; color:#d6d9df; margin-bottom:12px;
  }
  .crime-table-wrap{background:var(--bg); border:1px solid var(--border); border-radius:6px; overflow:hidden;}
  .crime-table{width:100%; border-collapse:collapse; font-size:11px;}
  .crime-table th{padding:8px 10px; text-align:left; color:#6b7280; font-family:'Space Mono',monospace; font-size:9px; letter-spacing:.06em; text-transform:uppercase; border-bottom:1px solid var(--border);}
  .crime-table td{padding:8px 10px; border-bottom:1px solid var(--border); vertical-align:middle;}
  .crime-table tr:last-child td{border-bottom:none;}
  .crime-type-note{color:#f4a261; font-size:10px;}
  .crime-metric{text-align:right; font-family:'Space Mono',monospace; white-space:nowrap;}
  .crime-note{font-size:11px; color:#aeb4bf; margin-top:10px; line-height:1.45; font-style:italic;}
  .crime-source{font-size:10px; color:#6b7280; margin-top:8px; font-family:'Space Mono',monospace;}
  .freshness-badge{
    display:flex;
    align-items:center;
    gap:7px;
    margin-top:10px;
    padding:7px 9px;
    border:1px solid var(--border);
    border-radius:6px;
    background:var(--bg);
    color:#6b7280;
    font-family:'Space Mono',monospace;
    font-size:9px;
    letter-spacing:.06em;
  }
  .freshness-dot{
    width:8px;
    height:8px;
    border-radius:50%;
    background:#4ade80;
    box-shadow:0 0 0 2px rgba(74,222,128,.2);
    flex-shrink:0;
  }
  .chart-header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:8px;
    margin-bottom:10px;
  }
  .chart-select{
    background:#0a0c10;
    border:1px solid #1e2229;
    color:#e8eaed;
    border-radius:6px;
    font-size:11px;
    font-family:'DM Sans',sans-serif;
    padding:6px 8px;
    min-width:148px;
  }
  .chart-wrap{
    background:#111318;
    border:1px solid #1e2229;
    border-radius:6px;
    padding:10px;
    height:190px;
  }
  .summary-table-wrap{
    background:#111318;
    border:1px solid #1e2229;
    border-radius:6px;
    overflow:hidden;
  }
  .summary-table{
    width:100%;
    border-collapse:collapse;
  }
  .summary-table th{
    padding:8px 10px;
    text-align:left;
    color:#6b7280;
    border-bottom:1px solid #1e2229;
    font-size:9px;
    font-family:'Space Mono',monospace;
    letter-spacing:.08em;
    text-transform:uppercase;
  }
  .summary-table td{
    padding:8px 10px;
    border-bottom:1px solid #1e2229;
    font-size:11px;
    color:#e8eaed;
  }
  .summary-table tr:last-child td{ border-bottom:none; }
  .summary-table .offense-critical{ color:#e63946; }
  .summary-table .ytd-val{
    font-family:'Space Mono',monospace;
    font-weight:700;
    color:#e8eaed;
  }
  .summary-table .proj-val{
    font-family:'Space Mono',monospace;
    color:#6b7280;
  }
  .summary-foot{
    margin-top:8px;
    font-size:9px;
    color:#6b7280;
    font-family:'Space Mono',monospace;
    line-height:1.5;
  }
  details.collapse-panel{border:1px solid var(--border); border-radius:6px; background:var(--bg);}
  details > summary {
    font-family: 'DM Mono', monospace;
    font-size: 0.65rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--muted);
    cursor: pointer;
    padding: 12px 16px;
    list-style: none;
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: color 0.2s;
    user-select: none;
    border-top: 1px solid var(--border-dim);
  }
  details > summary::after {
    content: '+';
    font-size: 0.9rem;
    color: var(--accent);
    transition: transform 0.2s;
  }
  details[open] > summary::after {
    content: '-';
  }
  details[open] > summary { color: var(--accent); }
  details.collapse-panel summary::-webkit-details-marker{display:none;}
  .sources-list{padding:0 10px 10px; display:flex; flex-direction:column; gap:8px;}
  .source-card{border:1px solid var(--border); border-radius:6px; padding:9px; background:#0d1015;}
  .source-name{font-size:12px; font-weight:600; margin-bottom:3px;}
  .source-url{font-family:'Space Mono',monospace; font-size:10px; color:#6b7280; text-decoration:none; word-break:break-all;}
  .source-url:hover{color:#8fb8d3; text-decoration:underline;}
  .source-desc{font-size:10px; color:#b6bcc7; line-height:1.4; margin-top:5px;}
  .ward-list,.precinct-list { display:flex; flex-direction:column; gap:8px; }
  .ward-item { display:flex; align-items:flex-start; gap:10px; padding:8px 10px; background:var(--bg); border:1px solid var(--border); border-radius:5px; cursor:pointer; transition:border-color .2s; }
  .ward-item:hover { border-color:var(--blue); }
  .ward-dot { width:10px; height:10px; border-radius:50%; flex-shrink:0; }
  .ward-content{flex:1;}
  .ward-name { font-size:12px; font-weight:500; }
  .ward-top-crime{font-size:10px;color:#f4a261;margin-top:3px;}
  .ward-score { font-family:'Space Mono',monospace; font-size:11px; color:var(--muted); }
  .precinct-item { display:flex; align-items:flex-start; gap:10px; padding:9px 10px; background:var(--bg); border:1px solid var(--border); border-radius:5px; cursor:pointer; transition:border-color .2s; }
  .precinct-item:hover { border-color:#f4a261; }
  .precinct-badge { width:30px; height:30px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-family:'Space Mono',monospace; font-size:8px; font-weight:700; flex-shrink:0; margin-top:1px; }
  .precinct-info { flex:1; }
  .precinct-name { font-size:12px; font-weight:600; }
  .precinct-addr { font-size:10px; color:var(--muted); margin-top:2px; font-family:'Space Mono',monospace; }
  .precinct-wards { font-size:10px; color:#f4a261; margin-top:3px; }
  .toggle-row { display:flex; align-items:center; justify-content:space-between; padding:8px 0; border-bottom:1px solid var(--border); }
  .toggle-row:last-child{border-bottom:none;}
  .section-category-label {
    font-family: 'DM Mono', monospace;
    font-size: 0.76rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--accent);
    padding: 14px 0 8px;
    border-top: 1px solid var(--border-dim);
    margin-top: 4px;
  }
  .section-category-label:first-of-type { border-top:none; padding-top:0; margin-top:0; }
  .category-default{color:var(--accent);}
  .category-crime{color:var(--accent);}
  .category-community{color:var(--accent);}
  .category-poi{color:var(--accent);}
  .category-muted{color:var(--accent);}
  .toggle-label { font-size:12px; display:flex; align-items:center; gap:8px; }
  .toggle-swatch { width:14px; height:14px; border-radius:3px; }
  .safety-label{color:#4ade80;}
  .safety-disclaimer{font-size:9px;color:#6b7280;line-height:1.5;font-family:'Space Mono',monospace;margin-top:8px;}
  .locked-toggle-row{opacity:.4;cursor:not-allowed;}
  .locked-badge{
    font-family:'Space Mono',monospace;
    font-size:9px;
    color:#6b7280;
    border:1px solid #2a2d35;
    border-radius:999px;
    padding:2px 7px;
    text-transform:uppercase;
    letter-spacing:.06em;
  }
  .ward-main-row{display:flex;align-items:center;justify-content:space-between;gap:8px;}
  .ward-score-pill{
    font-family:'Space Mono',monospace;
    font-size:9px;
    font-weight:700;
    padding:2px 7px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.2);
    color:#0a0c10;
    white-space:nowrap;
  }
  .ward-meta{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-top:3px;}
  .ward-incidents{font-size:10px;color:#6b7280;font-family:'Space Mono',monospace;}
  .score-card{
    margin:8px 0 10px;
    border:1px solid #1e2229;
    border-radius:6px;
    padding:8px 10px;
    background:#0a0c10;
    text-align:center;
  }
  .score-value{
    font-family:'Space Mono',monospace;
    font-size:32px;
    font-weight:700;
    line-height:1;
  }
  .score-label{
    margin-top:4px;
    font-family:'Space Mono',monospace;
    font-size:10px;
    letter-spacing:.12em;
    text-transform:uppercase;
  }
  .score-caption{
    margin-top:4px;
    font-size:10px;
    color:#6b7280;
    font-family:'Space Mono',monospace;
    text-transform:uppercase;
    letter-spacing:.08em;
  }
  .toggle { position:relative; width:36px; height:20px; }
  .toggle input{opacity:0;width:0;height:0;}
  .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#2a2d35;border-radius:20px;transition:.3s;}
  .slider:before{position:absolute;content:"";height:14px;width:14px;left:3px;bottom:3px;background:#fff;border-radius:50%;transition:.3s;}
  input:checked+.slider{background:var(--accent);}
  input:checked+.slider:before{transform:translateX(16px);}
  .data-note { padding:16px 20px; font-size:10px; color:var(--muted); line-height:1.6; font-family:'Space Mono',monospace; }
  #map { flex:1; position:relative; }
  #legend { position:absolute; bottom:30px; right:20px; background:#111318ee; border:1px solid #1e2229; border-radius:8px; padding:13px 15px; z-index:5; }
  .legend-section { margin-bottom:10px; }
  .legend-section:last-child{margin-bottom:0;}
  .legend-section-title { font-family:'Space Mono',monospace; font-size:8px; color:#6b7280; letter-spacing:.08em; text-transform:uppercase; margin-bottom:5px; padding-bottom:3px; border-bottom:1px solid #1e2229; }
  .legend-row { display:flex; align-items:center; gap:8px; margin-bottom:5px; font-size:11px; color:#e8eaed; }
  .legend-swatch { width:24px; height:8px; border-radius:2px; }
  .legend-dot { width:12px; height:12px; border-radius:50%; border:2px solid rgba(255,255,255,.4); flex-shrink:0; }
  .mapboxgl-popup-content{background:#111318!important;border:1px solid #1e2229!important;border-radius:8px!important;padding:14px 16px!important;color:#e8eaed!important;font-family:'DM Sans',sans-serif!important;box-shadow:0 8px 32px rgba(0,0,0,.5)!important;min-width:220px;}
  .mapboxgl-popup-tip{display:none!important;}
  .popup-title{font-family:'Space Mono',monospace;font-size:11px;margin-bottom:10px;text-transform:uppercase;}
  .popup-stat{display:flex;justify-content:space-between;font-size:12px;padding:4px 0;border-bottom:1px solid #1e2229;gap:16px;}
  .popup-stat:last-child{border-bottom:none;}
  .popup-stat-val{font-family:'Space Mono',monospace;color:#457b9d;text-align:right;font-size:11px;}
  .precinct-marker{width:34px;height:34px;border-radius:50%;border:3px solid #fff;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 2px 14px rgba(0,0,0,.7);transition:transform .15s;}
  .precinct-marker:hover{transform:scale(1.2);}
  .mapboxgl-ctrl-geocoder {
    background-color:#111318 !important;
    border:1px solid #1e2229 !important;
    border-radius:6px !important;
    box-shadow:none !important;
    min-width:280px !important;
  }
  .mapboxgl-ctrl-geocoder input {
    color:#e8eaed !important;
    background-color:#111318 !important;
    font-family:'DM Sans',sans-serif !important;
    font-size:13px !important;
  }
  .mapboxgl-ctrl-geocoder input::placeholder { color:#6b7280 !important; }
  .mapboxgl-ctrl-geocoder .mapboxgl-ctrl-geocoder--icon { fill:#6b7280 !important; }
  .mapboxgl-ctrl-geocoder .suggestions {
    background-color:#111318 !important;
    border:1px solid #1e2229 !important;
  }
  .mapboxgl-ctrl-geocoder .suggestions > li > a { color:#e8eaed !important; }
  .mapboxgl-ctrl-geocoder .suggestions > .active > a,
  .mapboxgl-ctrl-geocoder .suggestions > li > a:hover {
    background-color:#1e2229 !important;
    color:#e8eaed !important;
  }
  .biq-ad-slot {
    margin: 16px 12px;
    padding: 16px;
    background: rgba(0,194,255,0.04);
    border: 1px dashed rgba(0,194,255,0.2);
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    gap: 4px;
  }
  .biq-ad-label {
    font-family: 'DM Mono', monospace;
    font-size: 0.58rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--accent);
  }
  .biq-ad-name {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.1rem;
    letter-spacing: 1px;
    color: var(--text);
  }
  .biq-ad-sub {
    font-size: 0.72rem;
    color: var(--muted);
    font-weight: 300;
    line-height: 1.5;
  }
  .biq-ad-link {
    font-size: 0.75rem;
    color: var(--accent);
    text-decoration: none;
    font-weight: 600;
    margin-top: 4px;
    transition: color 0.2s;
  }
  .biq-ad-link:hover {
    color: var(--cyan);
  }
  .biq-disclaimer {
    font-size: 0.62rem;
    color: var(--muted);
    line-height: 1.6;
    padding: 8px 16px 4px;
    opacity: 0.6;
  }
</style>
</head>
<body>

<div id="sidebar">
  <div id="header">
    <div class="biq-nav-logo">BLOCK<span>IQ</span> JC</div>
    <div class="biq-eyebrow">
      <span class="biq-dot"></span>
      NIBRS ¬∑ Jan‚ÄìSep 2025 ¬∑ Live
    </div>
    <div class="biq-back">
      <a href="landing.html" class="biq-back-link">‚Üê Back to Home</a>
    </div>
  </div>

  <div class="section consumer-guide">
    <div class="guide-step">
      <span class="guide-num">1</span>
      <span class="guide-text">Browse the <strong>Ward Safety Scores</strong> below to compare neighborhoods</span>
    </div>
    <div class="guide-step">
      <span class="guide-num">2</span>
      <span class="guide-text">Search an <strong>address</strong> using the bar on the map (top right)</span>
    </div>
    <div class="guide-step">
      <span class="guide-num">3</span>
      <span class="guide-text">Toggle <strong>map layers</strong> to see schools, parks, transit &amp; more</span>
    </div>
  </div>

  <div class="section">
    <div class="section-label">Neighborhood Safety Scores</div>
    <div class="score-explainer">Scores are 0-100. Higher = safer. Based on verified crime data.</div>
    <div class="ward-list" id="wardList"></div>
  </div>

  <div class="section">
    <div class="section-label">Explore the Map</div>
    <div class="section-category-label category-default">Map Layers</div>
    <div class="toggle-row">
      <div class="toggle-label"><div class="toggle-swatch" style="background:linear-gradient(90deg,#e63946,#f4a261);opacity:.75;"></div>Ward Boundaries + Density</div>
      <label class="toggle"><input type="checkbox" id="togWardBoundaries" onchange="toggleLayer('wardBoundaries')"><span class="slider"></span></label>
    </div>
    <div class="toggle-row">
      <div class="toggle-label"><div class="toggle-swatch" style="background:#4CC9F0;opacity:.5;"></div>Police Districts</div>
      <label class="toggle"><input type="checkbox" id="togDistricts" checked onchange="toggleLayer('districts')"><span class="slider"></span></label>
    </div>
    <div class="toggle-row">
      <div class="toggle-label"><div class="toggle-swatch" style="background:#7B61FF;border-radius:50%;width:14px;height:14px;"></div>Precinct Stations</div>
      <label class="toggle"><input type="checkbox" id="togPrecincts" checked onchange="toggleLayer('precincts')"><span class="slider"></span></label>
    </div>
    <div class="toggle-row">
      <div class="toggle-label"><div class="toggle-swatch" style="background:#1d4ed8;border-radius:50%;"></div>PATH Stations</div>
      <label class="toggle"><input type="checkbox" id="togPathStations" onchange="toggleLayer('pathStations')"><span class="slider"></span></label>
    </div>
    <div class="section-category-label category-crime">Crime Data</div>
    <div class="toggle-row">
      <div class="toggle-label"><div class="toggle-swatch" style="background:linear-gradient(90deg,#4ade80,#facc15,#fb923c,#ef4444);"></div>Crime Heatmap</div>
      <label class="toggle"><input type="checkbox" id="togHeatmap" onchange="toggleLayer('crimeHeatmap')"><span class="slider"></span></label>
    </div>
    <div class="section-category-label category-community">Community</div>
    <div class="toggle-row">
      <div class="toggle-label"><div class="toggle-swatch" style="background:#4ade80;border-radius:50%;"></div>Schools &amp; Daycares</div>
      <label class="toggle"><input type="checkbox" id="togSchools" onchange="toggleLayer('schools')"><span class="slider"></span></label>
    </div>
    <div class="toggle-row">
      <div class="toggle-label"><div class="toggle-swatch" style="background:#60a5fa;border-radius:50%;"></div>Libraries</div>
      <label class="toggle"><input type="checkbox" id="togLibraries" onchange="toggleLayer('libraries')"><span class="slider"></span></label>
    </div>
    <div class="toggle-row">
      <div class="toggle-label"><div class="toggle-swatch" style="background:#f97316;border-radius:50%;"></div>Affordable Housing</div>
      <label class="toggle"><input type="checkbox" id="togAffordableHousing" onchange="toggleLayer('affordableHousing')"><span class="slider"></span></label>
    </div>
    <div class="section-category-label category-poi">POI Layers</div>
    <div class="toggle-row">
      <div class="toggle-label"><div class="toggle-swatch" style="background:#f43f5e;border-radius:50%;"></div>Liquor Stores &amp; Bars</div>
      <label class="toggle"><input type="checkbox" id="toggle-liquor" onchange="toggleLayer('poiLiquor')"><span class="slider"></span></label>
    </div>
    <div class="toggle-row">
      <div class="toggle-label"><div class="toggle-swatch" style="background:#22c55e;border-radius:50%;"></div>Parks &amp; Green Space</div>
      <label class="toggle"><input type="checkbox" id="toggle-parks" onchange="toggleLayer('poiParks')"><span class="slider"></span></label>
    </div>
    <div class="section-category-label category-muted">Safety (Coming Soon)</div>
    <div class="toggle-row locked-toggle-row" title="Coming soon ‚Äî data verification in progress">
      <div class="toggle-label"><div class="toggle-swatch" style="background:#6b7280;opacity:.6;border-radius:50%;"></div>CCTV Coverage</div>
      <div class="locked-badge">Locked üîí</div>
    </div>
    <div class="toggle-row locked-toggle-row" title="Coming soon ‚Äî data verification in progress">
      <div class="toggle-label"><div class="toggle-swatch" style="background:#6b7280;opacity:.6;border-radius:50%;"></div>Street Lighting</div>
      <div class="locked-badge">Locked üîí</div>
    </div>
    <div class="safety-disclaimer">Source: Jersey City Open Data Portal</div>
  </div>

  <div class="section section-collapsible">
    <details class="collapse-panel">
      <summary>2025 Crime Numbers (Jan-Sep)</summary>
      <div class="panel-content">
        <div class="section-subtitle">YTD figures from JCPD NIBRS reporting</div>
        <div class="stats-grid">
          <div class="stat-card red"><div class="stat-label">Homicides</div><div class="stat-value">10</div><div class="stat-sub">2025 YTD (Jan-Sep)</div></div>
          <div class="stat-card yellow"><div class="stat-label">Shootings</div><div class="stat-value">31</div><div class="stat-sub">2025 YTD (Jan-Sep)</div></div>
          <div class="stat-card blue"><div class="stat-label">Theft</div><div class="stat-value">3,019</div><div class="stat-sub">2025 YTD (Jan-Sep)</div></div>
          <div class="stat-card yellow"><div class="stat-label">Stolen Vehicles</div><div class="stat-value">648</div><div class="stat-sub">2025 YTD (Jan-Sep)</div></div>
        </div>
        <div class="freshness-badge"><span class="freshness-dot"></span>NIBRS ¬∑ Jan-Sep 2025 ¬∑ Updated Quarterly</div>
      </div>
    </details>
  </div>

  <div class="section section-collapsible">
    <details class="collapse-panel">
      <summary>Monthly Crime Trends</summary>
      <div class="panel-content">
        <div class="chart-header">
          <div class="stat-label" style="margin-bottom:0;">Category</div>
          <select id="crime-category-select" class="chart-select">
            <option value="Theft" selected>Theft</option>
            <option value="Stolen Vehicles">Stolen Vehicles</option>
            <option value="Robbery">Robbery</option>
            <option value="Aggravated Assault">Aggravated Assault</option>
            <option value="Criminal Mischief">Criminal Mischief</option>
            <option value="Burglary">Burglary</option>
            <option value="Homicides">Homicides</option>
            <option value="Shooting Incidents">Shooting Incidents</option>
            <option value="Shooting Victims">Shooting Victims</option>
          </select>
        </div>
        <div class="chart-wrap">
          <canvas id="crime-trend-chart"></canvas>
        </div>
      </div>
    </details>
  </div>

  <div class="section section-collapsible">
    <details class="collapse-panel">
      <summary>Full Crime Breakdown</summary>
      <div class="panel-content">
        <div class="summary-table-wrap">
          <table class="summary-table">
            <thead>
              <tr><th>Offense</th><th>YTD</th><th>Proj. Full Year</th></tr>
            </thead>
            <tbody>
              <tr><td class="offense-critical">Homicides</td><td class="ytd-val">10</td><td class="proj-val">~13</td></tr>
              <tr><td class="offense-critical">Shooting Incidents</td><td class="ytd-val">31</td><td class="proj-val">~41</td></tr>
              <tr><td class="offense-critical">Shooting Victims</td><td class="ytd-val">40</td><td class="proj-val">~53</td></tr>
              <tr><td>Robbery</td><td class="ytd-val">294</td><td class="proj-val">~392</td></tr>
              <tr><td>Aggravated Assault</td><td class="ytd-val">742</td><td class="proj-val">~989</td></tr>
              <tr><td>Criminal Mischief</td><td class="ytd-val">1,706</td><td class="proj-val">~2,275</td></tr>
              <tr><td>Burglary</td><td class="ytd-val">375</td><td class="proj-val">~500</td></tr>
              <tr><td>Theft</td><td class="ytd-val">3,019</td><td class="proj-val">~4,025</td></tr>
              <tr><td>Stolen Vehicles</td><td class="ytd-val">648</td><td class="proj-val">~864</td></tr>
            </tbody>
          </table>
        </div>
        <div class="summary-foot">Source: JCPD Official Stats ¬∑ NIBRS ¬∑ Projection = YTD √∑ 9 √ó 12</div>
      </div>
    </details>
  </div>

  <div class="section section-collapsible">
    <details class="collapse-panel">
      <summary>2024 Annual Data</summary>
      <div class="panel-content">
        <div class="nibrs-note">‚ö†Ô∏è <strong>Data Note:</strong> JCPD switched to the NIBRS reporting system in January 2024, replacing the older UCR/CompStat format. Pre-2024 year-over-year comparisons may reflect methodology changes, not actual crime shifts. NIBRS captures more crime categories and greater detail than previous systems.</div>
        <div class="crime-table-wrap">
          <table class="crime-table">
            <thead>
              <tr><th>Crime Type</th><th style="text-align:right;">Count + Trend</th></tr>
            </thead>
            <tbody>
              <tr><td>Violent Crime (total)</td><td class="crime-metric">609 <span class="down">‚Üì 47.8%</span></td></tr>
              <tr><td>Property Crime (total)</td><td class="crime-metric">3,825 <span class="down">‚Üì 2.9%</span></td></tr>
              <tr><td>Aggravated Assault</td><td class="crime-metric">986 <span class="up">‚Üë 25%</span></td></tr>
              <tr><td>Total Thefts</td><td class="crime-metric">4,125 <span class="up">‚Üë 41%</span></td></tr>
              <tr><td>Auto Theft</td><td class="crime-metric">806 <span class="up">‚Üë 28%</span></td></tr>
              <tr><td>Robbery <span class="crime-type-note">(NJ Statewide)</span></td><td class="crime-metric">9,743 <span class="down">‚Üì 7%</span></td></tr>
              <tr><td>Illegal Guns Recovered</td><td class="crime-metric">214 <span class="neutral">‚Äî</span></td></tr>
            </tbody>
          </table>
        </div>
        <div class="crime-note">Homicides (7) and shootings (29) reflect historic lows. Everyday property crime remains elevated.</div>
        <div class="crime-source">Source: FBI UCR 2024 / jerseycitynj.gov</div>
      </div>
    </details>
  </div>

  <div class="section">
    <div class="section-label">Police Districts</div>
    <div class="precinct-list" id="precinctList"></div>
  </div>

  <div class="section">
    <details class="collapse-panel">
      <summary>üìä Data Sources</summary>
      <div class="sources-list">
        <div class="source-card">
          <div class="source-name">FBI Crime Data Explorer</div>
          <a class="source-url" href="https://cde.ucr.cjis.gov" target="_blank" rel="noopener noreferrer">cde.ucr.cjis.gov</a>
          <div class="source-desc">Federal verified crime data by city. Most recent: 2024 (released Sept 2025).</div>
        </div>
        <div class="source-card">
          <div class="source-name">NJ State Police UCR</div>
          <a class="source-url" href="https://www.njsp.gov/ucr" target="_blank" rel="noopener noreferrer">njsp.gov/ucr</a>
          <div class="source-desc">Annual statewide report broken down by municipality. Gold standard for NJ comparisons.</div>
        </div>
        <div class="source-card">
          <div class="source-name">JC Open Data Portal</div>
          <a class="source-url" href="https://data.jerseycitynj.gov" target="_blank" rel="noopener noreferrer">data.jerseycitynj.gov</a>
          <div class="source-desc">Official city datasets including JCPD calls-for-service and geographic boundaries.</div>
        </div>
        <div class="source-card">
          <div class="source-name">JC Public Safety Office</div>
          <a class="source-url" href="https://www.jerseycitynj.gov/cityhall/public_safety" target="_blank" rel="noopener noreferrer">jerseycitynj.gov/cityhall/public_safety</a>
          <div class="source-desc">Year-end press releases with JCPD-reported stats. Updated annually in December.</div>
        </div>
        <div class="source-card">
          <div class="source-name">2025 Crime Stats: JCPD Official Stats (NIBRS)</div>
          <a class="source-url" href="https://cdnsm5-hosted.civiclive.com/UserFiles/Servers/Server_6189660/File/City%20Hall/Public%20Safety/UCR%20Crime%20Data%20Report/2025-JCPD-Crime-Stats.png" target="_blank" rel="noopener noreferrer">cdnsm5-hosted.civiclive.com/.../2025-JCPD-Crime-Stats.png</a>
          <div class="source-desc">Official January-September 2025 JCPD crime statistics image published by Jersey City Public Safety.</div>
        </div>
      </div>
    </details>
  </div>

  <p class="biq-disclaimer">Data from official government sources for informational purposes only. Not legal or financial advice. BlockIQ JC is not responsible for decisions made based on this information.</p>
  <div class="biq-ad-slot">
    <div class="biq-ad-label">Featured Agent</div>
    <div class="biq-ad-name">Advertise Here</div>
    <div class="biq-ad-sub">Reach JC home buyers ¬∑ $100/mo</div>
    <a href="index.html#advertise" class="biq-ad-link">Learn More ‚Üí</a>
  </div>

  <div class="data-note">Source: FBI UCR 2024 ¬∑ jerseycitynj.gov<br>Hover wards &amp; precincts for details<br>Click any item to zoom map</div>
</div>

<div id="map">
  <div id="legend">
    <div class="legend-section">
      <div class="legend-section-title">Ward Density</div>
      <div class="legend-row"><div class="legend-swatch" style="background:#1a472a"></div>Lower</div>
      <div class="legend-row"><div class="legend-swatch" style="background:#e9c46a"></div>Medium</div>
      <div class="legend-row"><div class="legend-swatch" style="background:#e63946"></div>Higher</div>
    </div>
    <div class="legend-section">
      <div class="legend-section-title">Police Districts</div>
      <div class="legend-row"><div class="legend-dot" style="background:#4CC9F0"></div>North</div>
      <div class="legend-row"><div class="legend-dot" style="background:#F72585"></div>South</div>
      <div class="legend-row"><div class="legend-dot" style="background:#7B61FF"></div>East</div>
      <div class="legend-row"><div class="legend-dot" style="background:#FF9F1C"></div>West</div>
    </div>
    <div class="legend-section" id="communityLegend" style="display:none;">
      <div class="legend-section-title">Community Layers</div>
      <div class="legend-row" id="schoolsLegendRow" style="display:none;"><div class="legend-dot" style="background:#4ade80"></div>Schools &amp; Daycares</div>
      <div class="legend-row" id="librariesLegendRow" style="display:none;"><div class="legend-dot" style="background:#60a5fa"></div>Libraries</div>
    </div>
    <div class="legend-section" id="affordableLegend" style="display:none;">
      <div class="legend-section-title">Affordable Housing</div>
      <div class="legend-row"><div class="legend-dot" style="background:#f97316"></div>Public Housing (JCHA)</div>
      <div class="legend-row"><div class="legend-dot" style="background:#facc15"></div>Affordable Rental</div>
      <div class="legend-row"><div class="legend-dot" style="background:#c084fc"></div>Senior Housing</div>
      <div class="legend-row"><div class="legend-dot" style="background:#9ca3af"></div>Size = number of units</div>
    </div>
    <div class="legend-section" id="pathLegend" style="display:none;">
      <div class="legend-section-title">PATH Stations</div>
      <div class="legend-row"><div class="legend-dot" style="background:#1d4ed8"></div>JC PATH Station</div>
    </div>
    <div class="legend-section" id="poiLegend" style="display:none;">
      <div class="legend-section-title">POI Layers</div>
      <div class="legend-row" id="liquorLegendRow" style="display:none;"><div class="legend-dot" style="background:#f43f5e"></div>Liquor Stores &amp; Bars</div>
      <div class="legend-row" id="parksLegendRow" style="display:none;"><div class="legend-dot" style="background:#22c55e"></div>Parks &amp; Green Space</div>
    </div>
    <div class="legend-section" id="heatmapLegend" style="display:none;">
      <div class="legend-section-title">Crime Heatmap</div>
      <div class="legend-row"><div class="legend-dot" style="background:#4ade80"></div>Lower density</div>
      <div class="legend-row"><div class="legend-dot" style="background:#facc15"></div>Moderate</div>
      <div class="legend-row"><div class="legend-dot" style="background:#fb923c"></div>Elevated</div>
      <div class="legend-row"><div class="legend-dot" style="background:#ef4444"></div>High density</div>
    </div>
  </div>
  <div id="layer-loading-indicator" style="
    display: none;
    position: absolute;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    background: #111318;
    border: 1px solid #1e2229;
    border-radius: 4px;
    padding: 6px 14px;
    font-family: 'Space Mono', monospace;
    font-size: 10px;
    color: #6b7280;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    z-index: 10;
    pointer-events: none;
  "></div>
</div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiY2xhd3JlbXkiLCJhIjoiY21sdzFlMTU0MGRxaDNlb252N3U1aWp5MyJ9.gJ3BZ2twJBzvlIDlW_sA7Q';

const wardData = {
  'A':{ description:'Greenville',                   incidents:312, level:'High',        topCrime:'Assault',   color:'#e63946', dot:'#e63946', safetyScore:45 },
  'B':{ description:'West Side',                    incidents:245, level:'High',        topCrime:'Robbery',   color:'#c1121f', dot:'#c1121f', safetyScore:57 },
  'C':{ description:'Journal Square',               incidents:198, level:'Medium-High', topCrime:'Larceny',   color:'#e9c46a', dot:'#e9c46a', safetyScore:65 },
  'D':{ description:'The Heights',                  incidents:176, level:'Medium',      topCrime:'Burglary',  color:'#f4a261', dot:'#f4a261', safetyScore:69 },
  'E':{ description:'Historic Downtown',            incidents:142, level:'Lower',       topCrime:'Theft',     color:'#2d6a4f', dot:'#52b788', safetyScore:75 },
  'F':{ description:'Bergen-Lafayette',             incidents:118, level:'Lower',       topCrime:'Vandalism', color:'#1a472a', dot:'#74c69d', safetyScore:79 }
};

const crimeStats2025 = {
  source: "JCPD Official Stats (NIBRS Data, subject to revision pending investigation)",
  coverage: "January - September 2025",
  months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep"],
  categories: {
    "Shooting Incidents": [2, 3, 2, 4, 8, 5, 1, 2, 4],
    "Shooting Victims":   [3, 3, 3, 6, 8, 9, 1, 2, 5],
    "Homicides":          [5, 0, 0, 2, 0, 1, 1, 0, 1],
    "Robbery":            [47, 35, 18, 37, 31, 30, 37, 26, 33],
    "Aggravated Assault": [82, 65, 101, 86, 73, 95, 81, 65, 94],
    "Criminal Mischief":  [173, 132, 247, 198, 171, 203, 202, 202, 178],
    "Burglary":           [69, 25, 38, 44, 48, 32, 31, 46, 42],
    "Theft":              [329, 250, 353, 369, 387, 342, 333, 336, 320],
    "Stolen Vehicles":    [60, 66, 58, 68, 70, 83, 85, 77, 81]
  }
};

let crimeChart;

function calculateSafetyScore(ward){
  const cityAvg = 198;
  const incidents = ward.incidents;
  const ratio = incidents / cityAvg;
  let score = Math.round(100 - (ratio * 35));
  score = Math.max(10, Math.min(95, score));
  return score;
}

function getSafetyTier(score){
  if(score >= 80) return { label:'Peaceful', color:'#4ade80' };
  if(score >= 65) return { label:'Good', color:'#86efac' };
  if(score >= 50) return { label:'Fair', color:'#facc15' };
  if(score >= 35) return { label:'Caution', color:'#fb923c' };
  return { label:'High Risk', color:'#e63946' };
}

function initCrimeChart(category) {
  const canvas = document.getElementById('crime-trend-chart');
  if (!canvas || typeof Chart === 'undefined') return;

  const selectedCategory = crimeStats2025.categories[category] ? category : 'Theft';
  const ctx = canvas.getContext('2d');
  const values = crimeStats2025.categories[selectedCategory];
  const maxVal = Math.max(...values);

  if (crimeChart) crimeChart.destroy();
  crimeChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: crimeStats2025.months,
      datasets: [{
        data: values,
        backgroundColor: values.map((v) => {
          const i = v / maxVal;
          if (i > 0.8) return 'rgba(230,57,70,0.85)';
          if (i > 0.6) return 'rgba(251,146,60,0.85)';
          if (i > 0.4) return 'rgba(250,204,21,0.85)';
          return 'rgba(74,222,128,0.85)';
        }),
        borderRadius: 3,
        borderSkipped: false
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { display: false }
      },
      scales: {
        x: {
          grid: { color: '#1e2229' },
          ticks: { color: '#6b7280', font: { family: 'Space Mono', size: 9 } }
        },
        y: {
          grid: { color: '#1e2229' },
          ticks: { color: '#6b7280', font: { family: 'Space Mono', size: 9 } },
          beginAtZero: true
        }
      }
    }
  });
}

function setupCrimeTrendChart() {
  const select = document.getElementById('crime-category-select');
  if (!select) return;
  initCrimeChart(select.value || 'Theft');
  select.addEventListener('change', function onCrimeCategoryChange() {
    initCrimeChart(this.value);
  });
}

setupCrimeTrendChart();

const heatmapPointsData = {
  type:'FeatureCollection',
  features:[
    { type:'Feature', geometry:{ type:'Point', coordinates:[-74.0950, 40.7050] }, properties:{ weight: 1.0 } },
    { type:'Feature', geometry:{ type:'Point', coordinates:[-74.0880, 40.7080] }, properties:{ weight: 0.9 } },
    { type:'Feature', geometry:{ type:'Point', coordinates:[-74.1020, 40.7020] }, properties:{ weight: 0.85 } },
    { type:'Feature', geometry:{ type:'Point', coordinates:[-74.0820, 40.7100] }, properties:{ weight: 0.8 } },
    { type:'Feature', geometry:{ type:'Point', coordinates:[-74.0950, 40.7150] }, properties:{ weight: 0.75 } },
    { type:'Feature', geometry:{ type:'Point', coordinates:[-74.1010, 40.7180] }, properties:{ weight: 0.7 } },
    { type:'Feature', geometry:{ type:'Point', coordinates:[-74.0900, 40.7200] }, properties:{ weight: 0.65 } },
    { type:'Feature', geometry:{ type:'Point', coordinates:[-74.0515, 40.7401] }, properties:{ weight: 0.6 } },
    { type:'Feature', geometry:{ type:'Point', coordinates:[-74.0560, 40.7450] }, properties:{ weight: 0.55 } },
    { type:'Feature', geometry:{ type:'Point', coordinates:[-74.0480, 40.7380] }, properties:{ weight: 0.5 } },
    { type:'Feature', geometry:{ type:'Point', coordinates:[-74.0634, 40.7322] }, properties:{ weight: 0.5 } },
    { type:'Feature', geometry:{ type:'Point', coordinates:[-74.0700, 40.7280] }, properties:{ weight: 0.45 } },
    { type:'Feature', geometry:{ type:'Point', coordinates:[-74.0380, 40.7230] }, properties:{ weight: 0.35 } },
    { type:'Feature', geometry:{ type:'Point', coordinates:[-74.0340, 40.7190] }, properties:{ weight: 0.3 } },
    { type:'Feature', geometry:{ type:'Point', coordinates:[-74.0756, 40.6980] }, properties:{ weight: 0.25 } },
    { type:'Feature', geometry:{ type:'Point', coordinates:[-74.0820, 40.7020] }, properties:{ weight: 0.2 } }
  ]
};

const precincts = [
  { id:'north', name:'North District', address:'282 Central Ave, JC 07307', phone:'(201) 547-5350',
    color:'#4CC9F0', coords:[-74.0502, 40.7444],
    wards:'Wards C, D (Journal Square / The Heights)', neighborhoods:'Journal Square Heights, Central Ave corridor, Pershing Field, Palisade Ave to Paterson Plank Rd' },
  { id:'south', name:'South District', address:'191 Bergen Ave, JC 07305', phone:'(201) 547-5456',
    color:'#F72585', coords:[-74.0850, 40.7091],
    wards:'Wards A, B (Greenville / West Side)', neighborhoods:'Greenville, West Side, Liberty State Park area, south to Bayonne border' },
  { id:'east',  name:'East District',  address:'207 7th Street, JC 07302', phone:'(201) 547-5408',
    color:'#7B61FF', coords:[-74.0427, 40.7259],
    wards:'Ward E (Historic Downtown)', neighborhoods:'Historic Downtown, Grove St, Newport, Waterfront, Hamilton Park, Van Vorst Park' },
  { id:'west',  name:'West District',  address:'1 Jackson St, JC 07304', phone:'(201) 547-5450',
    color:'#FF9F1C', coords:[-74.0742, 40.7169],
    wards:'Ward F (Bergen-Lafayette)', neighborhoods:'Bergen-Lafayette, MLK Drive corridor, West Bergen, Communipaw Ave' }
];

const communityFacilitiesData = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{"name":"268 Varick St","type":"School"},"geometry":{"type":"Point","coordinates":[-74.04965,40.71797]}},{"type":"Feature","properties":{"name":"A Harry Moore School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.08526,40.70948]}},{"type":"Feature","properties":{"name":"Academy House CDC 4","type":"School"},"geometry":{"type":"Point","coordinates":[-74.06257,40.73564]}},{"type":"Feature","properties":{"name":"Alfred E. Zampella No. 27 Elementary School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.0501,40.75371]}},{"type":"Feature","properties":{"name":"Badr School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.07486,40.7192]}},{"type":"Feature","properties":{"name":"Bentley Avenue","type":"School"},"geometry":{"type":"Point","coordinates":[-74.07662,40.72076]}},{"type":"Feature","properties":{"name":"Bergen Community Action Head Start","type":"School"},"geometry":{"type":"Point","coordinates":[-74.07621,40.71684]}},{"type":"Feature","properties":{"name":"Bergen-Lafayette Montessori School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.06135,40.71069]}},{"type":"Feature","properties":{"name":"Bright Future Day/Night Childcare","type":"School"},"geometry":{"type":"Point","coordinates":[-74.07356,40.7206]}},{"type":"Feature","properties":{"name":"Bright Star Learning Center II","type":"School"},"geometry":{"type":"Point","coordinates":[-74.05316,40.74456]}},{"type":"Feature","properties":{"name":"Christa McAuliffe School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.04621,40.74821]}},{"type":"Feature","properties":{"name":"Cradle To Crayons Learning Center","type":"School"},"geometry":{"type":"Point","coordinates":[-74.06451,40.71325]}},{"type":"Feature","properties":{"name":"Dr Paul Rafalides - School 33","type":"School"},"geometry":{"type":"Point","coordinates":[-74.08373,40.71867]}},{"type":"Feature","properties":{"name":"Elementary School 22","type":"School"},"geometry":{"type":"Point","coordinates":[-74.06149,40.71362]}},{"type":"Feature","properties":{"name":"Elementary School 24","type":"School"},"geometry":{"type":"Point","coordinates":[-74.08399,40.71619]}},{"type":"Feature","properties":{"name":"Empowerment Academy Charter School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.08539,40.71586]}},{"type":"Feature","properties":{"name":"Frank R Conwell Middle School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.05032,40.71737]}},{"type":"Feature","properties":{"name":"Frank R Conwell School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.05098,40.7176]}},{"type":"Feature","properties":{"name":"Garden Preschool Cooperative","type":"School"},"geometry":{"type":"Point","coordinates":[-74.04451,40.72929]}},{"type":"Feature","properties":{"name":"Hamilton Park Montessori","type":"School"},"geometry":{"type":"Point","coordinates":[-74.04392,40.72693]}},{"type":"Feature","properties":{"name":"Henry Snyder High School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.08445,40.71032]}},{"type":"Feature","properties":{"name":"Hudson Catholic Regional High School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.06741,40.72615]}},{"type":"Feature","properties":{"name":"Hudson Montessori School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.0466,40.71538]}},{"type":"Feature","properties":{"name":"James F Murray Elem School 38","type":"School"},"geometry":{"type":"Point","coordinates":[-74.09045,40.70921]}},{"type":"Feature","properties":{"name":"James J Ferris High School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.05456,40.72093]}},{"type":"Feature","properties":{"name":"Jersey City Board of Education","type":"School"},"geometry":{"type":"Point","coordinates":[-74.04999,40.71761]}},{"type":"Feature","properties":{"name":"Jersey City Global Charter School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.05213,40.75329]}},{"type":"Feature","properties":{"name":"Jersey City Golden Door Charter","type":"School"},"geometry":{"type":"Point","coordinates":[-74.04085,40.72842]}},{"type":"Feature","properties":{"name":"Jersey City Golden Door Charter School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.06228,40.73718]}},{"type":"Feature","properties":{"name":"Jersey City Regional Day School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.06203,40.71577]}},{"type":"Feature","properties":{"name":"Joseph H. Brensinger School - PS 17","type":"School"},"geometry":{"type":"Point","coordinates":[-74.07228,40.72106]}},{"type":"Feature","properties":{"name":"Jotham W. Wakeman No. 6 Elementary School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.05551,40.73577]}},{"type":"Feature","properties":{"name":"Key Element Learning","type":"School"},"geometry":{"type":"Point","coordinates":[-74.04259,40.72034]}},{"type":"Feature","properties":{"name":"Kiddee Korner Learning Center","type":"School"},"geometry":{"type":"Point","coordinates":[-74.08052,40.70933]}},{"type":"Feature","properties":{"name":"Kiddie Academy of Hamilton Park","type":"School"},"geometry":{"type":"Point","coordinates":[-74.05004,40.72938]}},{"type":"Feature","properties":{"name":"Liberty High School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.07411,40.73235]}},{"type":"Feature","properties":{"name":"M.E.T.S. Charter School Jersey City Campus","type":"School"},"geometry":{"type":"Point","coordinates":[-74.04513,40.74797]}},{"type":"Feature","properties":{"name":"MAHATMA K. GANDHI SCHOOL - PS 23","type":"School"},"geometry":{"type":"Point","coordinates":[-74.06845,40.73467]}},{"type":"Feature","properties":{"name":"McNair Academic High School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.0475,40.7268]}},{"type":"Feature","properties":{"name":"Montessori School of Jersey City","type":"School"},"geometry":{"type":"Point","coordinates":[-74.04459,40.72155]}},{"type":"Feature","properties":{"name":"New Jersey City University","type":"School"},"geometry":{"type":"Point","coordinates":[-74.08765,40.70966]}},{"type":"Feature","properties":{"name":"New York/New Jersey Academy of Ceramic Arts","type":"School"},"geometry":{"type":"Point","coordinates":[-74.05872,40.71256]}},{"type":"Feature","properties":{"name":"Nicolas Copernicus School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.05636,40.74833]}},{"type":"Feature","properties":{"name":"Parkside Preschool","type":"School"},"geometry":{"type":"Point","coordinates":[-74.05216,40.74155]}},{"type":"Feature","properties":{"name":"Primary Prep","type":"School"},"geometry":{"type":"Point","coordinates":[-74.06631,40.7267]}},{"type":"Feature","properties":{"name":"Ps 23 Kindergarten Annex","type":"School"},"geometry":{"type":"Point","coordinates":[-74.07159,40.73358]}},{"type":"Feature","properties":{"name":"PS 8","type":"School"},"geometry":{"type":"Point","coordinates":[-74.04858,40.74288]}},{"type":"Feature","properties":{"name":"Public Elementary School # 29","type":"School"},"geometry":{"type":"Point","coordinates":[-74.07934,40.70871]}},{"type":"Feature","properties":{"name":"Public School 34","type":"School"},"geometry":{"type":"Point","coordinates":[-74.09096,40.70221]}},{"type":"Feature","properties":{"name":"Rafael De J Cordero Elementary","type":"School"},"geometry":{"type":"Point","coordinates":[-74.043,40.72787]}},{"type":"Feature","properties":{"name":"Sacred Heart School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.0833,40.70694]}},{"type":"Feature","properties":{"name":"Saint Dominic Academy","type":"School"},"geometry":{"type":"Point","coordinates":[-74.07288,40.72482]}},{"type":"Feature","properties":{"name":"Saint Peter's University","type":"School"},"geometry":{"type":"Point","coordinates":[-74.0715,40.72722]}},{"type":"Feature","properties":{"name":"Smart Start Academy","type":"School"},"geometry":{"type":"Point","coordinates":[-74.04615,40.75042]}},{"type":"Feature","properties":{"name":"St. Nicholas School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.05104,40.74191]}},{"type":"Feature","properties":{"name":"Starting Points, Inc.","type":"School"},"geometry":{"type":"Point","coordinates":[-74.06948,40.72968]}},{"type":"Feature","properties":{"name":"The Academy I Middle School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.08454,40.70958]}},{"type":"Feature","properties":{"name":"The Brunswick School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.05088,40.72648]}},{"type":"Feature","properties":{"name":"The Embankment School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.05021,40.72923]}},{"type":"Feature","properties":{"name":"The Ethical Community Charter School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.07241,40.73595]}},{"type":"Feature","properties":{"name":"The Scandinavian School of Jersey City","type":"School"},"geometry":{"type":"Point","coordinates":[-74.0421,40.72826]}},{"type":"Feature","properties":{"name":"University Academy Charter School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.09198,40.71229]}},{"type":"Feature","properties":{"name":"PRR Corporation","type":"School"},"geometry":{"type":"Point","coordinates":[-74.04618,40.72185]}},{"type":"Feature","properties":{"name":"Explore 2000 Middle School","type":"School"},"geometry":{"type":"Point","coordinates":[-74.04092,40.7284]}},{"type":"Feature","properties":{"name":"Jersey City Free Public Library","type":"Library"},"geometry":{"type":"Point","coordinates":[-74.04731,40.71891]}},{"type":"Feature","properties":{"name":"Jersey City Free Public Library: Children's Dept","type":"Library"},"geometry":{"type":"Point","coordinates":[-74.04747,40.71889]}},{"type":"Feature","properties":{"name":"Jersey City Free Public Library: Cunningham Branch","type":"Library"},"geometry":{"type":"Point","coordinates":[-74.08188,40.70864]}},{"type":"Feature","properties":{"name":"Jersey City Free Public Library: Five Corners Branch","type":"Library"},"geometry":{"type":"Point","coordinates":[-74.05951,40.73514]}},{"type":"Feature","properties":{"name":"Jersey City Free Public Library: Greenville Branch","type":"Library"},"geometry":{"type":"Point","coordinates":[-74.0914,40.70302]}},{"type":"Feature","properties":{"name":"Jersey City Free Public Library: Heights Branch","type":"Library"},"geometry":{"type":"Point","coordinates":[-74.05041,40.74575]}},{"type":"Feature","properties":{"name":"Jersey City Free Public Library: Lafayette Branch","type":"Library"},"geometry":{"type":"Point","coordinates":[-74.06254,40.71174]}},{"type":"Feature","properties":{"name":"Jersey City Free Public Library: Marion Branch","type":"Library"},"geometry":{"type":"Point","coordinates":[-74.07174,40.73416]}},{"type":"Feature","properties":{"name":"Jersey City Free Public Library: Miller Branch","type":"Library"},"geometry":{"type":"Point","coordinates":[-74.07665,40.718]}},{"type":"Feature","properties":{"name":"Jersey City Free Public Library: Pavonia Branch","type":"Library"},"geometry":{"type":"Point","coordinates":[-74.04788,40.72732]}},{"type":"Feature","properties":{"name":"NJCU Library","type":"Library"},"geometry":{"type":"Point","coordinates":[-74.0872,40.70952]}},{"type":"Feature","properties":{"name":"Theresa and Edward O'Toole Library","type":"Library"},"geometry":{"type":"Point","coordinates":[-74.07177,40.72758]}}]};
const schoolsData = {
  type:'FeatureCollection',
  features: communityFacilitiesData.features.filter((feature)=>feature.properties && feature.properties.type === 'School')
};
const librariesData = {
  type:'FeatureCollection',
  features: communityFacilitiesData.features.filter((feature)=>feature.properties && feature.properties.type === 'Library')
};

const affordableHousingData = {
  "type": "FeatureCollection",
  "features": [
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0820, 40.7050] }, "properties": { "name": "Marion Gardens", "address": "400 US Highway 1", "category": "Public Housing", "color": "#f97316", "units": 600, "ami_level": "0-30% AMI", "ward": "F" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0783, 40.7072] }, "properties": { "name": "Holland Gardens", "address": "340 Pacific Avenue", "category": "Public Housing", "color": "#f97316", "units": 198, "ami_level": "0-30% AMI", "ward": "F" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0720, 40.7125] }, "properties": { "name": "Hudson Gardens", "address": "95 Communipaw Avenue", "category": "Public Housing", "color": "#f97316", "units": 250, "ami_level": "0-30% AMI", "ward": "F" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0940, 40.6990] }, "properties": { "name": "Curries Woods", "address": "150 Curries Woods Drive", "category": "Public Housing", "color": "#f97316", "units": 504, "ami_level": "0-30% AMI", "ward": "A" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0921, 40.6950] }, "properties": { "name": "Berry Gardens I and II", "address": "199 Ocean Avenue", "category": "Senior Housing", "color": "#c084fc", "units": 286, "ami_level": "0-30% AMI", "ward": "A" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.058881, 40.71925] }, "properties": { "name": "Booker T. Washington Apartments", "address": "200 Colden Street", "category": "Public Housing", "color": "#f97316", "units": 307, "ami_level": "0-30% AMI", "ward": "F" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0930, 40.6940] }, "properties": { "name": "Webb Apartments", "address": "252 Ocean Avenue", "category": "Public Housing", "color": "#f97316", "units": 140, "ami_level": "0-30% AMI", "ward": "A" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0829, 40.7042] }, "properties": { "name": "Dwight Street Homes", "address": "136 Stegman Street", "category": "Public Housing", "color": "#f97316", "units": 28, "ami_level": "0-30% AMI", "ward": "F" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0781, 40.7171] }, "properties": { "name": "Lexington Manor Apartments", "address": "11 Lexington Avenue", "category": "Affordable Rental", "color": "#facc15", "units": 151, "ami_level": "Mixed AMI", "ward": "B" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0863, 40.7066] }, "properties": { "name": "Audobon Park Apts", "address": "112 Bergen Avenue", "category": "Affordable Rental", "color": "#facc15", "units": 167, "ami_level": "Mixed AMI", "ward": "F" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0841, 40.7063] }, "properties": { "name": "Fred Martin Apartments", "address": "196 MLK Jr Drive", "category": "Affordable Rental", "color": "#facc15", "units": 39, "ami_level": "0-60% AMI", "ward": "F" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0650, 40.7097] }, "properties": { "name": "Pacific Court", "address": "220-240 Pacific Avenue", "category": "Affordable Rental", "color": "#facc15", "units": 51, "ami_level": "Mixed AMI", "ward": "F" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0695, 40.7345] }, "properties": { "name": "Van Wagenen Ave Apts", "address": "117 Van Wagenen", "category": "Affordable Rental", "color": "#facc15", "units": 114, "ami_level": "30-60% AMI", "ward": "C" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0533, 40.7399] }, "properties": { "name": "Toy Factory Apartments", "address": "152 Central Avenue", "category": "Affordable Rental", "color": "#facc15", "units": 46, "ami_level": "Mixed AMI", "ward": "C" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0638, 40.7129] }, "properties": { "name": "219 Van Horne Apartments", "address": "219 Van Horne Street", "category": "Affordable Rental", "color": "#facc15", "units": 44, "ami_level": "30-60% AMI", "ward": "F" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0707, 40.7131] }, "properties": { "name": "Woodward Homes", "address": "148 Bramhall Avenue", "category": "Affordable Rental", "color": "#facc15", "units": 46, "ami_level": "Mixed AMI", "ward": "F" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0377, 40.7171] }, "properties": { "name": "Paulus Hook Senior Apts", "address": "100 Montgomery Street", "category": "Senior Housing", "color": "#c084fc", "units": 308, "ami_level": "30-60% AMI", "ward": "E" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0934, 40.6937] }, "properties": { "name": "Harbor View Apartments", "address": "145 Ocean Avenue", "category": "Senior Housing", "color": "#c084fc", "units": 99, "ami_level": "0-30% AMI", "ward": "A" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0440, 40.7560] }, "properties": { "name": "Heights Senior Housing", "address": "2 Hague Street", "category": "Senior Housing", "color": "#c084fc", "units": 36, "ami_level": "0-30% AMI", "ward": "D" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0685, 40.7241] }, "properties": { "name": "YWCA Senior Housing", "address": "111 Storms Avenue", "category": "Senior Housing", "color": "#c084fc", "units": 78, "ami_level": "Mixed AMI", "ward": "F" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0493, 40.7512] }, "properties": { "name": "Muhlenberg Gardens", "address": "1065 Summit Avenue", "category": "Senior Housing", "color": "#c084fc", "units": 150, "ami_level": "Mixed AMI", "ward": "D" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0635, 40.7275] }, "properties": { "name": "Academy House", "address": "203 Academy Street", "category": "Senior Housing", "color": "#c084fc", "units": 80, "ami_level": "Mixed AMI", "ward": "C" } },
    { "type": "Feature", "geometry": { "type": "Point", "coordinates": [-74.0667, 40.7233] }, "properties": { "name": "New Community Hudson Senior Housing", "address": "21-27 Orchard Street", "category": "Senior Housing", "color": "#c084fc", "units": 80, "ami_level": "30-60% AMI", "ward": "F" } }
  ]
};

const pathStationsData = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": { "type": "Point", "coordinates": [-74.0431, 40.7195] },
      "properties": { "name": "Exchange Place", "lines": ["NWK-WTC", "HOB-WTC"], "borough": "Downtown" }
    },
    {
      "type": "Feature",
      "geometry": { "type": "Point", "coordinates": [-74.0438, 40.7247] },
      "properties": { "name": "Grove Street", "lines": ["NWK-WTC", "HOB-WTC", "HOB-33"], "borough": "Downtown" }
    },
    {
      "type": "Feature",
      "geometry": { "type": "Point", "coordinates": [-74.0638, 40.7282] },
      "properties": { "name": "Journal Square", "lines": ["NWK-WTC", "HOB-WTC"], "borough": "Journal Square" }
    },
    {
      "type": "Feature",
      "geometry": { "type": "Point", "coordinates": [-74.0362, 40.7178] },
      "properties": { "name": "Newport", "lines": ["HOB-33"], "borough": "Newport" }
    }
  ]
};

const liquorQuery = `
[out:json][timeout:25][bbox:40.6500,-74.1400,40.7700,-74.0200];
(
  nwr["amenity"="bar"];
  nwr["amenity"="pub"];
  nwr["amenity"="nightclub"];
  nwr["shop"="alcohol"];
  nwr["shop"="wine"];
  nwr["shop"="beverages"]["drink:alcohol"="yes"];
);
out center;
`;

const parksQuery = `
[out:json][timeout:25][bbox:40.6500,-74.1400,40.7700,-74.0200];
(
  nwr["leisure"="park"];
  nwr["leisure"="playground"];
  nwr["leisure"="recreation_ground"];
  nwr["leisure"="sports_centre"];
);
out center;
`;

const supplementalParks = [
  { name: "Metro Field", lat: 40.71039976821976, lon: -74.09482209821624 },
  { name: "Harmon Street Pool", lat: 40.71606416216135, lon: -74.07003968039884 },
  { name: "Oak Street Park", lat: 40.71214803329527, lon: -74.07426271992558 },
  { name: "Cornelius Parker Park", lat: 40.71498361984668, lon: -74.0724056786271 },
  { name: "Martiniak-Enright Park", lat: 40.690771789013155, lon: -74.097888465849 },
  { name: "Ralph Taylor Memorial Park", lat: 40.697109491502744, lon: -74.09036185520252 },
  { name: "Ferris Triangle Park", lat: 40.698505013228136, lon: -74.09220018781512 },
  { name: "Wilkinson Avenue Park", lat: 40.707006281430914, lon: -74.08107010898169 },
  { name: "Virginia Avenue Park", lat: 40.7131093543283, lon: -74.07842976258243 },
  { name: "LaPOINTE Park", lat: 40.72961010827611, lon: -74.07114065811858 },
  { name: "Monticello Avenue Mini Park", lat: 40.715769447296374, lon: -74.07334544917744 },
  { name: "Bramhall Avenue Mini Park", lat: 40.715428745706305, lon: -74.07459185958305 },
  { name: "Meluso Park", lat: 40.71686786316065, lon: -74.05014761127438 },
  { name: "Terry DeHere / Garfield Avenue Park", lat: 40.713476108120105, lon: -74.06829705124365 },
  { name: "Veterans Park", lat: 40.71196149308096, lon: -74.03284557605008 },
  { name: "Sgt. Anthony Park", lat: 40.73223301410334, lon: -74.05145712868855 },
  { name: "Pat DeAngelo Playground", lat: 40.72643737777658, lon: -74.0494589951141 },
  { name: "First Street Playground", lat: 40.72282882922412, lon: -74.05164023272543 },
  { name: "Claremont Avenue Playground", lat: 40.70719850749779, lon: -74.0757002656043 },
  { name: "Sixteenth Street Playground", lat: 40.732915090391444, lon: -74.0422250174482 },
  { name: "Wayne Street Playground", lat: 40.71989813796251, lon: -74.04606161203758 },
  { name: "Ege Avenue Playground", lat: 40.71571788666441, lon: -74.08625895333087 },
  { name: "Arthur Ashe Basketball Court", lat: 40.71138523438411, lon: -74.07284765408383 },
  { name: "Fulton Park", lat: 40.7045144018124, lon: -74.08712923941324 },
  { name: "Pope Triangle", lat: 40.722028500666724, lon: -74.06560903414481 },
  { name: "Brett Triangle", lat: 40.73372308328924, lon: -74.06739680317939 },
  { name: "Fairmount Triangle", lat: 40.720133211745384, lon: -74.06699316164367 },
  { name: "McGinley Square", lat: 40.72529446555031, lon: -74.06771165984678 },
  { name: "Apple Tree House", lat: 40.73010399057435, lon: -74.06632262873215 },
  { name: "Laurel Court", lat: 40.722210421890054, lon: -74.04230123015905 },
  { name: "Cueno Place Park", lat: 40.738070624236094, lon: -74.04726889303765 },
  { name: "Tumulty Park", lat: 40.73783906730096, lon: -74.04690578737251 },
  { name: "Riverview Park", lat: 40.74402534591779, lon: -74.04278011196905 },
  { name: "Fisk Park", lat: 40.744544668066034, lon: -74.04341009076747 },
  { name: "Woodland Avenue Park", lat: 40.699876963545755, lon: -74.09578546804589 },
  { name: "Stevens Park (Greenville)", lat: 40.702272111846504, lon: -74.08875078555548 },
  { name: "Lt. R.B. Grover Memorial Park", lat: 40.71108517865195, lon: -74.08514605040376 },
  { name: "City Hall Park", lat: 40.717781252387724, lon: -74.04361655861156 },
  { name: "Dr. Lena Edwards Park", lat: 40.71294375065562, lon: -74.05842634387562 },
  { name: "Gateway Park Complex", lat: 40.71888124438111, lon: -74.05693092164833 },
  { name: "Hackensack River Greenway", lat: 40.723441704489204, lon: -74.09658083727692 },
  { name: "Skinner Memorial Park", lat: 40.70432848366318, lon: -74.0761425992637 },
  { name: "Pavonia/Marion Playground Pool", lat: 40.73492454422242, lon: -74.07060139735843 },
  { name: "Roberto Clemente LL", lat: 40.72555083321334, lon: -74.04150100619441 },
  { name: "Exchange Place Waterfront", lat: 40.71605296982352, lon: -74.03114790168574 },
  { name: "Terrace Avenue / Edward Crincoli Park", lat: 40.75247595821529, lon: -74.05654425175157 }
];

function haversineMeters(lat1, lon1, lat2, lon2) {
  const R = 6371000;
  const dLat = (lat2 - lat1) * Math.PI / 180;
  const dLon = (lon2 - lon1) * Math.PI / 180;
  const a = Math.sin(dLat / 2) ** 2 + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon / 2) ** 2;
  return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
}

function dedupeParkFeatures(features) {
  const accepted = [];
  const normalized = [];

  (features || []).forEach((feature) => {
    const coords = feature && feature.geometry && feature.geometry.coordinates;
    if (!coords || coords.length < 2) return;
    const lon = Number(coords[0]);
    const lat = Number(coords[1]);
    if (!Number.isFinite(lat) || !Number.isFinite(lon)) return;

    const name = String((feature.properties && feature.properties.name) || '').trim().toLowerCase();

    const duplicate = normalized.some((item) => {
      const sameName = name && item.name && name === item.name;
      const dist = haversineMeters(lat, lon, item.lat, item.lon);
      if (sameName && dist < 200) return true;
      if (dist < 25) return true;
      return false;
    });

    if (!duplicate) {
      accepted.push(feature);
      normalized.push({ lat, lon, name });
    }
  });

  return accepted;
}

async function fetchOverpassPOI(query) {
  const body = 'data=' + encodeURIComponent(query);
  const overpassEndpoints = [
    'https://overpass-api.de/api/interpreter',
    'https://lz4.overpass-api.de/api/interpreter',
    'https://overpass.kumi.systems/api/interpreter'
  ];

  function getCoords(el) {
    if (typeof el.lat === 'number' && typeof el.lon === 'number') {
      return [el.lon, el.lat];
    }
    if (el.center && typeof el.center.lat === 'number' && typeof el.center.lon === 'number') {
      return [el.center.lon, el.center.lat];
    }
    return null;
  }

  let lastError = null;
  try {
    for (const url of overpassEndpoints) {
      try {
        const res = await fetch(url, {
          method: 'POST',
          headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
          body
        });
        if (!res.ok) {
          throw new Error(`Overpass ${res.status} at ${url}`);
        }

        const json = await res.json();
        const features = (json.elements || [])
          .map((el) => {
            const coords = getCoords(el);
            if (!coords) return null;
            if (!isInsideJerseyCity(coords[0], coords[1])) return null;
            return {
              type: 'Feature',
              geometry: { type: 'Point', coordinates: coords },
              properties: {
                name: (el.tags && (el.tags.name || el.tags.brand)) || 'Unnamed',
                type: (el.tags && (el.tags.amenity || el.tags.shop || el.tags.landuse || el.tags.leisure)) || '',
                ...(el.tags || {})
              }
            };
          })
          .filter(Boolean);

        return { type: 'FeatureCollection', features };
      } catch (err) {
        lastError = err;
      }
    }
  } catch (err) {
    lastError = err;
  }
  if (lastError) {
    console.warn('Overpass fetch failed on all endpoints:', lastError);
  }
  return { type: 'FeatureCollection', features: [] };
}

function hideLayerLoading() {
  const el = document.getElementById('layer-loading-indicator');
  if (el) {
    el.style.display = 'none';
  }
}

function showLayerLoading(label) {
  const el = document.getElementById('layer-loading-indicator');
  if (el) {
    el.textContent = `Loading ${label}...`;
    el.style.display = 'block';
    setTimeout(() => { el.style.display = 'none'; }, 4000);
  }
}

async function loadLiquorLayer() {
  showLayerLoading('Liquor Stores');
  try {
    const data = await fetchOverpassPOI(liquorQuery);

    if (map.getSource('liquor-stores')) {
      map.getSource('liquor-stores').setData(data);
      return;
    }

    map.addSource('liquor-stores', { type: 'geojson', data });

    map.addLayer({
      id: 'liquor-stores-layer',
      type: 'circle',
      source: 'liquor-stores',
      layout: { visibility: 'none' },
      paint: {
        'circle-radius': 5,
        'circle-color': '#f43f5e',
        'circle-opacity': 0.8,
        'circle-stroke-width': 1,
        'circle-stroke-color': '#0a0c10',
        'circle-emissive-strength': 1
      }
    });

    map.on('click', 'liquor-stores-layer', (e) => {
      const p = e.features[0].properties;
      const typeLabel = p.amenity === 'bar' ? 'Bar' : p.amenity === 'nightclub' ? 'Nightclub' : p.amenity === 'pub' ? 'Pub' : 'Liquor Store';
      new mapboxgl.Popup({ closeButton: false })
        .setLngLat(e.features[0].geometry.coordinates)
        .setHTML(`
        <div style="font-family:'DM Sans',sans-serif;padding:4px">
          <div style="font-family:'Space Mono',monospace;font-size:10px;color:#f43f5e;text-transform:uppercase;letter-spacing:0.1em;margin-bottom:4px">${typeLabel}</div>
          <div style="font-size:13px;font-weight:600;color:#e8eaed">${p.name}</div>
        </div>
      `)
        .addTo(map);
    });
    map.on('mouseenter', 'liquor-stores-layer', () => { map.getCanvas().style.cursor = 'pointer'; });
    map.on('mouseleave', 'liquor-stores-layer', () => { map.getCanvas().style.cursor = ''; });
  } finally {
    hideLayerLoading();
  }
}

async function loadParksLayer() {
  showLayerLoading('Parks');
  try {
    const data = await fetchOverpassPOI(parksQuery);
    const overpassFeatures = dedupeParkFeatures((data && data.features) ? data.features : []);
    const overpassPositions = overpassFeatures
      .map((feature) => {
        const coords = feature && feature.geometry && feature.geometry.coordinates;
        if (!coords || coords.length < 2) return null;
        return { lat: Number(coords[1]), lon: Number(coords[0]) };
      })
      .filter((point) => Number.isFinite(point.lat) && Number.isFinite(point.lon));

    const supplementalFeatures = supplementalParks
      .filter((park) => {
        if (!isInsideJerseyCity(park.lon, park.lat)) return false;
        return !overpassPositions.some((op) => haversineMeters(park.lat, park.lon, op.lat, op.lon) < 150);
      })
      .map((park) => ({
        type: 'Feature',
        geometry: { type: 'Point', coordinates: [park.lon, park.lat] },
        properties: {
          name: park.name,
          type: 'park',
          source: 'JC Open Data'
        }
      }));

    const mergedData = {
      type: 'FeatureCollection',
      features: [...overpassFeatures, ...supplementalFeatures]
    };

    if (map.getSource('parks')) {
      map.getSource('parks').setData(mergedData);
      return;
    }

    map.addSource('parks', { type: 'geojson', data: mergedData });

    map.addLayer({
      id: 'parks-layer',
      type: 'circle',
      source: 'parks',
      layout: { visibility: 'none' },
      paint: {
        'circle-radius': 6,
        'circle-color': '#22c55e',
        'circle-opacity': 0.8,
        'circle-stroke-width': 1,
        'circle-stroke-color': '#0a0c10',
        'circle-emissive-strength': 1
      }
    });

    map.on('click', 'parks-layer', (e) => {
      const p = e.features[0].properties;
      const typeLabel = p.leisure === 'playground' ? 'Playground' : p.leisure === 'sports_centre' ? 'Sports Center' : 'Park';
      new mapboxgl.Popup({ closeButton: false })
        .setLngLat(e.features[0].geometry.coordinates)
        .setHTML(`
        <div style="font-family:'DM Sans',sans-serif;padding:4px">
          <div style="font-family:'Space Mono',monospace;font-size:10px;color:#22c55e;text-transform:uppercase;letter-spacing:0.1em;margin-bottom:4px">${typeLabel}</div>
          <div style="font-size:13px;font-weight:600;color:#e8eaed">${p.name || 'Unnamed'}</div>
          ${p.source ? `<div style="font-size:10px;color:#6b7280;margin-top:4px;font-family:'Space Mono',monospace;">Source: ${p.source}</div>` : ''}
        </div>
      `)
        .addTo(map);
    });
    map.on('mouseenter', 'parks-layer', () => { map.getCanvas().style.cursor = 'pointer'; });
    map.on('mouseleave', 'parks-layer', () => { map.getCanvas().style.cursor = ''; });
  } finally {
    hideLayerLoading();
  }
}

// Official JCPD district boundaries (Jersey City Open Data)
const districtBaseGeoJSON = {"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"coordinates":[[[-74.04821560509578,40.699448687079965],[-74.06007674233496,40.707794234338515],[-74.06933658370717,40.710094476934444],[-74.07060540038869,40.71040959430267],[-74.07038835390978,40.71053653655377],[-74.07016035462841,40.71068463331253],[-74.07000704122412,40.71079128173534],[-74.06990861957449,40.71087724657224],[-74.06987261208846,40.710911863980634],[-74.06979438959111,40.710987061081944],[-74.06968790666953,40.71111474599836],[-74.06950648809627,40.711322581536],[-74.06922251505465,40.711658089142226],[-74.06911206037503,40.711791716098965],[-74.06902516879623,40.71190753319593],[-74.06889076742257,40.71211252376382],[-74.06861803210822,40.71252257128288],[-74.06849153395069,40.71271570539072],[-74.06810414988647,40.71330402363021],[-74.06778385932859,40.71379725662791],[-74.067578342843,40.71410327053299],[-74.06737274567625,40.71442119729179],[-74.06735028138394,40.71446409973356],[-74.06724194244748,40.71467091556609],[-74.06717461261562,40.71478979598569],[-74.06712786418626,40.71488907268632],[-74.0671572998209,40.71508992626649],[-74.06712879467295,40.715519744288464],[-74.06712330428488,40.715676628834814],[-74.06714131628011,40.71577551743472],[-74.067196515471,40.716176112054406],[-74.06723813363035,40.71639013181344],[-74.06725817448903,40.71649317293655],[-74.06732341376834,40.716920213188864],[-74.06737644966661,40.71725988717755],[-74.06743818742456,40.717570497533416],[-74.06750089715207,40.71784800672016],[-74.06752081920673,40.71793614107179],[-74.06754949994112,40.71809793073156],[-74.06755724057902,40.71821758704971],[-74.06755210546497,40.71835333645597],[-74.06751694829812,40.718534265708776],[-74.06750047098926,40.718599508535526],[-74.06746459577545,40.71874096122361],[-74.06735199221356,40.71907035300078],[-74.06727262770193,40.71932567193604],[-74.06721746807703,40.719503094902095],[-74.06716110826625,40.719671015141074],[-74.0671223017678,40.71975816200639],[-74.06708355627265,40.71983561842966],[-74.06700208085957,40.719948461415186],[-74.06693883148832,40.72002126923385],[-74.06692930855,40.72003226884829],[-74.06684712767073,40.72010371443585],[-74.06681820946504,40.72012883374387],[-74.06672582327133,40.720208390630624],[-74.06669855304199,40.7202318438406],[-74.06658302871953,40.720354277402855],[-74.06647153503464,40.72050582216652],[-74.06636435708627,40.72065414431499],[-74.06625707890285,40.72081215663737],[-74.06617108547836,40.72097024757661],[-74.06597338697517,40.72131224739446],[-74.06588095521259,40.721472757269055],[-74.06582293407388,40.72157355611039],[-74.0657584673121,40.72168322343728],[-74.06571561960037,40.721744473891725],[-74.06576093147221,40.722198032850464],[-74.06576240197533,40.722388076107535],[-74.06578099518565,40.722658365211345],[-74.06578956757798,40.72278263611873],[-74.06579241845661,40.72299925577026],[-74.0657834550104,40.72307358501953],[-74.06577024328696,40.723141419583314],[-74.06575435192993,40.723177153901595],[-74.06574439262607,40.72319951594707],[-74.06570138664325,40.723276955827366],[-74.06536198510767,40.72384148077401],[-74.06519158987096,40.72412766467233],[-74.06487217022065,40.724664100184754],[-74.06453272825257,40.725238311758694],[-74.06448561657021,40.72532526061706],[-74.06442082822109,40.72544480773836],[-74.0642785309993,40.725764366634436],[-74.06415534641224,40.72601336910282],[-74.06390813573967,40.72651307072216],[-74.06388293056877,40.72659348572029],[-74.06384737084161,40.72670683119055],[-74.06367253412324,40.72744979317476],[-74.06363325223464,40.72760805985974],[-74.06360891636382,40.72767121258829],[-74.06357297131738,40.72772745907182],[-74.06356708519958,40.727733668245186],[-74.06291097037182,40.727279219049656],[-74.06228216536698,40.72680452989252],[-74.06199374991864,40.726613179041586],[-74.06174410112978,40.72643641312024],[-74.06166685197077,40.72636469479279],[-74.06158101817303,40.72628125079525],[-74.06155746173681,40.72625835013368],[-74.0614191137637,40.726111542089946],[-74.06116843149054,40.72584547633782],[-74.0611290921856,40.72580310880242],[-74.0610640074826,40.72573308747844],[-74.06090530612458,40.725562398015015],[-74.05755467823965,40.72432311014472],[-74.0561546020389,40.723860233119204],[-74.05372421924578,40.727217436387704],[-74.05188767408151,40.73146659909228],[-74.0511150186215,40.73205811078759],[-74.05089468960541,40.732218084072244],[-74.0506468146123,40.732395847350176],[-74.05045009415413,40.732538040793386],[-74.05037920002144,40.73260029682867],[-74.05031222276436,40.73265962889801],[-74.05023727377318,40.732739766698835],[-74.05002818248326,40.73297721792024],[-74.04953906729395,40.73350847324382],[-74.04938914705278,40.73367170979902],[-74.04922362192941,40.7338318937736],[-74.04910934228083,40.73393271021951],[-74.04903050474704,40.73402177957407],[-74.04893563897637,40.73414946335654],[-74.0487853049545,40.734384178459386],[-74.04857565135245,40.73468717639274],[-74.04834253115423,40.735001994323056],[-74.0482991034299,40.73505244302766],[-74.04825187705684,40.7350880254493],[-74.04818121995174,40.73511453927339],[-74.04800083306928,40.735155529611816],[-74.04754583227536,40.73526991592396],[-74.04688299747916,40.735428145994625],[-74.04607367105449,40.735640970221844],[-74.04588239192925,40.735691274915126],[-74.04374287503305,40.73617441331523],[-74.04278162845307,40.73628792266395],[-74.04280861776634,40.736190596695515],[-74.04282120482952,40.73595274562061],[-74.04188992720482,40.73607853651012],[-74.04047469490739,40.73628646699994],[-74.0396900252738,40.73640386823147],[-74.03960441883922,40.73640583141117],[-74.03914437090128,40.73630634173941],[-74.03878205208572,40.73627173838369],[-74.03859594371293,40.736322485832],[-74.02927276083675,40.733675520893925],[-74.0292912546533,40.733627360378044],[-74.0302066995919,40.733696855755994],[-74.0302125958823,40.73366662152164],[-74.03058866913192,40.73364146399305],[-74.03061615360926,40.733470644497935],[-74.03063884070106,40.73329437816119],[-74.03061767012362,40.7332548547191],[-74.03059283818193,40.733204334121275],[-74.03057460588853,40.73315787392758],[-74.03057361339089,40.733110475452655],[-74.03058185750324,40.73306916489551],[-74.03060203899635,40.7330268944915],[-74.03063142872152,40.732994745451876],[-74.03067143729433,40.73296062279747],[-74.03072072493818,40.73292653785479],[-74.03076117888833,40.7326403188852],[-74.03083876679267,40.732125718677054],[-74.0308151702721,40.732003285258685],[-74.03087139938745,40.73156565569825],[-74.03094886790363,40.73156365993223],[-74.03098898437278,40.73125766883805],[-74.02801090858722,40.73099490431003],[-74.02817412711951,40.730268196680164],[-74.0268507284796,40.7295002284414],[-74.02691232560137,40.729438446254576],[-74.02741959808289,40.72948579953463],[-74.0282440160632,40.72995180541342],[-74.02913236756228,40.730457525753245],[-74.02992955592879,40.73052087109568],[-74.03041090855956,40.73056160204128],[-74.03070890209494,40.730586021555006],[-74.03127345708843,40.73075315046927],[-74.03137097215034,40.7306566172681],[-74.02976937628002,40.72974478540135],[-74.02980539293495,40.729696467539256],[-74.03047711160178,40.72975495200518],[-74.03051103051753,40.729777055112535],[-74.03105438390031,40.730075387840174],[-74.03118324187554,40.730052208765706],[-74.03125111185088,40.72945373824945],[-74.02748775984284,40.72912563213476],[-74.02734539111508,40.72906616838466],[-74.02735404702356,40.72901584063344],[-74.03097018689448,40.72933305394604],[-74.03103218233507,40.72898210918643],[-74.0265548864485,40.728582293502065],[-74.02660659532863,40.7281806932114],[-74.03107669493328,40.72857064376325],[-74.03114711030034,40.72803202651748],[-74.02735407561121,40.72769522550086],[-74.02738311183884,40.72751327006096],[-74.0303538988301,40.72777080013843],[-74.03040815249108,40.7274543698377],[-74.03038845439846,40.727295964177294],[-74.03038044146386,40.72712468890084],[-74.03036530765986,40.72700939443218],[-74.03034670374701,40.72693411411048],[-74.03031381867923,40.72684907185183],[-74.03025849300586,40.72678091995281],[-74.03020140247284,40.726737020402226],[-74.03013961419636,40.72668097192139],[-74.03010164778902,40.72663836314311],[-74.03005582048364,40.72657995363507],[-74.03002434260338,40.72652160253374],[-74.03001340386304,40.726490020568555],[-74.03001047964983,40.726452406345],[-74.03001874162278,40.726411198733615],[-74.03003497542578,40.7263700235785],[-74.03006401533851,40.726321622689746],[-74.03010099291197,40.7262781060189],[-74.0301363504798,40.72623822167542],[-74.03022786897073,40.72614762081977],[-74.03028551334742,40.72611267904213],[-74.03032864639484,40.726100724774156],[-74.03039561811428,40.726099784278425],[-74.03048803994898,40.72610743811217],[-74.0306138752335,40.726124931574915],[-74.03090380220598,40.7261612865446],[-74.03114120060648,40.726185297653295],[-74.03132452693524,40.72618968108974],[-74.03144264599241,40.726170752977026],[-74.03154019986266,40.72612869469951],[-74.03162651654513,40.72609750754572],[-74.03174457584548,40.72608706972741],[-74.03187053892324,40.7260863676676],[-74.0319598911631,40.72607702618075],[-74.03201099570006,40.726065103605706],[-74.03208274195774,40.726065394466595],[-74.03214326822683,40.726074130653465],[-74.03221654091298,40.72608413144298],[-74.03227082564167,40.72607343461892],[-74.03239044520683,40.72606785437459],[-74.03244941960222,40.72607051922368],[-74.03245276112209,40.72604869915251],[-74.03303754403376,40.72610079844043],[-74.03445886177477,40.726229050337594],[-74.03453731252982,40.725724767785685],[-74.03212324335593,40.7255185054875],[-74.03216328009518,40.72526641684902],[-74.03378273823093,40.72541703265113],[-74.0337686025607,40.72552637595306],[-74.03456374326976,40.72559265973278],[-74.03461222150092,40.72527077551679],[-74.03399893935418,40.72522397403579],[-74.03383157584669,40.725202519862016],[-74.03386400717153,40.724990711244196],[-74.02944946445602,40.72460848533025],[-74.0295627067007,40.72379053797875],[-74.0340015975502,40.72415327894693],[-74.03401114075342,40.72408765188115],[-74.03392350185767,40.72406080141052],[-74.0338918723963,40.724036481108485],[-74.03388601651403,40.72400765676384],[-74.03391470259388,40.723802711617964],[-74.03384055522747,40.72379550003454],[-74.03388636161662,40.7234747579333],[-74.03396598690688,40.72347940826793],[-74.0340431828643,40.72301653479245],[-74.03400930164949,40.72297960293955],[-74.0339896294568,40.72294489285761],[-74.03398133654305,40.72291022871303],[-74.03397874836021,40.722873423182484],[-74.03398183470713,40.722838804977414],[-74.03399350076764,40.722797728159776],[-74.03400849268195,40.722768207146686],[-74.03404032171768,40.722726072503065],[-74.03408903225876,40.72268940421905],[-74.0341559208153,40.7226516572481],[-74.03423523496386,40.722134716611826],[-74.0314293233068,40.721883561243644],[-74.03141778479271,40.72182761246173],[-74.03151452080027,40.72117364386029],[-74.03135224806674,40.72116130013413],[-74.03135936855121,40.72108454174839],[-74.03134302261336,40.72091253861365],[-74.03133782221158,40.72071554138693],[-74.03135838742067,40.720598774641076],[-74.03138549931519,40.720487042334234],[-74.03144321619105,40.72035163772767],[-74.03148810681769,40.72024708118887],[-74.03165694751685,40.720261120660275],[-74.03167944859267,40.72018108606597],[-74.0323899379255,40.72023404507223],[-74.03255953779922,40.720139582493346],[-74.03209260412162,40.71968207026137],[-74.02926469554663,40.71935186181213],[-74.0293442987191,40.718916051905516],[-74.03249158989006,40.71928052419228],[-74.03253609432484,40.71905791118564],[-74.0325065168675,40.71903576517401],[-74.03248321919146,40.71900850662419],[-74.03246193558596,40.718961955352036],[-74.03246224566739,40.7189176360797],[-74.03247660833547,40.7188790925009],[-74.03250221005236,40.718845598368496],[-74.03259275315709,40.71879305143701],[-74.03287038017902,40.7173802883726],[-74.02994632551668,40.717040868306384],[-74.03001273328869,40.71670363938831],[-74.0320601238623,40.71695438617414],[-74.03217194839877,40.71637491097928],[-74.03128401087754,40.71626792010058],[-74.0313485826519,40.71596871100184],[-74.0313793648619,40.715810781681725],[-74.03140624014365,40.71576454403447],[-74.03144233611258,40.715739734614566],[-74.03148776109208,40.71572090493732],[-74.03153310274746,40.715713958685484],[-74.03158150965375,40.715715343501174],[-74.03162517291914,40.71572502769645],[-74.03166874459522,40.7157477836633],[-74.03169980538213,40.71577286561615],[-74.03171992537928,40.71579909155637],[-74.03173063305364,40.71583122120248],[-74.03172395293686,40.715892989766],[-74.03167396368639,40.716117390426554],[-74.0316987441703,40.71614720041095],[-74.03262104857642,40.716253138873476],[-74.03266396492285,40.71614635860065],[-74.03278836842208,40.715553861482626],[-74.03279956670377,40.715515878703016],[-74.03281536723222,40.71548979833043],[-74.0328420669557,40.71546851557694],[-74.03287652570602,40.71545439448451],[-74.03293277455747,40.71545105695354],[-74.033164218295,40.714290947518066],[-74.03311586218881,40.71428243330192],[-74.03314700230214,40.714148080019484],[-74.0330266942007,40.71413233374408],[-74.0329967320202,40.71411791557799],[-74.0329743053482,40.71410066849969],[-74.03296324186948,40.7140706001301],[-74.03298483857071,40.71393772580515],[-74.03300779114247,40.713815059542334],[-74.03182588576925,40.713696932917344],[-74.03183950229011,40.713607580528766],[-74.03191986087775,40.713616019923194],[-74.03194513712428,40.71349459827141],[-74.03186630504938,40.713482841042435],[-74.03189652172136,40.71331329442658],[-74.03211850133904,40.71334207342227],[-74.03208254893171,40.71351241892187],[-74.0320039212139,40.713503878285174],[-74.03197655179187,40.71362350548911],[-74.032597641262,40.71368882133237],[-74.03261985559271,40.71356439601987],[-74.03294212334276,40.71359728539787],[-74.03291642853631,40.71371947999332],[-74.03302088854952,40.71372734894755],[-74.03311814823982,40.713182084334555],[-74.03310893441943,40.71315270347465],[-74.03309167760163,40.71310313207879],[-74.03309731561217,40.71306297123174],[-74.03311221892757,40.7130112004232],[-74.03317574873239,40.71290080671774],[-74.03323563457671,40.71257366328345],[-74.03340534404018,40.71259445443218],[-74.03348655844513,40.712268527152084],[-74.03346134623361,40.71220091013059],[-74.03338982216766,40.71216069973759],[-74.03341396040115,40.71207382494853],[-74.03352254869469,40.71192845719964],[-74.03364519474806,40.71175508069593],[-74.03368208949443,40.71163566499658],[-74.03482790940804,40.71178024406849],[-74.03476864401968,40.71208440849864],[-74.03545373438553,40.71217848963951],[-74.03572264056734,40.71208448891362],[-74.0359298690956,40.71212283180755],[-74.03593981680523,40.712176083133095],[-74.03632932145867,40.71221428560041],[-74.03653951320192,40.712217595168966],[-74.03696438604466,40.71227254888635],[-74.03744827215822,40.71235640990263],[-74.03791081079376,40.71241300112991],[-74.03795439326916,40.712450347681745],[-74.03812517638457,40.71246729074181],[-74.03819847902338,40.71207064161866],[-74.03515160443328,40.71170205578511],[-74.03510646343359,40.71161380881466],[-74.03513138375396,40.71151355581752],[-74.03515065065004,40.71145219257368],[-74.03519670303395,40.71140936942828],[-74.03533206880766,40.711295224837535],[-74.03557678386608,40.7113248820069],[-74.03576820444319,40.711356447907875],[-74.03595796272774,40.71146977685236],[-74.03625361590015,40.711528309726596],[-74.03646327333122,40.711568064313994],[-74.03671341525256,40.71159159678254],[-74.03686161132657,40.71156761510944],[-74.03706615598949,40.71156843556331],[-74.03721980553824,40.71153423516074],[-74.03737641561868,40.711461133890374],[-74.03753312454425,40.711373696607545],[-74.0377250616003,40.71125158371387],[-74.03780087297115,40.71118635038552],[-74.03786853931989,40.711131324539345],[-74.03792256472236,40.71110286841461],[-74.03800068490263,40.71109294094878],[-74.03825415360588,40.71102432213542],[-74.03869036526294,40.7109953457095],[-74.03951342607927,40.7110703128341],[-74.03954151060569,40.71090043853415],[-74.04016542511994,40.710972558459986],[-74.04016236745821,40.71102579500957],[-74.04143743837604,40.711123028353015],[-74.04142511336538,40.71135031050341],[-74.04115875208632,40.71133696391588],[-74.04108062375774,40.71174011484291],[-74.04108786832884,40.71186097728389],[-74.04105022338031,40.71199161524228],[-74.04118628297863,40.71203135478396],[-74.04115614337205,40.71210906004172],[-74.0410243348587,40.712081454970345],[-74.0410025128655,40.71215718261813],[-74.04101004832586,40.71221907274277],[-74.04103644205932,40.712294954706294],[-74.04125274404092,40.71237915032403],[-74.04149048924762,40.71241349661517],[-74.0416850714185,40.71229753174184],[-74.04173785098367,40.71205812203604],[-74.04195809658412,40.71212453303951],[-74.04184415543622,40.712648375953805],[-74.0417606327128,40.7130535538712],[-74.04199991816698,40.71309136798373],[-74.0420160919715,40.71348055734391],[-74.0429975353216,40.713621664772155],[-74.04311382462667,40.71314698274902],[-74.04305671557293,40.71314712169916],[-74.04309130964354,40.7128970342847],[-74.04313541815283,40.71289968179013],[-74.04327637968233,40.71220348528718],[-74.04330663593471,40.71220983368919],[-74.04332537067906,40.71212380602401],[-74.04290820339803,40.712122154946066],[-74.04259084224546,40.712088129430036],[-74.0423484348159,40.71172057168255],[-74.0422609224807,40.71126925379116],[-74.04247770671009,40.71128821688428],[-74.0434676818215,40.71138503084108],[-74.04349498717504,40.71132779403849],[-74.04374782218588,40.71135132191661],[-74.04375298126513,40.71138411075619],[-74.04490131891178,40.71151766939542],[-74.04489546205964,40.71158727925953],[-74.04543351542961,40.7116221676828],[-74.04563787952806,40.71164959660178],[-74.0459499270172,40.711673352702],[-74.04618662983738,40.71169476375828],[-74.046490631376,40.71171439071028],[-74.0467542484006,40.71173590633473],[-74.04699082679578,40.71177574750647],[-74.04717374414987,40.71179080137403],[-74.04738616981133,40.711820306849525],[-74.0478459267036,40.71189174152178],[-74.04820105233048,40.71191361223303],[-74.04854175087563,40.7119331403272],[-74.04883468980174,40.71194638501533],[-74.04943628873092,40.711975695956774],[-74.04958166832472,40.711999428200336],[-74.04979727265749,40.712027925078125],[-74.05016966760289,40.712048390184016],[-74.05019267321246,40.7120052675953],[-74.05032210108193,40.71201268579985],[-74.0506330615368,40.71204846648607],[-74.05096900864831,40.712084343530954],[-74.05118238880983,40.71210591521339],[-74.0511775788987,40.71214565176713],[-74.05120475548551,40.712157856851796],[-74.05134507712737,40.71223445583418],[-74.05131977748391,40.712281026713924],[-74.05137190574364,40.71229851420578],[-74.05141084589276,40.712250267832864],[-74.0514790369593,40.71224361884475],[-74.05179471597029,40.71225348739632],[-74.05209443674129,40.71227193561341],[-74.0522374827204,40.712281132998534],[-74.05232604769279,40.71228493347101],[-74.05240997709916,40.712302543816655],[-74.05255289591268,40.71233075370037],[-74.05268655536622,40.7123848548679],[-74.0527703462134,40.71242320628617],[-74.05286091695886,40.71246676937302],[-74.05290225542296,40.71250247027531],[-74.05296498965133,40.71252939805798],[-74.05299718354982,40.712555077424994],[-74.05302474448582,40.71256500157241],[-74.05308183806338,40.71258197530049],[-74.05312086705811,40.71259959961565],[-74.0531869957319,40.712620139010376],[-74.05331163957317,40.712663833621214],[-74.05341819237603,40.71269535868712],[-74.05354475011377,40.712792643616055],[-74.0536184426473,40.71264255003509],[-74.05357539953302,40.71262509869245],[-74.0535142652482,40.71259547793791],[-74.05347812906946,40.71256422535893],[-74.05340064820274,40.71253062433322],[-74.05333551257625,40.71249318789678],[-74.05317556965792,40.71242972200134],[-74.05305748084945,40.712385795738214],[-74.05299853982434,40.71234838309472],[-74.05287651094905,40.71227616027678],[-74.05280459146725,40.71222403298328],[-74.05268372434512,40.712129027474866],[-74.05262257934262,40.712101134694485],[-74.05255662530215,40.71211297849771],[-74.05249536464666,40.712102370095565],[-74.05244549615121,40.712086620360914],[-74.05234560874347,40.71207759060564],[-74.05225481887445,40.71206686756131],[-74.05223205772775,40.712073693233606],[-74.0522091923608,40.71209607490158],[-74.05218629223802,40.71212364189821],[-74.05213844049516,40.71214592662061],[-74.05206344671586,40.71215082111258],[-74.051995383235,40.71213845755843],[-74.05191134986107,40.71213640291206],[-74.05184565062018,40.71211022053198],[-74.05178226927674,40.71207713315677],[-74.05174405976467,40.712016487664],[-74.0517262472661,40.711962835323924],[-74.05169252285998,40.71191084967679],[-74.05161889640313,40.712050571362774],[-74.05152817627524,40.71202947708183],[-74.05147135443958,40.71203444178527],[-74.05138529335122,40.71199608060054],[-74.05139041634449,40.71190967604004],[-74.05132505399908,40.711833368479326],[-74.05123457795698,40.71177597663799],[-74.05113952430754,40.71172375239457],[-74.05106228374675,40.71169939702863],[-74.0510352644101,40.711696139562015],[-74.05098102203604,40.711690884771656],[-74.05094084590459,40.71168433365272],[-74.05086320321529,40.711660253599796],[-74.05071710615124,40.7115958267617],[-74.0506500452466,40.711566023386716],[-74.05061843473521,40.711548697318364],[-74.05061338700975,40.71154444446488],[-74.05060857933209,40.71153352750182],[-74.05060964150657,40.71152074195824],[-74.050622299609,40.71149656289959],[-74.05065425581945,40.711462461393694],[-74.05067261649121,40.71144677093353],[-74.0507049705414,40.71142609111758],[-74.05079968020962,40.7113799845254],[-74.05084822799407,40.71136098890874],[-74.05092509847081,40.71134012195577],[-74.05103886873651,40.711319398467346],[-74.0511089556413,40.71130562039371],[-74.05113713027848,40.7112967231333],[-74.05115456021272,40.71128877483886],[-74.05118622647512,40.71126872269001],[-74.05120884370913,40.711210660520315],[-74.0512183008769,40.71115538561901],[-74.05121871864783,40.71109316161647],[-74.05121683015565,40.71103611411633],[-74.0489948326146,40.71076818096353],[-74.04853486310589,40.71059871950258],[-74.04319381876752,40.7099892510755],[-74.03973034698593,40.70961441319984],[-74.03955164227216,40.71035550763149],[-74.03932149089977,40.71032945817702],[-74.03930660137671,40.71028507397481],[-74.03925863001872,40.710263683711744],[-74.03918277465597,40.71024603645141],[-74.03907651609022,40.71023019491609],[-74.0389600744265,40.71022202127206],[-74.0388664518417,40.71021008433729],[-74.03876541796676,40.71017113741265],[-74.03866942259525,40.71013606486404],[-74.03861650627962,40.710097310091896],[-74.03858907454851,40.71003553118649],[-74.03859199279867,40.70997965507996],[-74.03861009264938,40.70992576681651],[-74.03862813926655,40.70987958699519],[-74.03861091734314,40.709806285910155],[-74.03856593132548,40.709719383693766],[-74.0385209188158,40.70963633568216],[-74.03850592354024,40.70960736826667],[-74.03848331755825,40.7095802975869],[-74.03842519047441,40.709562720703055],[-74.03833403483517,40.709560429023696],[-74.03824028017206,40.709567762699436],[-74.03817448918377,40.70955979085651],[-74.03812894465861,40.70955382714839],[-74.0380905771823,40.709527167997074],[-74.0380585149103,40.70948416741082],[-74.03799052453935,40.709428007545284],[-74.03792244103468,40.70938533741941],[-74.0378416153652,40.70935417922912],[-74.03530952557941,40.7090491388998],[-74.03490536670877,40.70916095285068],[-74.03471840713232,40.7091376626693],[-74.03459254653072,40.708982599879945],[-74.03439003150785,40.70889806571083],[-74.03428100717201,40.70875595010303],[-74.03402771894208,40.70867121045078],[-74.0341309728807,40.7084269143958],[-74.03436809812894,40.708402111852706],[-74.03451147694733,40.70765829838969],[-74.03331746453884,40.70755518888074],[-74.03331791480863,40.7074906887194],[-74.03412868539104,40.707564608541055],[-74.03415785868059,40.70743265077997],[-74.03397258208973,40.707376615561316],[-74.03350879187333,40.707322526439974],[-74.03350904906294,40.70728566920255],[-74.03399312669862,40.70732448260473],[-74.03418293152578,40.7073098910318],[-74.03419984644302,40.707199384451435],[-74.03399849023928,40.70713406982149],[-74.03343386327211,40.707070358735955],[-74.03343412050074,40.70703350149729],[-74.03399878997682,40.70709106970655],[-74.03423702744637,40.70707667354178],[-74.03425806390509,40.7069538974839],[-74.0336290749078,40.7068592124357],[-74.03362525308016,40.706828481762614],[-74.0342426256486,40.706852474927885],[-74.03428401363401,40.706705208781486],[-74.03346138081405,40.706597455357674],[-74.03346571696831,40.706554471553375],[-74.03470387353573,40.706691544215346],[-74.03488001347864,40.70574008167325],[-74.03511798967018,40.70576254091505],[-74.03517069296616,40.705728966374814],[-74.03523546158372,40.705701583433736],[-74.03588880751194,40.705774856992456],[-74.03859507744257,40.70606214250425],[-74.03866030383037,40.70607427075497],[-74.03883972071807,40.705980198634705],[-74.03945993647763,40.70571758476051],[-74.04047695900141,40.70523613594754],[-74.04134552818991,40.704796143216356],[-74.04132893658142,40.704684707916186],[-74.04196162728049,40.704287162359535],[-74.04288115969959,40.70374790645122],[-74.04462444713741,40.7026029739444],[-74.04526950955737,40.70211100088104],[-74.04645854533726,40.70115121889243],[-74.04753088573834,40.70013567963871],[-74.04821560509578,40.699448687079965]],[[-74.0395691343625,40.70577461255052],[-74.03881794152554,40.70610358187357],[-74.03925097651218,40.70618409906551],[-74.0397839715415,40.706251434516425],[-74.04020007371871,40.70626512386522],[-74.04123250511583,40.7063859493167],[-74.0428676182641,40.70631871915788],[-74.04299300932391,40.70627928580739],[-74.04309387149888,40.7062282204849],[-74.04318379575174,40.70612032166939],[-74.04323450501859,40.70598197270037],[-74.04322481002217,40.70577101766589],[-74.04314652053033,40.70566866006705],[-74.04298120578277,40.705551068475266],[-74.04272071824174,40.70537210783048],[-74.04239209833226,40.705178279125754],[-74.04183513762887,40.704917914243],[-74.04147022219935,40.70487037691904],[-74.04143423278606,40.70485500572491],[-74.04095141013063,40.70510994643052],[-74.0395691343625,40.70577461255052]],[[-74.03073635051615,40.73348129091245],[-74.03069752671979,40.73374020315028],[-74.03704794452867,40.734300847114476],[-74.03709073197379,40.734043945918835],[-74.03073635051615,40.73348129091245]]],"type":"Polygon"},"properties":{"geo_point_2d":{"lon":-74.04786388403899,"lat":40.718909621401245},"id":"0","name":"East"}},{"type":"Feature","geometry":{"coordinates":[[[-74.10167077169184,40.71803130414203],[-74.0907423385083,40.7153880694123],[-74.08527114922941,40.714050684378115],[-74.07915089194411,40.71253147234255],[-74.06933658370717,40.710094476934444],[-74.06007674233496,40.707794234338515],[-74.04821560509578,40.699448687079965],[-74.0491196334477,40.69854162931753],[-74.0498923931404,40.69765390137299],[-74.05046598904936,40.69697425676704],[-74.05113929524879,40.69613911585829],[-74.0512880242345,40.69595463525148],[-74.05140079013438,40.695988860318515],[-74.05188158131855,40.69539042640767],[-74.05309047468845,40.69368304540391],[-74.05419288342267,40.69192802638717],[-74.05429845394818,40.69172658221642],[-74.05422064177128,40.69162148030222],[-74.05487876423382,40.690619240662805],[-74.05780160135328,40.691928855889586],[-74.05750447050107,40.69278895637314],[-74.05843555359176,40.69328186154155],[-74.05879246101611,40.692454609869124],[-74.05899732007894,40.69258588333512],[-74.05866582840603,40.693458904540435],[-74.05947940136465,40.69392369045616],[-74.05984802078684,40.69303854879206],[-74.06002565519384,40.69312642730095],[-74.05966308334797,40.694060037808434],[-74.06035434843392,40.69444054502956],[-74.06075478231865,40.69355552168671],[-74.06136353032257,40.69390179726272],[-74.06095549737597,40.69497573011144],[-74.06330701297149,40.69631209847928],[-74.0638462062279,40.69661619437986],[-74.06387680239023,40.69660574851232],[-74.06481976711972,40.697128930421044],[-74.06488387226347,40.6970869262351],[-74.0649617435356,40.697061872214675],[-74.06503949110846,40.697055828292044],[-74.06511155085796,40.69707088579866],[-74.06516965209642,40.69709856443083],[-74.06521934529984,40.69713888511311],[-74.06524683670662,40.697179122167796],[-74.06525468181073,40.69725308188494],[-74.06524605401216,40.69729951978908],[-74.06521801326095,40.69734377229239],[-74.06519564655231,40.69736903554303],[-74.06521056766981,40.69763524035264],[-74.06535409820997,40.6977561813807],[-74.06575773574365,40.69799638915733],[-74.06597647454956,40.69807536646392],[-74.06611229830334,40.6981012245018],[-74.06660077040299,40.69681456201591],[-74.06707285871296,40.69634106783925],[-74.06794388028673,40.69683438239912],[-74.06800221445769,40.69682615153387],[-74.06807154035056,40.696834860091116],[-74.06814340960443,40.69687948706681],[-74.06822944144655,40.696879808856785],[-74.06827409042079,40.69684195459769],[-74.06833824766944,40.696791499519044],[-74.06843871433406,40.69670527119356],[-74.06862564823315,40.69655177258658],[-74.06888510413528,40.69634151265208],[-74.06910529747292,40.696194474325466],[-74.06921155753147,40.69607024569627],[-74.0693399234422,40.69596088547],[-74.06945452182345,40.69583457542423],[-74.06957739091273,40.695716745262835],[-74.06967541896344,40.695577699462376],[-74.06979035572864,40.69539858304607],[-74.07000817621838,40.69518816537575],[-74.07027395416779,40.694835998976814],[-74.07034027150011,40.69476108106967],[-74.07035135119925,40.69474441902892],[-74.07036243089274,40.694727756987085],[-74.07036253818927,40.69471105411124],[-74.07037361787445,40.69469439206831],[-74.07038469755413,40.694677730024154],[-74.07039577722821,40.69466106797883],[-74.07040685689671,40.69464440593235],[-74.07041793655964,40.69462774388479],[-74.07041804384194,40.694611041008464],[-74.07042912349654,40.69459437895969],[-74.07046225515607,40.69456109568307],[-74.07047333479133,40.694544433629765],[-74.07048441442107,40.69452777157537],[-74.07049549404522,40.69451110951973],[-74.07051754601989,40.6944944882821],[-74.07052862563023,40.69447782622322],[-74.07053970523505,40.694461164163066],[-74.07055078483427,40.69444450210191],[-74.07056186442793,40.69442784003955],[-74.07057294401613,40.69441117797618],[-74.0705730512589,40.69439447509895],[-74.07058413083867,40.6943778130342],[-74.07059521041288,40.69436115096841],[-74.07059531764989,40.69434444809107],[-74.07060639721571,40.69432778602397],[-74.0706065044498,40.69431108314643],[-74.07061758400725,40.69429442107821],[-74.07061769123843,40.69427771820065],[-74.07061779846953,40.694261015322944],[-74.07061806654684,40.69421925812852],[-74.07061817377762,40.69420255525055],[-74.07061828100831,40.69418585237272],[-74.0706183882389,40.69416914949474],[-74.0706184954694,40.694152446616755],[-74.07061860269981,40.69413574373862],[-74.07061870993013,40.6941190408605],[-74.07061881716037,40.69410233798241],[-74.0706189243905,40.6940856351042],[-74.07061903162057,40.69406893222597],[-74.07060816656681,40.694052188538684],[-74.07060827379944,40.694035485660336],[-74.07058643647557,40.694018701160935],[-74.07057557143804,40.69400195747044],[-74.07056470640586,40.693985213779],[-74.07055384137918,40.69396847008647],[-74.0705319504651,40.693960037016],[-74.07053205771639,40.69394333413755],[-74.07052119270459,40.69392659044195],[-74.07049935543807,40.693909805926076],[-74.07048849043986,40.69389306222732],[-74.07047762544703,40.69387631852753],[-74.07045578820775,40.69385953400348],[-74.07044492322855,40.69384279030062],[-74.07043405825475,40.69382604659671],[-74.07041216740247,40.69381761350359],[-74.07040130244094,40.69380086979655],[-74.07037946524535,40.69378408525801],[-74.07035752076663,40.693784003593876],[-74.07033562993776,40.6937755704862],[-74.07031368546195,40.69377548881376],[-74.07029174098616,40.69377540713713],[-74.07026979651046,40.693775325456336],[-74.07024785203492,40.69377524377137],[-74.07022590755948,40.69377516208224],[-74.07020390941773,40.69378343182815],[-74.07018191127064,40.693791701569594],[-74.07015991311812,40.69379997130702],[-74.07013791496027,40.693808241040045],[-74.07011591679694,40.693816510769025],[-74.070093864948,40.693833131932486],[-74.07007186677114,40.69384140165295],[-74.0700498685888,40.69384967136899],[-74.07002792408947,40.69384958964209],[-74.07000597959016,40.69384950791103],[-74.06998398139719,40.69385777761465],[-74.06996198319872,40.693866047313854],[-74.06994003869427,40.69386596557023],[-74.06989604227581,40.69388250494783],[-74.06987404405842,40.693890774630155],[-74.06985209954617,40.69389069286978],[-74.0698301013207,40.693898962543855],[-74.06980810308994,40.693907232213526],[-74.0697861048537,40.69391550187911],[-74.06976410661206,40.69392377154032],[-74.06974210836496,40.69393204119742],[-74.06972005638553,40.6939486622886],[-74.0696980581249,40.69395693193707],[-74.06968697839572,40.69397359391724],[-74.06966498012285,40.69398186355933],[-74.06965390038127,40.69399852553609],[-74.06964282063421,40.6940151875118],[-74.06963174088158,40.69403184948632],[-74.06960974258276,40.69404011911766],[-74.06960963510078,40.69405682199387],[-74.06960952761868,40.69407352486988],[-74.06960942013652,40.69409022774588],[-74.06960931265425,40.694106930621935],[-74.0696092051719,40.69412363349788],[-74.06960909768945,40.69414033637374],[-74.06960899020693,40.69415703924953],[-74.0696088827243,40.694173742125294],[-74.06963077359013,40.694182175370344],[-74.06963066611286,40.69419887824603],[-74.06964153094462,40.694215622023876],[-74.06966336809374,40.694232406700515],[-74.0696742329391,40.694249150475066],[-74.06969612383793,40.694257583707795],[-74.06971801474229,40.69426601693622],[-74.06972887960669,40.69428276070573],[-74.06975077052353,40.69429119392803],[-74.06976163540021,40.69430793769442],[-74.06977250028235,40.69432468145979],[-74.0697943912184,40.69433311467386],[-74.0697942837814,40.69434981754955],[-74.06979417634432,40.69436652042528],[-74.06978309657029,40.694383182413105],[-74.06976109817394,40.69439145207241],[-74.06973909977216,40.69439972172737],[-74.0697280199789,40.69441638370982],[-74.0697060752946,40.69441630192082],[-74.0696841306103,40.69441622012765],[-74.0696622396613,40.69440778689279],[-74.06964029497993,40.6944077050913],[-74.06961835029873,40.69440762328564],[-74.06960727047415,40.69442428525621],[-74.0696071629901,40.69444098813124],[-74.0696291076822,40.69444106993908],[-74.06965099863787,40.69444950318037],[-74.06966186351494,40.69446624695568],[-74.0696727283974,40.69448299072988],[-74.0696835932852,40.694499734503154],[-74.0696615411029,40.69451635558051],[-74.06963959638591,40.69451627377871],[-74.0696175979282,40.694524543410175],[-74.06959559946503,40.69453281303729],[-74.06957354724999,40.69454943409752],[-74.06955154877316,40.6945577037163],[-74.06955144127468,40.694574406590704],[-74.06954036140553,40.69459106855425],[-74.06954025390411,40.6946077714286],[-74.06954014640262,40.69462447430301],[-74.06954003890104,40.69464117717726],[-74.06952895901789,40.69465783913947],[-74.06952885151338,40.69467454201365],[-74.06951777162179,40.694691203974585],[-74.06950435089784,40.69472820385205],[-74.06948437063981,40.694766244161286],[-74.0694732907218,40.69478290611757],[-74.06946221079819,40.694799568072725],[-74.06944021222535,40.69480783766944],[-74.0694291322894,40.6948244996213],[-74.06940707993641,40.69484112064814],[-74.06939599998664,40.69485778259661],[-74.06938492003137,40.694874444544],[-74.06936286765087,40.69489106556227],[-74.06935178768174,40.694907727506305],[-74.06934070770708,40.694924389449156],[-74.06931865529913,40.694941010458614],[-74.06929660288026,40.69495763146378],[-74.06928552288348,40.694974293401096],[-74.06926352423137,40.6949825629634],[-74.06924152557391,40.69499083252141],[-74.06921947311942,40.69500745351149],[-74.0691974744483,40.69501572306115],[-74.0691754757718,40.69502399260648],[-74.06915347708993,40.69503226214753],[-74.06913142459993,40.695048883120506],[-74.06910947970978,40.69504880121707],[-74.0690874272035,40.695065422181486],[-74.06902148488466,40.69508187930537],[-74.06899948616483,40.69509014881692],[-74.06897748743965,40.6950984183241],[-74.06895548870902,40.695106687827234],[-74.06893348997293,40.69511495732602],[-74.0689114912315,40.69512322682051],[-74.06888949248463,40.69513149631094],[-74.06886754756808,40.69513141436138],[-74.06884554881309,40.69513968384321],[-74.0688235500528,40.69514795332094],[-74.06880160513103,40.69514787135881],[-74.06877960636261,40.695156140828],[-74.06875766143823,40.6951560588575],[-74.0687356626618,40.69516432831831],[-74.06871371773485,40.69516424633946],[-74.06869171895036,40.69517251579194],[-74.06866972016037,40.69518078524004],[-74.06864777522833,40.695180703248624],[-74.06862577643032,40.69518897268846],[-74.06860377762689,40.695197242123896],[-74.06858183268953,40.69519716011992],[-74.06855983387808,40.69520542954699],[-74.06853783506119,40.695213698969916],[-74.06851589011869,40.69521361695337],[-74.06849389129367,40.69522188636781],[-74.06844994751562,40.69523007374884],[-74.06842794867718,40.69523834315064],[-74.06840600372686,40.69523826111317],[-74.06838400488034,40.695246530506445],[-74.06836205992758,40.69524644846061],[-74.06834011497479,40.6952463664106],[-74.06831817002215,40.69524628435642],[-74.06829617116225,40.69525455373293],[-74.06827422620707,40.69525447167038],[-74.0682522273391,40.695262741038576],[-74.06823028238138,40.695262658967664],[-74.06820833742363,40.695262576892574],[-74.06818633854503,40.69527084624798],[-74.06814244862464,40.69527068207691],[-74.06812050366453,40.695270599985115],[-74.06809855870459,40.69527051788915],[-74.06806564126475,40.695270394737385],[-74.06804364236616,40.69527866406564],[-74.06802169740372,40.69527858195505],[-74.06799975244145,40.69527849984029],[-74.06797780747917,40.69527841772136],[-74.06795586251707,40.69527833559826],[-74.06793397150757,40.695269902036465],[-74.06791202654843,40.69526981990505],[-74.06787916306911,40.69526134526577],[-74.06785721811288,40.69526126312395],[-74.0678352731567,40.69526118097796],[-74.0678133821683,40.69525274739336],[-74.06780251762952,40.69523600344813],[-74.06778057268176,40.69523592129178],[-74.06775868170853,40.69522748769691],[-74.06773679074088,40.69521905409801],[-74.06771484579893,40.695218971929194],[-74.06769290085701,40.69521888975621],[-74.06767095591522,40.69521880757905],[-74.06763793052392,40.69523538717384],[-74.0676158775924,40.695252007854386],[-74.06760479712894,40.695268669627204],[-74.0675937166599,40.69528533139888],[-74.06758263618536,40.695301993169466],[-74.06757155570516,40.695318654938816],[-74.06756047521951,40.69533531670706],[-74.0675384222358,40.69535193737226],[-74.06752734173631,40.695368599137254],[-74.06750528873329,40.695385219795966],[-74.06749420822004,40.695401881557444],[-74.06747215519776,40.695418502209705],[-74.06746107467069,40.69543516396798],[-74.06743907564397,40.69544343317998],[-74.06741707661175,40.695451702387906],[-74.06739502355404,40.695468323025075],[-74.06737307853129,40.69546824079087],[-74.0673510794829,40.69547650998595],[-74.06731816194493,40.69547638662055],[-74.0672962169198,40.69547630437174],[-74.0672742718947,40.69547622211875],[-74.06725238090777,40.69546778842826],[-74.06724151647539,40.69545104443134],[-74.0672195714588,40.695450962167996],[-74.06720870703744,40.695434218167954],[-74.06718676202641,40.6954341358984],[-74.06717589761595,40.69541739189521],[-74.06715400666073,40.69540895818615],[-74.06713211571112,40.69540052447278],[-74.06711022476706,40.695392090755455],[-74.06708838788686,40.69537530560047],[-74.06706649695653,40.69536687187492],[-74.06704460603181,40.69535843814507],[-74.06701185075694,40.69533326039265],[-74.06698995985016,40.695324826652445],[-74.06696812302211,40.69530804147484],[-74.06694623212921,40.695299607726575],[-74.06693536780074,40.695282863700776],[-74.0669134769201,40.69527442994628],[-74.06689158604514,40.695265996187494],[-74.06686974926102,40.695249210991335],[-74.0668478583999,40.69524077722439],[-74.06682596754418,40.69523234345337],[-74.0668151032567,40.69521559941637],[-74.06679321241344,40.695207165639076],[-74.0667713756733,40.69519038042432],[-74.06674948484392,40.695181946638854],[-74.06670575730733,40.69515672762201],[-74.06668386649726,40.6951482938241],[-74.06666197569277,40.6951398600221],[-74.06664008489375,40.69513142621585],[-74.06662922066911,40.695114682161346],[-74.0666073840004,40.695097896915826],[-74.06658549322216,40.695089463099215],[-74.0665308474916,40.695055851390045],[-74.06650901086684,40.695039066125894],[-74.06648712012034,40.69503063229089],[-74.06647625595029,40.69501388822197],[-74.06645436521607,40.69500545438071],[-74.06643252862703,40.69498866910209],[-74.06641063790664,40.694980235252515],[-74.06639977376392,40.69496349117647],[-74.06637788305596,40.6949550573207],[-74.06635599235354,40.69494662346092],[-74.06634512822991,40.694929879379664],[-74.06632323753985,40.694921445513614],[-74.06630140101119,40.694904660210206],[-74.06627951033495,40.69489622633602],[-74.06625761966431,40.69488779245751],[-74.06623578316307,40.694871007141856],[-74.06621389250627,40.69486257325511],[-74.06619200185496,40.69485413936436],[-74.0661701112092,40.694845705469305],[-74.06615924714848,40.69482896137063],[-74.0661373565151,40.69482052746946],[-74.06611546588735,40.694812093564295],[-74.06609357526507,40.6948036596548],[-74.06607168464843,40.69479522574133],[-74.06603893001618,40.69477004771356],[-74.06601703941742,40.694761613789765],[-74.06599514882419,40.69475317986172],[-74.06597325823658,40.694744745929654],[-74.06596239424142,40.69472800181239],[-74.06594044946574,40.69472791930711],[-74.06591855889327,40.69471948536472],[-74.0658966683264,40.694711051418025],[-74.06587477776513,40.694702617467364],[-74.06585288720933,40.694694183512404],[-74.06583099665912,40.69468574955341],[-74.06580910611437,40.69467731559035],[-74.06578721557531,40.694668881623016],[-74.06576532504171,40.694660447651685],[-74.0657434345137,40.69465201367605],[-74.06572148976353,40.69465193112927],[-74.06569959924391,40.69464349714552],[-74.06567770872977,40.69463506315757],[-74.06565581822127,40.69462662916542],[-74.06561203722079,40.69460976116885],[-74.065018230902,40.69426645184853],[-74.06456202804806,40.69402815484273],[-74.06430302882181,40.69388092992942],[-74.06401591541258,40.69371209124164],[-74.0637007444282,40.69351303597248],[-74.06327277866318,40.69327914196777],[-74.06284478778541,40.69304954768123],[-74.06253510565233,40.69287631843093],[-74.0622479447335,40.692716077959226],[-74.06202272089602,40.692590482999144],[-74.0618762737336,40.69251680344259],[-74.06183666038899,40.69252525591663],[-74.06179713157299,40.69252080448169],[-74.06180860264361,40.69249503958826],[-74.0618482441499,40.69248228582522],[-74.06188212195052,40.692486715797905],[-74.06200048304045,40.69253448036366],[-74.06215817608016,40.692616805223956],[-74.06246214873607,40.69279861666258],[-74.0627100063599,40.69291999509049],[-74.06298578286187,40.69309309553183],[-74.06316043160302,40.69317548320029],[-74.06334629865886,40.69327081724962],[-74.06357141501904,40.69341361483266],[-74.06390359451812,40.693604131896684],[-74.06417375386069,40.6937729068647],[-74.06444397058985,40.69393307860462],[-74.06469180803884,40.69405875409274],[-74.06492840009759,40.694175783860224],[-74.06505219373913,40.69425797699828],[-74.06523803855303,40.69435760931225],[-74.06539003283086,40.694448511090876],[-74.06557596249517,40.69453523896556],[-74.06563809745316,40.69453977416245],[-74.06567841375785,40.69452649452911],[-74.06570041269676,40.69451822565076],[-74.0657223574029,40.69451830820131],[-74.06574441055828,40.694501687881456],[-74.06576635525913,40.69450177042362],[-74.06578835417915,40.69449350152839],[-74.06581029887741,40.694493584062194],[-74.06583229778938,40.69448531515856],[-74.06585424248514,40.69448539768399],[-74.06587618718103,40.69448548020526],[-74.06589818608218,40.694477211289076],[-74.0659531562124,40.694460714696675],[-74.06597515509606,40.6944524457656],[-74.06599715397425,40.694444176830245],[-74.06600823469846,40.69442751521074],[-74.0660302335645,40.694419246269135],[-74.06604131427635,40.69440258464622],[-74.06606331313004,40.69439431569821],[-74.0660743938295,40.69437765407205],[-74.06607450219555,40.694360951204565],[-74.06609650103144,40.69435268225012],[-74.06610758171568,40.6943360206205],[-74.06611866239433,40.694319358989816],[-74.0661406612111,40.6943110900267],[-74.06615174187743,40.6942944283927],[-74.0661737406819,40.694286159423285],[-74.06618482133578,40.69426949778592],[-74.06620682012813,40.69426122881006],[-74.066228818915,40.69425295982981],[-74.0662508176965,40.694244690845494],[-74.06627287063047,40.69422807042277],[-74.0663278404645,40.69421157364959],[-74.06634983922027,40.69420330464626],[-74.06637183797055,40.69419503563853],[-74.06639383671553,40.69418676662656],[-74.06641578131493,40.69418684904476],[-74.06644875235021,40.694178621229874],[-74.06647075108033,40.694170352203265],[-74.06649269567467,40.694170434606825],[-74.06651469439666,40.69416216557164],[-74.06653669311329,40.694153896532384],[-74.06655869182453,40.69414562748877],[-74.06658063641102,40.69414570987557],[-74.06660263511415,40.69413744082366],[-74.06662463381194,40.694129171767415],[-74.06664663250426,40.694120902706906],[-74.06666868529955,40.69410428220748],[-74.06669068397828,40.6940960131386],[-74.06671268265161,40.694087744065406],[-74.06672376313838,40.69407108237497],[-74.0667457617995,40.69406281329534],[-74.06676781455103,40.69404619277666],[-74.06678986729153,40.69402957225351],[-74.06681186593093,40.694021303161236],[-74.06683386456479,40.69401303406457],[-74.06684494500895,40.69399637236213],[-74.06690002267172,40.69396317244398],[-74.06692207535204,40.69394655189504],[-74.06694412802152,40.693929931341835],[-74.0669661266091,40.693921662219765],[-74.06697720700504,40.693905000504074],[-74.06699920558046,40.69389673137546],[-74.067010285964,40.69388006965642],[-74.06703233858958,40.69386344908597],[-74.06705439120415,40.69384682851129],[-74.06706547156564,40.693830166786746],[-74.06708752416107,40.69381354620548],[-74.06709860450874,40.69379688447744],[-74.06712065708491,40.69378026388962],[-74.06713173741875,40.69376360215837],[-74.06714281774703,40.69374694042599],[-74.06715389806973,40.69373027869243],[-74.06717595061022,40.69371365809377],[-74.06718703091914,40.69369699635686],[-74.06719811122254,40.69368033461886],[-74.06722016373547,40.693663714011315],[-74.06723124402504,40.693647052269924],[-74.06725329651869,40.69363043165592],[-74.0672753490015,40.693613811037615],[-74.06728642926898,40.69359714929072],[-74.0673084817325,40.69358052866594],[-74.06735258662661,40.69354728740333],[-74.06737463905728,40.69353066676547],[-74.0673857192862,40.6935140050086],[-74.06740777169762,40.693497384364285],[-74.06741885191266,40.69348072260412],[-74.06744090430483,40.69346410195321],[-74.06746295668611,40.693447481298094],[-74.06748506306143,40.693422509201994],[-74.06750711541802,40.69340588853817],[-74.0675182495939,40.69338087533121],[-74.06754030192847,40.69336425466083],[-74.0675513820883,40.6933475928873],[-74.06757343440356,40.69333097221029],[-74.06759548670793,40.69331435152904],[-74.06760656684564,40.693297689749954],[-74.06762861913074,40.69328106906222],[-74.06763969925473,40.693264407279685],[-74.06766175152062,40.69324778658533],[-74.0676838037755,40.69323116588673],[-74.06769488387737,40.69321450409873],[-74.06771693611309,40.69319788339365],[-74.06773898833788,40.69318126268413],[-74.06775006841767,40.69316460089059],[-74.0677720666544,40.693156331611895],[-74.06778314672184,40.69313966981498],[-74.06780519891088,40.693123049092584],[-74.0678162789645,40.693106387292346],[-74.06783833113435,40.69308976656338],[-74.06786038329321,40.69307314583005],[-74.06788238148637,40.69306487653014],[-74.06791545969196,40.693039945415734],[-74.06792653970423,40.69302328360438],[-74.06794853787278,40.693015014291674],[-74.06795961787265,40.692998352477076],[-74.06798161602902,40.6929900831578],[-74.06799269601647,40.69297342133996],[-74.06801474809872,40.69295680057647],[-74.0680368001699,40.69294017980871],[-74.06805879829768,40.69293191047455],[-74.06806987825621,40.69291524864893],[-74.06809187637175,40.69290697930831],[-74.06810295631787,40.69289031747935],[-74.06812495442107,40.6928820481325],[-74.06813603435482,40.69286538630022],[-74.06815803244582,40.692857116946804],[-74.06816911236713,40.6928404551113],[-74.0681911104459,40.69283218575149],[-74.06820219035484,40.69281552391263],[-74.06822424233286,40.69279890310822],[-74.06823532222799,40.69278224126598],[-74.0682573741869,40.69276562045501],[-74.06826845406817,40.69274895860936],[-74.06829050600784,40.69273233779191],[-74.06833460985425,40.69269909614384],[-74.06836779549715,40.69265746201914],[-74.06837887533293,40.692640800162394],[-74.06838995516311,40.69262413830451],[-74.06839006294425,40.692607435426915],[-74.06840114276602,40.692590773567865],[-74.06841222258232,40.692574111707636],[-74.0684123303577,40.69255740882992],[-74.06842341016562,40.69254074696847],[-74.06843448996804,40.69252408510583],[-74.06843459773768,40.69250738222786],[-74.06844567753164,40.69249072036406],[-74.06849026604038,40.692382315701536],[-74.06849042767311,40.69235726138366],[-74.06849058930563,40.69233220706574],[-74.06849075093794,40.69230715274773],[-74.0684908586927,40.692290449869034],[-74.06849096644737,40.69227374699026],[-74.06850204618813,40.69225708512011],[-74.06851312592337,40.69224042324876],[-74.06852420565312,40.692223761376376],[-74.06853528537727,40.692207099502824],[-74.06855733707118,40.69219047863161],[-74.06857949648628,40.69215715487661],[-74.0686015481527,40.69214053399667],[-74.06862365366872,40.692115561672466],[-74.06867883660597,40.692065658002825],[-74.0686899162652,40.69204899611356],[-74.06869002396924,40.692032293233616],[-74.06870110362013,40.69201563134323],[-74.06871218326542,40.691998969451696],[-74.06872326290515,40.691982307559044],[-74.0687343425393,40.69196564566534],[-74.068745422168,40.691948983770374],[-74.0687565017911,40.69193232187427],[-74.0687675814086,40.69191565997698],[-74.06877866102062,40.69189899807863],[-74.06878974062708,40.691882336179155],[-74.0688008740659,40.6918573228382],[-74.06883443583216,40.69175722848636],[-74.06883454349901,40.69174052560519],[-74.06884562306506,40.69172386369973],[-74.06885670262544,40.691707201793044],[-74.06886778218033,40.69169053988516],[-74.06887896938514,40.69165717509478],[-74.06889004892616,40.69164051318472],[-74.06889026423111,40.69160710742156],[-74.0689013437609,40.691590445510045],[-74.06890145141041,40.69157374262838],[-74.06891253093178,40.69155708071565],[-74.06894566182449,40.69152379785288],[-74.06894576946267,40.69150709497092],[-74.06895684896185,40.691490433053715],[-74.06896792845548,40.69147377113536],[-74.06897911557326,40.69144040633356],[-74.06900122071522,40.691415433932264],[-74.06901230018524,40.69139877200932],[-74.06902337964974,40.69138211008526],[-74.06903445910876,40.691365448159964],[-74.06905667181486,40.69132377286468],[-74.06905677942457,40.69130706998181],[-74.06906785886265,40.69129040805316],[-74.06907893829525,40.6912737461232],[-74.06909001772225,40.69125708419216],[-74.06909012532337,40.69124038130903],[-74.06910120474197,40.69122371937687],[-74.06910131234018,40.69120701649367],[-74.06911239175038,40.6911903545602],[-74.06912347115505,40.69117369262552],[-74.06912357874751,40.691156989742126],[-74.06913465814382,40.69114032780629],[-74.06913476573337,40.69112362492277],[-74.0691458451213,40.691106962985735],[-74.06914595270793,40.69109026010214],[-74.06915703208747,40.6910735981639],[-74.06915713967118,40.691056895280134],[-74.0691857924356,40.69096228966608],[-74.06936043891987,40.69056990014317],[-74.06951498339785,40.690154315306415],[-74.06965061596244,40.689530579113075],[-74.06974460924006,40.68908394140478],[-74.06977750952592,40.68869102277944],[-74.06978956652749,40.688390506749215],[-74.06980122694178,40.68815164275882],[-74.06979258966659,40.687920409816435],[-74.06983407683491,40.68776643055758],[-74.06986603443508,40.68751993546549],[-74.06980707470913,40.687242274847506],[-74.069809106498,40.686926307996956],[-74.06981094003592,40.68664116716572],[-74.0698528722892,40.686417829277026],[-74.06963381734289,40.685846717542745],[-74.06976800255487,40.685446469509145],[-74.06981817482134,40.68551601672012],[-74.06989455653458,40.68623302391208],[-74.06998349091752,40.68657244973207],[-74.07017361536288,40.68691995892861],[-74.07047505544408,40.68727558867355],[-74.07075684413306,40.68753866424101],[-74.07110910781024,40.68786365447771],[-74.07137104837501,40.688065001254344],[-74.07163294116882,40.688274053946316],[-74.07186470987902,40.68844446087417],[-74.0722168851367,40.688784860748],[-74.07338209687849,40.68864274517641],[-74.07435179852644,40.68783522884626],[-74.07419107828684,40.68770882229607],[-74.0735775011401,40.68816565216275],[-74.07345611065955,40.688149790359404],[-74.07319460595303,40.68787908968565],[-74.0728623831285,40.6875850067181],[-74.07235859831206,40.687205513812366],[-74.07198534466562,40.68699604994031],[-74.07190024048685,40.68719116022918],[-74.07197528123073,40.68720914946489],[-74.07204697320975,40.68723381406638],[-74.07211429581598,40.68726480290959],[-74.07217629063996,40.68730167483823],[-74.07234156629072,40.68740526703222],[-74.07250075147313,40.687514246172256],[-74.07265354340674,40.68762840499383],[-74.07279965146586,40.68774752638037],[-74.0729387977322,40.687871383775885],[-74.0730707175237,40.6879997416156],[-74.07319515989798,40.688132355774066],[-74.07331188812978,40.68826897402917],[-74.0732420551135,40.6883786610033],[-74.07267389454836,40.68843315667515],[-74.07240008502804,40.6883639981965],[-74.072267779334,40.688281160130224],[-74.07214034445633,40.68819400973644],[-74.07201802275439,40.68810271277364],[-74.07190104685951,40.68800744288649],[-74.07178963923249,40.68790838127492],[-74.07168401174083,40.68780571634997],[-74.07158436525548,40.68769964337518],[-74.07149088926921,40.68759036409499],[-74.07146132614426,40.687554773902974],[-74.0714395633712,40.68751606151609],[-74.07142615332248,40.68747520953855],[-74.07142143635815,40.687433254880354],[-74.07142553218814,40.68739126243803],[-74.07143833683568,40.68735029806485],[-74.07145952527787,40.687311401518116],[-74.07148855969696,40.6872755600675],[-74.07152470313244,40.687243683437124],[-74.07156703818737,40.68721658071537],[-74.07161449031402,40.687194939818745],[-74.07166585508764,40.687179310032356],[-74.07174441827806,40.68717613355371],[-74.07176161081499,40.687177002788886],[-74.07185217832992,40.686975262130346],[-74.07183363437524,40.6869723673299],[-74.07169209740891,40.68694101556807],[-74.07122560888993,40.68706259114231],[-74.0710839237982,40.6870543581657],[-74.07085176639339,40.686945601742295],[-74.07077146761907,40.68683740952696],[-74.0706306733548,40.68669045881872],[-74.07057067234811,40.68657463525111],[-74.07053062232,40.68650512603152],[-74.07043235320383,40.68604235878053],[-74.07042302119598,40.68591901694229],[-74.07042702925281,40.68529478953913],[-74.07019607582527,40.68485123120916],[-74.07029783866534,40.68474442253033],[-74.069910093676,40.684440063393346],[-74.07057157080803,40.683937516626365],[-74.07338133587469,40.686054094596834],[-74.07319527845789,40.686198254437834],[-74.07331283432306,40.686312218075074],[-74.07333777345016,40.686433668953754],[-74.0733423917938,40.68651589676012],[-74.073382983635,40.6866021722954],[-74.07346975953116,40.686704277634576],[-74.07357193869474,40.686810354597135],[-74.07375615133053,40.6869558823266],[-74.07391994366296,40.68707784561939],[-74.07401710606216,40.68716432968499],[-74.07444692472338,40.68750650207764],[-74.07430223145495,40.68761558295548],[-74.07446080896618,40.68774927063132],[-74.07468294167931,40.68759349730586],[-74.07479858429396,40.68758594861546],[-74.07483141621036,40.68761137527869],[-74.07467617660373,40.68773042224696],[-74.07472263999797,40.68782070173421],[-74.07482499700915,40.68789937465355],[-74.07492747863247,40.687958473959114],[-74.07503013451519,40.68799017024131],[-74.07510717621902,40.688006112983835],[-74.07522019232819,40.68802610283604],[-74.07528702318345,40.688030263501126],[-74.07532274905047,40.68807345767783],[-74.07537385352836,40.68812453799821],[-74.07543516906682,40.688187400234526],[-74.07551710545715,40.68824250866387],[-74.07562480548968,40.68828988214663],[-74.07573759879195,40.68834510383757],[-74.07580922525038,40.68840408896759],[-74.0758702436194,40.68851392743001],[-74.07594177111314,40.68858857129648],[-74.07604430440118,40.688639840204274],[-74.07620040091683,40.68865546797809],[-74.07623796772424,40.68864846533401],[-74.07627548929631,40.68864860304927],[-74.076312965645,40.68865588112395],[-74.07635048722165,40.688656018814854],[-74.07638800879842,40.688656156493565],[-74.07656623629201,40.68865681030089],[-74.07660380306284,40.6886498075376],[-74.07664132463736,40.68864994513396],[-74.07667884621226,40.688650082718134],[-74.07672579336067,40.68864311430908],[-74.07676331493205,40.688643251865784],[-74.07680083650378,40.68864338941029],[-74.07683835807572,40.6886435269426],[-74.07687587964784,40.68864366446272],[-74.07693216200671,40.688643870720036],[-74.0769790639728,40.68864404258017],[-74.0770165855459,40.68864418005456],[-74.07706348751273,40.6886443518804],[-74.07711038947996,40.688644523687195],[-74.0771479561885,40.68863752074634],[-74.07718547775877,40.68863765816583],[-74.07722299932941,40.68863779557312],[-74.07726052090027,40.68863793296822],[-74.07729804247133,40.68863807035112],[-74.07735432482852,40.688638276402614],[-74.07743874836528,40.688638585428414],[-74.07751379151021,40.688638860066185],[-74.07757945426286,40.68863910033422],[-74.07762635622956,40.688639271931386],[-74.07767325819663,40.6886394435095],[-74.07772954055768,40.688639649378096],[-74.07780458370662,40.68863992382686],[-74.0778421052814,40.688640061032956],[-74.07788882702899,40.68866879401609],[-74.07792621346626,40.688690352314474],[-74.07796359992768,40.68871191060065],[-74.07800103145667,40.68872632850172],[-74.07803841796246,40.688747886763736],[-74.07808518490454,40.68876947929452],[-74.07812261649217,40.68878389715621],[-74.07816000306941,40.6888054553791],[-74.07819743469356,40.68881987321662],[-74.0782349113525,40.688827150668935],[-74.07827229799038,40.68884870885549],[-74.0783097746738,40.68885598628348],[-74.07834720635879,40.68887040407272],[-74.07843140521037,40.688906414240826],[-74.0784782173839,40.6889208662395],[-74.07851569413069,40.68892814360086],[-74.0785531259009,40.68894256132358],[-74.07859060266814,40.688949838660605],[-74.07864688529702,40.68895004408328],[-74.07871245842887,40.68896456445551],[-74.07874998019015,40.68896470136744],[-74.07880626283266,40.688964906712485],[-74.07884373964065,40.68897218396766],[-74.07888126140693,40.68897232083695],[-74.07893754405671,40.68897252611803],[-74.07897506582367,40.68897266295684],[-74.07901249771894,40.68898708053096],[-74.07905001949428,40.68898721734545],[-74.07908749634204,40.6889944945216],[-74.07912501812191,40.688994631311736],[-74.0791624949822,40.689001908463595],[-74.0791999718507,40.68900918560338],[-74.07923749363934,40.689009322357],[-74.07929377632293,40.68900952746458],[-74.07933129811224,40.68900966418771],[-74.07936881990189,40.68900980089865],[-74.07940634169178,40.6890099375974],[-74.07944381859193,40.68901721465812],[-74.07948134038632,40.68901735133252],[-74.0795188621809,40.68901748799472],[-74.07955638397586,40.68901762464473],[-74.0796032413469,40.68902493581428],[-74.07964076314641,40.689025072436884],[-74.07967828494611,40.689025209047294],[-74.07973456764618,40.68902541394005],[-74.07977213430155,40.68901841014563],[-74.07980970094906,40.68901140633883],[-74.07984726758886,40.6890044025197],[-74.07988487906367,40.68899025831378],[-74.07991315491911,40.68896893958931],[-74.07993209515486,40.68894044635309],[-74.07994165493996,40.688911918984246],[-74.07995121471686,40.68888339161433],[-74.07995139405908,40.68885483011517],[-74.07993281255628,40.68882620035681],[-74.07991423106931,40.68879757059555],[-74.07989564959817,40.68876894083108],[-74.07987706814285,40.68874031106355],[-74.07986786710956,40.688711715428816],[-74.07986804648627,40.6886831539291],[-74.07986822586274,40.688654592429295],[-74.07986840523894,40.6886260309293],[-74.07988734539532,40.68859753769817],[-74.07991566592182,40.68856907859569],[-74.07993460604182,40.688540585356435],[-74.07997235173512,40.68850501999381],[-74.07999129181265,40.68847652674481],[-74.08001023187408,40.688448033492385],[-74.08002917191924,40.6884195402366],[-74.0800575819566,40.68837680034682],[-74.0800765219612,40.68834830708269],[-74.08009546194963,40.68831981381532],[-74.08011440192185,40.688291320544636],[-74.08012396153421,40.68826279315671],[-74.08013352113838,40.688234265767754],[-74.08014308073423,40.68820573837773],[-74.08016202065356,40.6881772450984],[-74.08018096055662,40.68814875181571],[-74.08019990044343,40.68812025852983],[-74.08021884031409,40.688091765240486],[-74.08023778016853,40.68806327194779],[-74.08025672000679,40.68803477865178],[-74.08027565982881,40.68800628535249],[-74.08029455483711,40.687984932426154],[-74.07959487459974,40.68750970320109],[-74.0792108457383,40.687242097982576],[-74.07647152738262,40.68533340476528],[-74.07656461341388,40.685251535440536],[-74.07563793657089,40.68459827655093],[-74.07566896526788,40.68457098700512],[-74.07462962111326,40.683846839447],[-74.07458301570647,40.68389756011607],[-74.07444399583188,40.68392445137797],[-74.07414188807672,40.68371976789529],[-74.07405401843153,40.68378991013502],[-74.073383157017,40.68334897569196],[-74.0734505321248,40.68326701384456],[-74.07329189229341,40.68314506886185],[-74.07334366547443,40.68309045300591],[-74.07214056658746,40.68224823366667],[-74.07207341624499,40.682294962397854],[-74.07112620506678,40.68164942056269],[-74.0712296772721,40.6815519348682],[-74.07114790312352,40.68147333514848],[-74.07137007268479,40.68130973854686],[-74.07139146908034,40.68118062956222],[-74.07152576836721,40.68108717282855],[-74.07157724060573,40.68107953423596],[-74.07167474213657,40.68111121439705],[-74.07161270977335,40.681161876657924],[-74.07166375605266,40.6812207880559],[-74.07173035437651,40.681260183117615],[-74.07180206995524,40.68130351191974],[-74.07188404504271,40.68135079352073],[-74.07196604528806,40.68139416035601],[-74.07202235948732,40.68143351712145],[-74.0721042597891,40.68149254268943],[-74.07215543190682,40.681531880332074],[-74.0722117213059,40.68157515171295],[-74.07228845467148,40.68163807280495],[-74.07242727051177,40.68164250176969],[-74.07253041570539,40.681595906100426],[-74.07265422975144,40.68153372764171],[-74.07274194789282,40.68148707468015],[-74.0728709787463,40.68141317089093],[-74.07295874654653,40.68135868834583],[-74.07303096262109,40.681323722225464],[-74.07310315364528,40.68129267076751],[-74.07321660724921,40.68124219779501],[-74.07331435943212,40.68123472949198],[-74.07336593142588,40.68121143126805],[-74.0734536736058,40.68116086304989],[-74.07340774304524,40.6811058861432],[-74.07360903774325,40.68098918569307],[-74.07351697706959,40.68091054965152],[-74.07347613891538,40.6808634211822],[-74.07344044301009,40.68081631169661],[-74.07343552541604,40.68078106031971],[-74.07346645340884,40.68076943017864],[-74.07349733148781,40.68076562944684],[-74.07357418988389,40.68080897615039],[-74.07366630037012,40.680879782729754],[-74.0739018941462,40.68102941487315],[-74.07416349903218,40.68113216486331],[-74.07522870636419,40.68182509364729],[-74.07679031470668,40.68290348359519],[-74.0768568682268,40.682950705129535],[-74.07691845275326,40.68297050481853],[-74.07698520442689,40.682986408606794],[-74.07706753168637,40.68297888061496],[-74.07712943793597,40.68294778897294],[-74.07718115836929,40.68290100079642],[-74.07723290346517,40.682850297886674],[-74.07727953086815,40.682795661415774],[-74.07731073116899,40.682740968447035],[-74.07730079271654,40.682686124861945],[-74.07727540254724,40.682635139502366],[-74.07724487008659,40.682584135307636],[-74.07719371889475,40.68254088519945],[-74.07714761113382,40.682513312740184],[-74.07706563087757,40.682466034860326],[-74.07699391062279,40.682422709313165],[-74.07692219046103,40.6823793837216],[-74.07673269252552,40.68225733036183],[-74.0766609479429,40.682217919317964],[-74.0766299455173,40.68224129443942],[-74.07639945885748,40.68209560141874],[-74.07641503442524,40.682072169761625],[-74.07629738148084,40.68197386804779],[-74.0762055782796,40.68191481550437],[-74.07613209570444,40.68186681757725],[-74.07610294716478,40.68182875218763],[-74.07606556513531,40.68180719329538],[-74.07603756256046,40.68178566883315],[-74.0760001353302,40.681771250299775],[-74.075962753366,40.681749691374186],[-74.07592532617214,40.68173527281661],[-74.07589732367258,40.681713748320476],[-74.07586932119108,40.68169222381773],[-74.07583189404966,40.68167780522985],[-74.07579451219206,40.681656246250135],[-74.07576650976785,40.681634721722354],[-74.0757290826808,40.68162030310145],[-74.0756917008887,40.68159874408838],[-74.07565427383807,40.68158432544332],[-74.07561684680365,40.68156990678601],[-74.07557941978553,40.681555488116764],[-74.07554199278351,40.681541069435276],[-74.07550456579781,40.681526650741745],[-74.07546713882822,40.68151223203625],[-74.07542971187485,40.681497813318494],[-74.07537357147525,40.68147618521938],[-74.07533618987873,40.68145462609166],[-74.07530818768663,40.68143310145317],[-74.0752801855126,40.68141157680802],[-74.0752428039823,40.68139001765018],[-74.07521480184731,40.68136849298921],[-74.07518679973039,40.68134696832128],[-74.07515879763143,40.681325443646635],[-74.07512141618847,40.68130388444972],[-74.07509341412862,40.68128235975919],[-74.07506541208677,40.68126083506205],[-74.07502803071009,40.681239275834834],[-74.07499064935763,40.681217716595675],[-74.07495322267245,40.68120329772412],[-74.07490646201968,40.681181703927855],[-74.07486903537294,40.681167285029105],[-74.07481294080496,40.68113851627871],[-74.07478493891371,40.68111699151375],[-74.07474751232955,40.6811025725757],[-74.07470070643046,40.681088119076115],[-74.07467270459657,40.681066594283884],[-74.07464470278059,40.68104506948501],[-74.07461670098266,40.681023544679206],[-74.07457927448736,40.68100912568695],[-74.07455127272554,40.68098760086536],[-74.07452327098174,40.68096607603701],[-74.07448588994515,40.68094451663503],[-74.07445788824042,40.680922991790794],[-74.07442050724896,40.68090143236771],[-74.07439250558335,40.68087990750765],[-74.0743551246371,40.68085834806342],[-74.07432712301052,40.68083682318768],[-74.07429912140203,40.680815298305035],[-74.0742711198115,40.68079377341574],[-74.07424311823897,40.68077224851953],[-74.07421511668443,40.680750723616576],[-74.07418711514791,40.68072919870696],[-74.07415911362946,40.68070767379044],[-74.0741217328548,40.680686114270884],[-74.07408435210436,40.68066455473914],[-74.07405635064602,40.68064302979776],[-74.07402834920566,40.680621504849704],[-74.07399096852149,40.68059994528781],[-74.07396296712024,40.68057842032393],[-74.07393496573694,40.68055689535316],[-74.07389758511903,40.68053533576118],[-74.07386015905283,40.680520916536715],[-74.07383220320213,40.68049225116155],[-74.07380424737525,40.680463585779634],[-74.0737762460911,40.68044206077055],[-74.073748244825,40.68042053575453],[-74.07372024357691,40.68039901073189],[-74.0736922423469,40.68037748570236],[-74.07365486190749,40.68035592603196],[-74.07362686071649,40.680334400986716],[-74.07358943482147,40.68031998167475],[-74.07355205444755,40.68029842197133],[-74.07351467409764,40.68027686225568],[-74.07347729377197,40.68025530252813],[-74.07343986795358,40.680240883167876],[-74.07341186688011,40.680219358070644],[-74.07337439557243,40.68021207906874],[-74.07333701532836,40.680190519295934],[-74.07329954404517,40.680183240269876],[-74.07326211830582,40.68016882085221],[-74.07322464704322,40.68016154180199],[-74.07318722133228,40.68014712236022],[-74.07314975009015,40.68013984328563],[-74.07311232440769,40.68012542381969],[-74.07307485318597,40.68011814472097],[-74.07303738197258,40.68011086561008],[-74.07299053157628,40.680103551799164],[-74.07295306038036,40.68009627266098],[-74.07291558919279,40.68008899351071],[-74.0728781635898,40.680074573969144],[-74.07284069242263,40.68006729479454],[-74.07280326684814,40.68005287522875],[-74.07276584128978,40.680038455650916],[-74.07272841574773,40.680024036060864],[-74.07269099022183,40.68000961645884],[-74.07265351911184,40.6800023372238],[-74.07261609361443,40.67998791759747],[-74.07257857691671,40.679987778717155],[-74.07254110583159,40.67998049944572],[-74.07250358913848,40.67998036054106],[-74.07246611806576,40.67997308124532],[-74.07241926783026,40.67996576720327],[-74.07238179677519,40.67995848788014],[-74.0723443257283,40.679951208544985],[-74.07230685468976,40.679943929197705],[-74.0722693380183,40.67994379021704],[-74.07222244217932,40.679943616474056],[-74.07218492550837,40.67994347746596],[-74.07214736318363,40.67995047882429],[-74.07210980085104,40.67995748017036],[-74.07207219284857,40.67997162188283],[-74.07203467616273,40.67997148282583],[-74.0719970681366,40.67998562451354],[-74.07195946009476,40.67999976618901],[-74.07192185203698,40.68001390785199],[-74.0718748191009,40.68003515510259],[-74.07183725669306,40.68004215635949],[-74.07179960289453,40.68006343836052],[-74.07176194907204,40.68008472034912],[-74.0717336744156,40.680106037115955],[-74.07170539974118,40.6801273538756],[-74.07169583773775,40.68015588059461],[-74.07166756303005,40.6801771973447],[-74.07164862179941,40.68020568926317],[-74.0716390597603,40.68023421597684],[-74.07162011850122,40.68026270789034],[-74.07161055644168,40.68029123460129],[-74.0715822816495,40.68031255132949],[-74.07156334034384,40.68034104323298],[-74.07153506551555,40.68036235994941],[-74.07149745716484,40.680376501471784],[-74.07146918230065,40.68039781817178],[-74.0714315739162,40.68041195967239],[-74.07139396551605,40.68042610116081],[-74.07136569059794,40.680447417834834],[-74.07132803642165,40.68046869967879],[-74.07129976146459,40.68049001633631],[-74.07126210724331,40.68051129815831],[-74.07123383224732,40.68053261479945],[-74.07120555723327,40.68055393143338],[-74.07116794870583,40.68056807284718],[-74.07113967365592,40.68058938946466],[-74.0711021108615,40.68059639047981],[-74.07106445651789,40.68061767223634],[-74.0710268479251,40.68063181360358],[-74.07098923931653,40.680645954958564],[-74.07096096417688,40.68066727153154],[-74.07092335553465,40.68068141286481],[-74.07088574687647,40.68069555418559],[-74.07085747168303,40.68071687073289],[-74.07081990878821,40.68072387165549],[-74.07078225428356,40.68074515331875],[-74.07074473717032,40.68074501384044],[-74.07071673675992,40.68072348809461],[-74.07070754072082,40.680694891715426],[-74.0707077239567,40.680666330209796],[-74.07072666571874,40.68063783845066],[-74.07074560746457,40.68060934668811],[-74.07077388264773,40.680588030167726],[-74.07079282435924,40.68055953839703],[-74.07082109950626,40.68053822186487],[-74.07084937463529,40.68051690532545],[-74.07087764974636,40.680495588779124],[-74.07090597062684,40.68046713184877],[-74.0709342456987,40.680445815288024],[-74.07096252075263,40.68042449872035],[-74.07099084156683,40.68039604176848],[-74.0710191165817,40.680374725186404],[-74.07104739157853,40.680353408597384],[-74.0710756665573,40.68033209200116],[-74.0711039415181,40.680310775397814],[-74.07114159567584,40.68028949362645],[-74.07116987059759,40.680268177006575],[-74.07120752471046,40.680246895213315],[-74.0712357995933,40.68022557857704],[-74.07126407445809,40.6802042619336],[-74.07130168276032,40.6801901204866],[-74.07132995758923,40.680168803826724],[-74.07135823240004,40.68014748715988],[-74.07138650719291,40.680126170485785],[-74.07141482770035,40.68009771342691],[-74.07144310245418,40.680076396738734],[-74.07147137718995,40.68005508004331],[-74.0714996976311,40.68002662296294],[-74.0715279723278,40.68000530625338],[-74.07155624700646,40.67998398953666],[-74.0715845216672,40.67996267281293],[-74.07161279630986,40.67994135608205],[-74.07164107093445,40.67992003934403],[-74.07166934554108,40.67989872259905],[-74.07169762012977,40.679877405846824],[-74.07171656124541,40.67984891391806],[-74.07173550234495,40.67982042198603],[-74.07174506428238,40.67979189526183],[-74.07175462621151,40.67976336853651],[-74.07175480899447,40.67973480702243],[-74.07172680867686,40.67971328151843],[-74.07169885407889,40.67968461562892],[-74.07166142896693,40.6796701956944],[-74.0716334287064,40.67964867016777],[-74.07159591220372,40.67964853096911],[-74.07155844141784,40.679641251379806],[-74.07153044120273,40.67961972582826],[-74.07149297044029,40.67961244621777],[-74.07145554541347,40.67959802621666],[-74.07141812040292,40.679583606203565],[-74.07138064967324,40.67957632655672],[-74.07117574071981,40.67948453191636],[-74.07114363863279,40.67947079792548],[-74.07110795996748,40.67945705063979],[-74.07107946940395,40.679437884144726],[-74.07104736735927,40.67942415012731],[-74.07101526532777,40.67941041610092],[-74.07098316330953,40.679396682065544],[-74.07095107876248,40.67938022513514],[-74.07091897677199,40.679366491082085],[-74.07088687479471,40.679352757020105],[-74.07085479029257,40.679336300063184],[-74.0708262998533,40.67931713350581],[-74.07079423284733,40.67929795364585],[-74.07076214839431,40.679281496663194],[-74.07073006395713,40.67926503967163],[-74.07069797953574,40.6792485826712],[-74.07066587766074,40.67923484854799],[-74.070662510716,40.67920216061461],[-74.07070185307157,40.67920230690522],[-74.07073758391647,40.67920788565732],[-74.07077692627574,40.679208031922364],[-74.07081272698402,40.679202719106605],[-74.07084845783879,40.67920829782445],[-74.07088055973898,40.67922203189718],[-74.07091264419306,40.67923848884707],[-74.07094113462398,40.67925765538318],[-74.07097681314872,40.679271402720296],[-74.07100889765024,40.679287859643615],[-74.07104098216759,40.679304316557975],[-74.07107304924787,40.67932349634967],[-74.07110515124978,40.67933723036017],[-74.0711372532649,40.67935096436166],[-74.07117293188,40.67936471163828],[-74.07120857561489,40.67938390467651],[-74.0712477959591,40.67940311098539],[-74.07128347462482,40.679416858228024],[-74.0713155767151,40.67943059218016],[-74.07134767881855,40.67944432612336],[-74.07137978093532,40.67945806005769],[-74.07141547709686,40.679469084373444],[-74.0714511558326,40.67948283156448],[-74.07148686945541,40.67949113297187],[-74.07152614224674,40.67950217052769],[-74.07156185588937,40.67951047191198],[-74.0715975521093,40.67952149617152],[-74.07163324834104,40.679532520420175],[-74.07166894458464,40.67954354465778],[-74.07170821743718,40.67955458215183],[-74.071743913705,40.679565606366396],[-74.07177962740906,40.67957390768354],[-74.07181534112212,40.67958220898964],[-74.07185464886436,40.67958780066126],[-74.0718903451745,40.67959882483063],[-74.0719296180965,40.67960986224977],[-74.0719689084483,40.67961817676901],[-74.07201179282588,40.67962378164673],[-74.07205465979771,40.679632109394866],[-74.07209039098832,40.6796376877297],[-74.07212612218494,40.67964326605359],[-74.07216185338763,40.67964884436623],[-74.07219754978155,40.679659868441036],[-74.07223680538517,40.679673628642355],[-74.07227251920919,40.679681929807394],[-74.07232971007201,40.67968758756641],[-74.07236903532102,40.67969045617689],[-74.07240476656978,40.67969603441467],[-74.07245124503757,40.67969892948887],[-74.07249412950883,40.67970453418766],[-74.07254060798661,40.67970742922593],[-74.07257995064889,40.67970757487806],[-74.07261568192486,40.679713153050606],[-74.07266216041441,40.67971604803999],[-74.07270148569533,40.67971891653729],[-74.07275152341454,40.67972454761397],[-74.07279084870459,40.67972741608103],[-74.07283373322367,40.67973302065392],[-74.07286944715503,40.679741321634886],[-74.07290878983879,40.67974146717506],[-74.07294811514605,40.67974433558855],[-74.07298745783211,40.67974448110193],[-74.0730339537341,40.679744653055],[-74.07307329642074,40.67974479853913],[-74.07311263910762,40.67974494400986],[-74.07315555840283,40.679745102689914],[-74.07319488372346,40.67974797101933],[-74.07323420904765,40.67975083933553],[-74.07327353437532,40.679753707638234],[-74.07331285970646,40.67975657592755],[-74.07335577901017,40.679756734533214],[-74.07348095602477,40.67976150346507],[-74.07359554920396,40.6797640041724],[-74.07362563135378,40.67975372807875],[-74.07365305094866,40.6797330549569],[-74.07366962181281,40.67970195458107],[-74.07364805675243,40.679660326195076],[-74.07368658969621,40.679608532536676],[-74.07365483628568,40.67956996394531],[-74.07452781175316,40.67863108487528],[-74.07456356191562,40.67858759041115],[-74.0745909675358,40.67856899444791],[-74.07462650634723,40.67855873819552],[-74.07467307867844,40.67852982563484],[-74.07471440485573,40.67846765472021],[-74.07475569135377,40.6784117159584],[-74.07481342897975,40.67834337313609],[-74.0747589744489,40.67832447564469],[-74.07401376638438,40.67793740250237],[-74.07252623749527,40.677142478047955],[-74.07275992053917,40.67686912109684],[-74.07418769370408,40.6776201960016],[-74.07504706738239,40.678076243756024],[-74.07565446051746,40.677390845570876],[-74.07308175283545,40.67603725856514],[-74.07260858650982,40.67578413791513],[-74.07282835649052,40.67555227803582],[-74.07303617666717,40.67532597668501],[-74.07432338545276,40.6760210685032],[-74.07599869784676,40.67689352493947],[-74.0760588588216,40.676872971465194],[-74.07609173369474,40.67685231778183],[-74.07613558875596,40.676821317204734],[-74.07617679410777,40.67677784225138],[-74.07620983991036,40.676730182455934],[-74.07622656668508,40.67667415299999],[-74.07627060570714,40.67661406890077],[-74.07642169094252,40.676454660477006],[-74.07667993921096,40.67617723077479],[-74.07722669276558,40.67558300903616],[-74.07949841924123,40.67664456663419],[-74.08099472685832,40.677356335725676],[-74.08102215620866,40.67733358343735],[-74.08107436425193,40.677275604590015],[-74.08113204245296,40.67721556812459],[-74.08118157369036,40.677149269760484],[-74.08123135181204,40.67704350092958],[-74.08130059397003,40.676879634368106],[-74.08134523937478,40.676721910892276],[-74.08137884023694,40.67658492174243],[-74.08137651446442,40.6765205126962],[-74.08132268333975,40.67640190347371],[-74.08121969887553,40.67628934826933],[-74.08108123020445,40.67617874166973],[-74.08091283871224,40.676053484219466],[-74.08073319520373,40.675982199086015],[-74.08047485328697,40.67584207224846],[-74.07944115706213,40.67533557132868],[-74.07824958862966,40.67477031625676],[-74.07790150379988,40.674584152126116],[-74.07761595369968,40.67443353220342],[-74.07729753166275,40.6743035656306],[-74.07695467256403,40.67415481168546],[-74.0767611594776,40.67412086345898],[-74.07660879739909,40.67405174933771],[-74.07563742577737,40.67362230808453],[-74.07546624340466,40.67350949703945],[-74.07525955201217,40.67340278743979],[-74.07437528428515,40.673008972416504],[-74.07422833125321,40.67294818484687],[-74.07414106061245,40.6729416306772],[-74.07303345864608,40.67248673565232],[-74.07268510851445,40.67234625846235],[-74.07232884006736,40.672164202083515],[-74.07206487454107,40.672055197154116],[-74.07177354608712,40.67195855478207],[-74.07147126497509,40.67186810334625],[-74.07111482935817,40.67171304931984],[-74.07066315495952,40.671518168723196],[-74.07023068855729,40.67130673832876],[-74.06987712068478,40.6711309167421],[-74.06955333957838,40.67099052161064],[-74.06931930164495,40.670896164045736],[-74.06913404051545,40.670853924051215],[-74.06901127771572,40.67085138843792],[-74.06891839309395,40.67086973865525],[-74.06877651837324,40.67086920887667],[-74.0686538626549,40.67085005375784],[-74.06849044233266,40.67080581688129],[-74.06832708921145,40.67075119282132],[-74.06813926159882,40.670684012347344],[-74.0678889237131,40.67057920371103],[-74.06770664762828,40.670497501223224],[-74.06748914516155,40.670378272564285],[-74.06741057373812,40.670292803144946],[-74.06733993239843,40.67024683476286],[-74.06692631426195,40.67007701141385],[-74.06655621684064,40.66992812437325],[-74.06626780899096,40.66980447232784],[-74.06606940952716,40.669685312744406],[-74.06593364057159,40.6695850852542],[-74.06586305488686,40.66953080641043],[-74.06578410923542,40.66950350281815],[-74.06566418520279,40.66948435479594],[-74.06550622682082,40.66944013423828],[-74.06532946731713,40.669350138984235],[-74.06512819413801,40.66925381881211],[-74.06501672559494,40.669193153141],[-74.06495966100589,40.66915762164976],[-74.06492170799068,40.66912008470497],[-74.06487293639643,40.66906796488992],[-74.06485417599107,40.66901595816024],[-74.06485186632203,40.668951548779056],[-74.06487193650155,40.66880204864752],[-74.06492479981242,40.66864436231444],[-74.06493633392427,40.66854884347396],[-74.06498609064246,40.66844931375898],[-74.06504681422459,40.668341515567654],[-74.06509386936214,40.668237820742384],[-74.06511103509067,40.668115316349635],[-74.06512809279727,40.6680094310771],[-74.06521663779657,40.66781863990319],[-74.06540399182488,40.66753681316777],[-74.06557775713152,40.66724662521995],[-74.06574785525578,40.66704619108812],[-74.0702336495866,40.66893131649831],[-74.07226227811087,40.66979117784899],[-74.07568797979695,40.67122830980447],[-74.07584587338201,40.6712945437769],[-74.07710025396207,40.671820731823686],[-74.07725815034792,40.67188696477253],[-74.07955328934192,40.672849667273596],[-74.08373751804415,40.674604566080106],[-74.08929142354646,40.67693354137494],[-74.09112035038818,40.67771007780213],[-74.09487593684217,40.679304499155585],[-74.09812898898781,40.68068541079179],[-74.09819231733454,40.68085511876699],[-74.09858634589357,40.68191102553283],[-74.0987174004049,40.68226221439551],[-74.09872748211399,40.68228923051185],[-74.09884155887768,40.68259491953136],[-74.09888202237832,40.68270335006007],[-74.09898588704174,40.6829816711301],[-74.09907854698325,40.68322996411047],[-74.09926650732493,40.68373362148732],[-74.09935224745558,40.68397161976022],[-74.09949900885253,40.68456593128561],[-74.09975997604009,40.68562269744795],[-74.09982111584644,40.685905389624445],[-74.1000901232888,40.68639623162053],[-74.10093689338504,40.68805836358266],[-74.1010768025703,40.68840007690801],[-74.1016388017255,40.68955439423166],[-74.10193825078524,40.69006934574549],[-74.10197491192946,40.690167201003725],[-74.1020033025882,40.69026663629383],[-74.10202330721269,40.69036724704793],[-74.10203484437267,40.690468623914064],[-74.10203786708841,40.69057035442119],[-74.10203236302259,40.69067202465749],[-74.10201835453098,40.69077322095463],[-74.10199589857208,40.690873531570794],[-74.10198101999323,40.69090089813141],[-74.10196121419813,40.69092639151777],[-74.1018704671884,40.69100795654897],[-74.10131112181165,40.691510697490955],[-74.1012482796268,40.691582303542596],[-74.10119328947823,40.69165755966488],[-74.10114651508681,40.69173596812849],[-74.10110826583956,40.69181701035336],[-74.10107879474259,40.691900150338256],[-74.10105829674688,40.69198483820584],[-74.10104690745837,40.69207051383899],[-74.10104470223996,40.69215661058573],[-74.1010516957123,40.6922425590064],[-74.10106784165603,40.69232779064053],[-74.10108987783953,40.69240687206067],[-74.10111735116143,40.692484961196726],[-74.1011501854999,40.69256184162906],[-74.10118828987447,40.692637300287245],[-74.10144893411315,40.693059095044866],[-74.10163680029443,40.693349292121155],[-74.10184149172633,40.69365965186367],[-74.10224255909391,40.69426775660821],[-74.10276506707766,40.69505595525237],[-74.1027970719496,40.6951302102998],[-74.1028217647027,40.69520606532658],[-74.10283900972532,40.69528310381668],[-74.10284871229973,40.69536090275435],[-74.1028507176561,40.695443238725375],[-74.10363853656332,40.695830298910934],[-74.10375991509383,40.69588977588589],[-74.10387227874465,40.695944834087825],[-74.10398464139774,40.69599989217661],[-74.10409732869304,40.6960551088737],[-74.10420936844375,40.69611000803127],[-74.10432173165344,40.696165065792954],[-74.10444302999345,40.6962245021466],[-74.10455539477216,40.696279559685735],[-74.10466775855315,40.69633461711166],[-74.10478044697959,40.69638983314405],[-74.10489248667169,40.69644473163653],[-74.1050137872122,40.69650416739643],[-74.10504113973974,40.69651757001172],[-74.10524932986526,40.69661957861696],[-74.10547023360998,40.696727818302016],[-74.10562186001906,40.69680211154805],[-74.10591933603227,40.69694786695595],[-74.10609574073752,40.69703429955918],[-74.10786719999844,40.69790223479629],[-74.10786699179178,40.697899834990324],[-74.10789478412406,40.69791344448858],[-74.10782955219653,40.697980750790784],[-74.10758478599851,40.698233299000336],[-74.10624168720268,40.69828978682473],[-74.10589088263168,40.698346437022444],[-74.10503036426242,40.69891232728598],[-74.1028744263825,40.70145342221651],[-74.10287010829765,40.70146947602868],[-74.10195174038242,40.70252041758712],[-74.10187513825393,40.70261977914995],[-74.10185771154434,40.70270970356135],[-74.101895295167,40.70278053528837],[-74.10196675644157,40.702835415150275],[-74.10208063651115,40.7028583038627],[-74.1022370117289,40.70283634663382],[-74.10240187054096,40.70280799094628],[-74.10254976186133,40.70279243153876],[-74.10267224031378,40.70278963941009],[-74.10284093978797,40.702825570964066],[-74.10309384626667,40.70290357033563],[-74.1032455408581,40.70295872522749],[-74.1033929557628,40.703023506414326],[-74.10350674136649,40.70306246205788],[-74.10365826521388,40.703146539411776],[-74.1038012677416,40.703243442250816],[-74.10394834116768,40.70336606873596],[-74.10406167094538,40.70348215184129],[-74.10414135199984,40.70357562333072],[-74.10420817466111,40.70370118800152],[-74.1042790682107,40.70385247644196],[-74.10434157350386,40.70399409489049],[-74.10437912244379,40.70407135314218],[-74.10445404947124,40.704254792607195],[-74.10450826190632,40.704370672688285],[-74.10462655835668,40.70436143669966],[-74.10484218893478,40.70431718275286],[-74.1051086830131,40.70424096508204],[-74.1052482640662,40.70420287767435],[-74.10642883536245,40.703798764568305],[-74.10644974129471,40.70383418689304],[-74.10637780226811,40.70385965148531],[-74.10640126616705,40.70417789096038],[-74.10641789261982,40.70422293989374],[-74.10642605451402,40.704271173698885],[-74.10642982332834,40.70434831611317],[-74.10639984725672,40.704418916015165],[-74.10641195619397,40.705948693450694],[-74.10643989397018,40.70694183148784],[-74.10646059278305,40.707012604120905],[-74.10646860369363,40.70708654722852],[-74.10646811184039,40.707170102540374],[-74.10644216835172,40.70727285346673],[-74.10642904522135,40.70734993825268],[-74.10645392933957,40.707427152611224],[-74.1064698945021,40.70758467981239],[-74.10646891512641,40.70846845217773],[-74.10648096453725,40.70929120796894],[-74.10650590617168,40.70935878130007],[-74.10655211496257,40.709400717278385],[-74.10678819581342,40.709472223697965],[-74.10780288659709,40.70976129682818],[-74.10771574689062,40.70990092468334],[-74.1076372996695,40.71002396300817],[-74.10771743545013,40.71025135211381],[-74.1076344835476,40.71063204558108],[-74.1075193995476,40.710811623155834],[-74.10747198139295,40.71097536207281],[-74.10746713536118,40.711081398625964],[-74.1073822548377,40.71115181199121],[-74.10735657544302,40.71120957175684],[-74.10733926703858,40.711280214902466],[-74.10738061259875,40.71143140074796],[-74.10743445835999,40.71161155263542],[-74.10750534860264,40.71176605262299],[-74.10753847463013,40.71187864572018],[-74.10750840193369,40.711965314125415],[-74.1073599817046,40.712067648685725],[-74.10689464109473,40.71219782781815],[-74.10677606637795,40.71225205733933],[-74.10665741582218,40.71231914138947],[-74.10658544880108,40.71234781969472],[-74.1064037315531,40.71236648262222],[-74.10625161547794,40.71237881877924],[-74.10612902488533,40.712397682934174],[-74.10600234348199,40.71239403690492],[-74.10579111939322,40.712402956973136],[-74.10565178692703,40.712396053629284],[-74.10552529521982,40.71236027045103],[-74.10544099910787,40.71233105881785],[-74.10526361881476,40.71233045240949],[-74.10513282816426,40.71230750901056],[-74.10503158197537,40.71228788027994],[-74.10495152850253,40.71225546907792],[-74.10485052942882,40.712194062578],[-74.10477899882338,40.71214882552008],[-74.1047201002823,40.71211005912732],[-74.10463161953561,40.71207440511874],[-74.1045473622051,40.71203876551029],[-74.10442077667783,40.712019049437124],[-74.10429830039492,40.71201862967593],[-74.10419684556504,40.71203435050034],[-74.10406154700331,40.71205959634317],[-74.10390067986607,40.71212331902646],[-74.10377778429687,40.71219359927651],[-74.10364632746004,40.71228313236369],[-74.10353155395593,40.712408073598645],[-74.10647300085813,40.7142306803842],[-74.10522540003593,40.715225889348744],[-74.10393166447055,40.716159865552804],[-74.10351175680361,40.716457300488585],[-74.10257000873285,40.71714501283366],[-74.1016837621521,40.7177300697428],[-74.10140123565911,40.717651965140554],[-74.10133365686657,40.717651731770324],[-74.10129143929507,40.717648372235956],[-74.10123653152979,40.71764818257344],[-74.10119846092829,40.71765769222708],[-74.10117720830192,40.71768011487124],[-74.10117707404947,40.717702610476486],[-74.10118534879796,40.71773156258231],[-74.10119778970086,40.71777017025298],[-74.10123983476058,40.717802452742625],[-74.1012861418945,40.71782832249009],[-74.10131979717464,40.71785093479942],[-74.10136612354313,40.71787359085711],[-74.10140826458911,40.71788980499617],[-74.10143773458366,40.717905975371366],[-74.1014840993592,40.717922204065886],[-74.1015136460382,40.71792551979015],[-74.10153894986631,40.71793203458543],[-74.1015685348729,40.71792892297991],[-74.1015771163761,40.717906456530926],[-74.10160238188608,40.717919398628084],[-74.10161912338967,40.71794516619879],[-74.10166527752504,40.71799674505777],[-74.10166932882237,40.718025682553645],[-74.10167077169184,40.71803130414203]],[[-74.05255450501721,40.69665985963091],[-74.05282483587084,40.69654210616358],[-74.05306555393743,40.69643864579966],[-74.05309192435695,40.696340879900696],[-74.0531698581939,40.69622373998038],[-74.05329966015633,40.69604155538272],[-74.05349760239683,40.6959248795196],[-74.05366164756768,40.695749351469644],[-74.05379122961605,40.69559978811761],[-74.05395544726736,40.69539816217064],[-74.05408502797422,40.695248598472745],[-74.05424889600015,40.69509916701481],[-74.05442116138117,40.6949758658664],[-74.05455905144495,40.6948654808983],[-74.05466295742868,40.69470929293496],[-74.05474058254948,40.69463782246563],[-74.0548349604849,40.694625137353555],[-74.05514285509827,40.69473071672712],[-74.05543395374777,40.69478403432738],[-74.05549400066299,40.69477774100493],[-74.05554564906052,40.69474531718095],[-74.05555465455225,40.69468010650493],[-74.05551218517867,40.69462122218996],[-74.05536724335406,40.69450322243398],[-74.05530815102765,40.69436597960248],[-74.05536863131452,40.6942944426642],[-74.05546296528588,40.694288281402926],[-74.05557396609585,40.69435395411029],[-74.0556853572094,40.694360907398426],[-74.05577137937223,40.69431556668621],[-74.05579761498193,40.69423737321335],[-74.05578099124733,40.69415901482875],[-74.05565375711086,40.69395626459806],[-74.0556286918342,40.69385830009092],[-74.0556638459854,40.693727944685094],[-74.05580242470248,40.693513168278756],[-74.05585545836054,40.69327196448311],[-74.05583931137284,40.6931218380287],[-74.05570324727341,40.69295820106667],[-74.05538761222691,40.692728627159454],[-74.0550290777297,40.69250541158304],[-74.05457703992637,40.69216439250577],[-74.05429924347061,40.69199346853065],[-74.05356365465848,40.69314516386502],[-74.05316033825069,40.69376909790745],[-74.0525201903822,40.69469592422495],[-74.0520366655593,40.69537315701255],[-74.05152174542927,40.69605242284882],[-74.05156566691035,40.69607550371575],[-74.05255450501721,40.69665985963091]]],"type":"Polygon"},"properties":{"geo_point_2d":{"lon":-74.08284031082496,"lat":40.69709433340469},"id":"0","name":"South"}},{"type":"Feature","geometry":{"coordinates":[[[-74.05188767408151,40.73146659909228],[-74.05372421924578,40.727217436387704],[-74.0561546020389,40.723860233119204],[-74.05755467823965,40.72432311014472],[-74.06090530612458,40.725562398015015],[-74.0610640074826,40.72573308747844],[-74.0611290921856,40.72580310880242],[-74.06116843149054,40.72584547633782],[-74.0614191137637,40.726111542089946],[-74.06155746173681,40.72625835013368],[-74.06158101817303,40.72628125079525],[-74.06166685197077,40.72636469479279],[-74.06174410112978,40.72643641312024],[-74.06199374991864,40.726613179041586],[-74.06228216536698,40.72680452989252],[-74.06291097037182,40.727279219049656],[-74.06356708519958,40.727733668245186],[-74.06357297131738,40.72772745907182],[-74.06360891636382,40.72767121258829],[-74.06363325223464,40.72760805985974],[-74.06367253412324,40.72744979317476],[-74.06384737084161,40.72670683119055],[-74.06388293056877,40.72659348572029],[-74.06390813573967,40.72651307072216],[-74.06415534641224,40.72601336910282],[-74.0642785309993,40.725764366634436],[-74.06442082822109,40.72544480773836],[-74.06448561657021,40.72532526061706],[-74.06453272825257,40.725238311758694],[-74.06487217022065,40.724664100184754],[-74.06519158987096,40.72412766467233],[-74.06536198510767,40.72384148077401],[-74.06570138664325,40.723276955827366],[-74.06574439262607,40.72319951594707],[-74.06575435192993,40.723177153901595],[-74.06577024328696,40.723141419583314],[-74.0657834550104,40.72307358501953],[-74.06579241845661,40.72299925577026],[-74.06578956757798,40.72278263611873],[-74.06578099518565,40.722658365211345],[-74.06576240197533,40.722388076107535],[-74.06576093147221,40.722198032850464],[-74.06571561960037,40.721744473891725],[-74.0657584673121,40.72168322343728],[-74.06582293407388,40.72157355611039],[-74.06588095521259,40.721472757269055],[-74.06597338697517,40.72131224739446],[-74.06617108547836,40.72097024757661],[-74.06625707890285,40.72081215663737],[-74.06636435708627,40.72065414431499],[-74.06647153503464,40.72050582216652],[-74.06658302871953,40.720354277402855],[-74.06669855304199,40.7202318438406],[-74.06672582327133,40.720208390630624],[-74.06681820946504,40.72012883374387],[-74.06684712767073,40.72010371443585],[-74.06692930855,40.72003226884829],[-74.06693883148832,40.72002126923385],[-74.06700208085957,40.719948461415186],[-74.06708355627265,40.71983561842966],[-74.0671223017678,40.71975816200639],[-74.06716110826625,40.719671015141074],[-74.06721746807703,40.719503094902095],[-74.06727262770193,40.71932567193604],[-74.06735199221356,40.71907035300078],[-74.06746459577545,40.71874096122361],[-74.06750047098926,40.718599508535526],[-74.06751694829812,40.718534265708776],[-74.06755210546497,40.71835333645597],[-74.06755724057902,40.71821758704971],[-74.06754949994112,40.71809793073156],[-74.06752081920673,40.71793614107179],[-74.06750089715207,40.71784800672016],[-74.06743818742456,40.717570497533416],[-74.06737644966661,40.71725988717755],[-74.06732341376834,40.716920213188864],[-74.06725817448903,40.71649317293655],[-74.06723813363035,40.71639013181344],[-74.067196515471,40.716176112054406],[-74.06714131628011,40.71577551743472],[-74.06712330428488,40.715676628834814],[-74.06712879467295,40.715519744288464],[-74.0671572998209,40.71508992626649],[-74.06712786418626,40.71488907268632],[-74.06717461261562,40.71478979598569],[-74.06724194244748,40.71467091556609],[-74.06735028138394,40.71446409973356],[-74.06737274567625,40.71442119729179],[-74.067578342843,40.71410327053299],[-74.06778385932859,40.71379725662791],[-74.06810414988647,40.71330402363021],[-74.06849153395069,40.71271570539072],[-74.06861803210822,40.71252257128288],[-74.06889076742257,40.71211252376382],[-74.06902516879623,40.71190753319593],[-74.06911206037503,40.711791716098965],[-74.06922251505465,40.711658089142226],[-74.06950648809627,40.711322581536],[-74.06968790666953,40.71111474599836],[-74.06979438959111,40.710987061081944],[-74.06987261208846,40.710911863980634],[-74.06990861957449,40.71087724657224],[-74.07000704122412,40.71079128173534],[-74.07016035462841,40.71068463331253],[-74.07038835390978,40.71053653655377],[-74.07060540038869,40.71040959430267],[-74.07915089194411,40.71253147234255],[-74.08527114922941,40.714050684378115],[-74.0907423385083,40.7153880694123],[-74.10167077169184,40.71803130414203],[-74.10167758466807,40.71805784828162],[-74.10167315025923,40.71809318394374],[-74.10166867753433,40.718134946920976],[-74.10165996193969,40.71817990898069],[-74.10151574265203,40.71828225038517],[-74.1014018748796,40.71825293373927],[-74.10130486370407,40.718230102650075],[-74.10111508444405,40.71818124116553],[-74.10104339652503,40.71816171108237],[-74.10092092822677,40.71815807402804],[-74.1008322687869,40.718151340034446],[-74.10064225964278,40.71814104166416],[-74.10054511442695,40.718140705539994],[-74.10045209684709,40.718156452240045],[-74.10039713101979,40.71816590314833],[-74.10032108508246,40.71816885359732],[-74.10025774870624,40.718165420561505],[-74.1001859841514,40.718158744576094],[-74.10007628319057,40.71813908222625],[-74.09992845352939,40.71813856997573],[-74.09973422086915,40.718128255472934],[-74.09961175271472,40.71812461703034],[-74.09938772304587,40.71815276327479],[-74.09929052001796,40.718162067065464],[-74.09910895851145,40.71815179549551],[-74.09896963410554,40.71814167038327],[-74.0987662016783,40.718256657515994],[-74.09868124496707,40.718336705279484],[-74.09858365549594,40.718410281603035],[-74.09844770468644,40.71854157142832],[-74.09829013237511,40.71875634265825],[-74.09819597336059,40.71896169324067],[-74.0980596533962,40.71915404204933],[-74.09794001507031,40.719381799746934],[-74.09744510028426,40.720202787910274],[-74.0974276628425,40.72029271132892],[-74.0974270820111,40.720389120977],[-74.09750239500345,40.7205082913346],[-74.09759892433125,40.72061146699152],[-74.0976450771752,40.72066304742823],[-74.09768669664265,40.72076603160234],[-74.09767720403852,40.720939539515875],[-74.09764269700356,40.721058326959906],[-74.09756967156132,40.72126053688339],[-74.09746163467227,40.721665089137964],[-74.09739227039367,40.72196050961936],[-74.09729388007241,40.722165844585],[-74.09717839951514,40.72240325703359],[-74.09711447797692,40.722496231866764],[-74.09691870155298,40.72273979120269],[-74.09687159776965,40.72284567950462],[-74.09683267036988,40.72299658843631],[-74.09679368461134,40.723157138309524],[-74.09676725438423,40.723337014349816],[-74.0967663816132,40.72348162873302],[-74.09678641574943,40.72366166707073],[-74.09675628491256,40.72375475971248],[-74.09668422373971,40.72379628632075],[-74.09659542145266,40.72381204461483],[-74.09650235624595,40.723834215380336],[-74.09645988269833,40.723872631548865],[-74.09644275350762,40.723911136310086],[-74.09642980954406,40.723956083141786],[-74.0964295766059,40.723994646971974],[-74.09642934366728,40.72403321080183],[-74.0964417441396,40.72407824624034],[-74.09646687510106,40.72411368502121],[-74.09650888301218,40.724152396511435],[-74.09653407225684,40.72417819432033],[-74.09656350501233,40.724200793234516],[-74.09657183675534,40.72422010467563],[-74.09658014909874,40.7242426297683],[-74.0965842761661,40.72425871279305],[-74.0965756727492,40.724284392486844],[-74.0965628840433,40.72430363011163],[-74.09652893604749,40.7243292212183],[-74.09649928975509,40.72434197247119],[-74.09647382872781,40.72436116578787],[-74.09644830945327,40.724390000055706],[-74.09644396888865,40.72440926720164],[-74.09643530716338,40.72444458784052],[-74.09643061717867,40.724521700725774],[-74.09646754716917,40.72470179815577],[-74.09646723660573,40.724753216589484],[-74.09647523842051,40.72482716012085],[-74.0965003308608,40.72486902619542],[-74.09655892529035,40.724959215159295],[-74.09658397902257,40.72500750851906],[-74.09660901338718,40.72505901552524],[-74.09662137535936,40.72511047824183],[-74.09662098729731,40.725174751280484],[-74.09661641388914,40.72523258225292],[-74.09661986191033,40.72536114308844],[-74.09658575815573,40.72541244341893],[-74.0965263869849,40.72545080054402],[-74.0964671322104,40.72546987572797],[-74.09637834706076,40.72548242018812],[-74.09630641971222,40.72550145097672],[-74.0962261410962,40.725504383910696],[-74.0961373558569,40.72551692818498],[-74.09606961371408,40.72554240090777],[-74.09601888480265,40.72554865081761],[-74.09590928961033,40.72550970257239],[-74.09582089314335,40.725457973574194],[-74.09572825320548,40.72540944336571],[-74.09562294092582,40.725360868689464],[-74.09551778445015,40.725286584706176],[-74.09539976114132,40.72524439272334],[-74.0954543832201,40.725292789962545],[-74.09554702279613,40.725341320390065],[-74.09560596648201,40.72537366410138],[-74.09568180687211,40.72540606696797],[-74.0957070351592,40.72542543764957],[-74.09577436899515,40.725467451819256],[-74.09583335178532,40.72549336811199],[-74.09587541850604,40.72552243887171],[-74.09591329996725,40.725545067525815],[-74.09596387340551,40.72556452687391],[-74.09601028099858,40.72557433046158],[-74.09612863554013,40.72556188974724],[-74.09616252604222,40.725545939721954],[-74.09618792934006,40.72553638743509],[-74.09622596629491,40.7255333067748],[-74.0962808805063,40.725533498851036],[-74.09631044969736,40.725533602265884],[-74.09636532507825,40.72554022160507],[-74.09641169388775,40.72555645233488],[-74.09642851292375,40.72556936601743],[-74.09645372207848,40.72559195018821],[-74.09649154554728,40.725624219608214],[-74.0965292720133,40.72567255727375],[-74.09654169225563,40.725714379038976],[-74.09654153699698,40.725740088251584],[-74.09649910106998,40.725772077113064],[-74.09643137821642,40.72579433639496],[-74.09642277453831,40.7258200160692],[-74.09645205268097,40.72586832422047],[-74.09653601250108,40.72595538813769],[-74.09665799036219,40.72604258484388],[-74.09682627967963,40.72615565293977],[-74.0968891774442,40.72623300187192],[-74.09680798641115,40.72638697682029],[-74.09685794018542,40.726509272619175],[-74.09667077406155,40.7267239379517],[-74.09663517556487,40.727022689405665],[-74.09656681105263,40.727150999233864],[-74.09638974108897,40.727092533291824],[-74.09638065182254,40.72719855422411],[-74.09636332754839,40.72726919545364],[-74.09632511484119,40.72730119900931],[-74.09628705746263,40.727307493347304],[-74.09620671840145,40.727320067208105],[-74.09616844731119,40.727361711662745],[-74.0961597850448,40.72739703226046],[-74.09617648793599,40.727429227880314],[-74.09626479016717,40.727497024854664],[-74.09631517098755,40.72754862055434],[-74.09636522179488,40.72765484828954],[-74.09635190809483,40.72776085443696],[-74.09630088621769,40.72781530921563],[-74.09620725200615,40.72793067555817],[-74.09623655032858,40.727975770099896],[-74.09627848282953,40.72802733625964],[-74.09630776182188,40.728075644433076],[-74.09624805792063,40.72816863343745],[-74.09619207312161,40.72834519208665],[-74.0961913543599,40.72846409713449],[-74.09618232285402,40.728560477074076],[-74.09613566058992,40.72859245099832],[-74.09602598261336,40.72856635745976],[-74.095941728636,40.72852749794524],[-74.09584061621591,40.728482151906874],[-74.09576469448166,40.72846260374404],[-74.09570561185922,40.7284527556658],[-74.09565928012226,40.72843009735243],[-74.09559607046552,40.728404166171984],[-74.09552448999106,40.728365350753315],[-74.09544862686856,40.728336161434065],[-74.09545691987198,40.728361900241964],[-74.09549050060374,40.72839736882414],[-74.09552413974541,40.7284231964476],[-74.09555355455893,40.72844900925968],[-74.09559988627275,40.72847166761527],[-74.09566301818873,40.72851045339243],[-74.09567983781817,40.728523367180244],[-74.09571768200821,40.728552423193776],[-74.0957386871245,40.72857177906787],[-74.09575971169993,40.728587921288494],[-74.09578496064947,40.728604078298474],[-74.09583553635841,40.72862353770335],[-74.09590295124308,40.72865269719164],[-74.09594496165836,40.72869140886872],[-74.09596162588977,40.728730031813],[-74.09592734493941,40.728810254755054],[-74.09589750213344,40.72885514232945],[-74.09587616637735,40.72889041852708],[-74.09584624572894,40.728948160685206],[-74.09583337813535,40.72898025280642],[-74.09585017847265,40.728996380218476],[-74.09587139762611,40.728980385923585],[-74.09589699668057,40.728938697217636],[-74.09593096671276,40.72890989268005],[-74.0959522052571,40.72889068472021],[-74.09598189255139,40.72887150632867],[-74.09600305332738,40.72886515295767],[-74.0960199897192,40.72885878479814],[-74.09604105331981,40.728868499668195],[-74.09605777594852,40.72889748164895],[-74.09607023534278,40.728932876143695],[-74.09607424597557,40.72896824107192],[-74.0960613590548,40.729003546868434],[-74.09599328292511,40.729083651555776],[-74.09597601604723,40.72914465175158],[-74.09598812558916,40.729237891943164],[-74.09600033234291,40.72931506388526],[-74.09601263630063,40.72937616757854],[-74.09601639427108,40.72945330994681],[-74.09601606387317,40.72950794198449],[-74.09601567516859,40.729572214969124],[-74.09602387136589,40.72961402197857],[-74.09603210644244,40.72964940168879],[-74.09604429388442,40.72972978727056],[-74.09604820737873,40.729781220440536],[-74.0960647553382,40.72983912525868],[-74.09608982994554,40.72988420504268],[-74.09613604625628,40.72992614507759],[-74.09635930116818,40.730032978658436],[-74.09633804295432,40.7300554003373],[-74.09637594654967,40.73007481518571],[-74.09635050270816,40.730090794796496],[-74.09635873801454,40.73012617448158],[-74.0963628071236,40.73015189844643],[-74.09635424168296,40.73017115079535],[-74.09632875895818,40.7301935576988],[-74.09630755894749,40.730206338424274],[-74.0962736661061,40.73022228846812],[-74.09623975382374,40.73024145215085],[-74.09623549050563,40.730247864671554],[-74.09620175304032,40.730238105502636],[-74.09618471917688,40.73026054193029],[-74.09611728312018,40.730234596255244],[-74.09607934064509,40.73022160862019],[-74.09605407158172,40.73020866532477],[-74.0960118852331,40.730198876532604],[-74.09597388448591,40.73019552980964],[-74.09593163983833,40.73019538193481],[-74.0959020685853,40.73019527841323],[-74.09585131667816,40.73020474187645],[-74.09578356965899,40.73023021438762],[-74.09572849599377,40.730255731246466],[-74.09567336393005,40.73029088902472],[-74.09562671966293,40.73031964907823],[-74.09559274877834,40.73034845351526],[-74.09555443664047,40.73039652503146],[-74.0955119778073,40.730431727136555],[-74.0954651971359,40.7304829826628],[-74.09543539219146,40.73052144280272],[-74.0954140556525,40.730556718901056],[-74.09539275802281,40.73058556769831],[-74.09543484720304,40.73061142495895],[-74.0954050616487,40.73064667144148],[-74.09541317972976,40.7307013330786],[-74.09542141461182,40.730736712824914],[-74.0954212005005,40.73077206295645],[-74.09542100585351,40.73080419943942],[-74.09542077227673,40.7308427632189],[-74.09541205075331,40.730887724679846],[-74.09540755372909,40.730932700947584],[-74.0953819535956,40.73097438952532],[-74.09535629502615,40.7310257190415],[-74.0953221873765,40.73107701893001],[-74.09530088953954,40.7311058677067],[-74.09527110369207,40.73114111415035],[-74.09523709328677,40.73117634577196],[-74.09519889726828,40.731205135271836],[-74.09515649616445,40.73123069629403],[-74.09510564596557,40.731256227663124],[-74.09507173282347,40.73127539099522],[-74.09502514606058,40.73129450985245],[-74.09497012968802,40.731310385395794],[-74.09492780638554,40.73132309174143],[-74.09486436038544,40.73133572393531],[-74.0948430037893,40.73137421356811],[-74.09479663133925,40.731357982207136],[-74.09476680612012,40.73139965581268],[-74.09472426823757,40.731447712207554],[-74.09470297002366,40.73147656087032],[-74.09465612948975,40.731537456995675],[-74.09463895825407,40.73158238871896],[-74.09462182600251,40.731620893144196],[-74.09460453769432,40.7316851067465],[-74.0945957764973,40.73173649543093],[-74.09459552293129,40.73177827284762],[-74.09459104479801,40.73182003542629],[-74.09459505480802,40.73185540038523],[-74.0946116800228,40.73190045079796],[-74.09463264685509,40.731926234160206],[-74.09465777977199,40.73196167329621],[-74.09472934407638,40.73200370289141],[-74.09477143388688,40.7320295603906],[-74.09480090847097,40.73204573244247],[-74.0948177678065,40.732052219056634],[-74.09480077200311,40.73206822797382],[-74.09482632965886,40.73208010131458],[-74.09481323130771,40.732103622584454],[-74.09481760756731,40.73212506271826],[-74.09481722195665,40.73214220118196],[-74.09481284141013,40.732167895530644],[-74.0947915624982,40.732193530558064],[-74.09477032256376,40.73221273828669],[-74.09474485802426,40.73223193117917],[-74.09471947146791,40.73223826947702],[-74.0947067781879,40.73224143862393],[-74.09468551871285,40.7322638599839],[-74.09465179996452,40.73225088671433],[-74.09463474555996,40.7322765365476],[-74.09459647062876,40.732318180427086],[-74.0945667423859,40.73234378573585],[-74.09454540479942,40.73237906165752],[-74.09454096560779,40.73241439693541],[-74.09448154799277,40.73245918022102],[-74.09444337042535,40.73248475581253],[-74.09440081209864,40.73253602572167],[-74.09436664438668,40.73259696624789],[-74.0943409844052,40.732648295517244],[-74.09433216431793,40.73270932511201],[-74.0943318910599,40.73275431616701],[-74.09433983284111,40.73283790067736],[-74.09428033662893,40.73289553844038],[-74.09423777791322,40.732946808283955],[-74.09420781495685,40.73301097725464],[-74.09422412780951,40.73310744605896],[-74.09423187425838,40.73322316703606],[-74.09422258541308,40.733361324129426],[-74.09410318161517,40.73354408605845],[-74.09382568527928,40.73401873968832],[-74.09374414527943,40.73422734417287],[-74.09376096596611,40.73424025823255],[-74.09346359246378,40.73450916325417],[-74.09324316244252,40.73463050781408],[-74.09300567594715,40.734777501522245],[-74.09283619603315,40.734857246655665],[-74.09269216228759,40.73492101276491],[-74.09251847647779,40.734997528873166],[-74.09249709773671,40.735039231680204],[-74.0924841489036,40.735084177959834],[-74.09245027228415,40.73509691320662],[-74.09241653293746,40.7350871529304],[-74.09237440290005,40.73506772187081],[-74.09233643880899,40.73505794665134],[-74.09223938681475,40.735038321552835],[-74.09219721761465,40.73502531771822],[-74.09217599565463,40.73504131130752],[-74.09215895920545,40.73506374711],[-74.09213349282646,40.73508293940818],[-74.09208265816608,40.7351052557643],[-74.09199378086753,40.735130651343894],[-74.09195145458091,40.7351433565756],[-74.09190472676977,40.73518496965465],[-74.09187920135713,40.735213802829],[-74.09182392568208,40.73527145421976],[-74.09173066611696,40.73532254380895],[-74.0916585696572,40.73536728076602],[-74.0915821303931,40.73543128459334],[-74.0915692398266,40.73546658983145],[-74.09163622740921,40.735566451972275],[-74.09164856777402,40.735621128762844],[-74.09169026569938,40.73571126025601],[-74.09170260613439,40.735765937039666],[-74.0916303126693,40.735842810413196],[-74.09138432933577,40.735996198109234],[-74.09114699129168,40.73611747876613],[-74.09094773503817,40.73622925275645],[-74.09079503024178,40.736328336592415],[-74.09058722455237,40.73645614821004],[-74.0896925810151,40.73697359289584],[-74.08927684203016,40.73724849356602],[-74.08895027799733,40.7374497949435],[-74.08876382741344,40.737539114745005],[-74.08861982360959,40.73759644841259],[-74.08850983684215,40.73761855234206],[-74.08836216237172,40.73758588865636],[-74.08829470220647,40.7375631520646],[-74.08813453157167,40.7375015201028],[-74.08802916622852,40.73745936581803],[-74.08790715915042,40.73737537376112],[-74.08781036298728,40.73731396759551],[-74.0876711195139,40.737284546845224],[-74.08754451118864,40.737261598503345],[-74.08736742250605,40.7372031187317],[-74.08715669387205,40.73711880867043],[-74.08698387055585,40.737053916140916],[-74.08676885833692,40.736979231180456],[-74.08655414503495,40.73685634120059],[-74.08626350426387,40.736713896406336],[-74.08606573204277,40.73658463881319],[-74.0856740957462,40.73637755603889],[-74.08546771640157,40.736273976222925],[-74.08556010455999,40.736364291947986],[-74.08566520740958,40.73644822581489],[-74.0857492659585,40.73651922920891],[-74.08589231336323,40.73661615389342],[-74.08607338502956,40.736713214766525],[-74.08624608710873,40.73679739050236],[-74.08641033985926,40.73688153570342],[-74.0865999224597,40.7369689851066],[-74.0867809563466,40.737072472155894],[-74.08693680040523,40.73715015907689],[-74.08710105489818,40.737234303298195],[-74.08723164956332,40.73729583093136],[-74.087290540108,40.73733781977783],[-74.08738311090794,40.737399211273754],[-74.08749694543158,40.73743818270364],[-74.08759374148342,40.73749958913023],[-74.08772433712389,40.73756111620786],[-74.0878256956868,40.73756790562681],[-74.08792703444112,40.737577908598524],[-74.08800272626215,40.73763602562278],[-74.08812899851219,40.73771360537092],[-74.08819201584316,40.73777167704225],[-74.08817468008286,40.737842316858405],[-74.08814909258292,40.73788079010623],[-74.08805183951125,40.7378932978965],[-74.08793346166264,40.73790573018999],[-74.08775555755457,40.73797901030308],[-74.08757324947418,40.738081197812434],[-74.0873655711866,40.738186508048145],[-74.08730614362292,40.73823128754716],[-74.08689995026532,40.738326245844085],[-74.0867222030205,40.73837381522343],[-74.08644753970557,40.738379258871525],[-74.08631192235637,40.73844626082947],[-74.08614290317973,40.738448868632986],[-74.085808432,40.73856014878302],[-74.08566017854865,40.73862067720358],[-74.08551626950627,40.73866193876428],[-74.08523700069277,40.73872842351014],[-74.08508886615917,40.73876966935241],[-74.08489419647078,40.73882038878844],[-74.08476712661087,40.73887135110612],[-74.084677621947,40.73899636382041],[-74.08400486355526,40.739151412932685],[-74.08351431972693,40.739220345557406],[-74.08328610799974,40.739229162992835],[-74.08319738238134,40.73922884262845],[-74.083070531176,40.73924445303976],[-74.08301965020634,40.73927319263517],[-74.08298134394876,40.73931804619613],[-74.08295999800147,40.73935331989274],[-74.08275269006089,40.739397562620624],[-74.08271943195227,40.73931067219175],[-74.08261346461725,40.73936492213073],[-74.08254570329267,40.739390386761706],[-74.08243134589279,40.73943496505445],[-74.0822621632785,40.739463276267216],[-74.08212694176994,40.73946600050214],[-74.08191993474588,40.73946203715843],[-74.08185655909404,40.7394618075825],[-74.0817676721609,40.73948719522125],[-74.08167874489658,40.73951901006696],[-74.08151352498777,40.73958911278358],[-74.08127639818183,40.73967180926614],[-74.08121296187237,40.739681220248684],[-74.08113681005628,40.739697012474274],[-74.0810184681078,40.73970301037469],[-74.08093827267302,40.73968986439429],[-74.08090457306129,40.739673673482805],[-74.08088783419767,40.739647903017236],[-74.08087105500488,40.73962855982408],[-74.08085411444749,40.73963492572839],[-74.08084556347872,40.739650963229565],[-74.08084117704435,40.73967665698584],[-74.08083666957023,40.73972163256638],[-74.08081518114615,40.739779401319296],[-74.08079809932283,40.73980826267666],[-74.08074293135348,40.73984662682551],[-74.0806791719188,40.73990745570964],[-74.08056899710232,40.73995847476649],[-74.08051817508343,40.73997757233618],[-74.08044202276837,40.73999336409999],[-74.08033613330085,40.74003475737923],[-74.08028567474804,40.73999600937907],[-74.08023068814913,40.740005450546555],[-74.08015455594156,40.740018028483064],[-74.08006142234073,40.740046613066696],[-74.0800063750306,40.740065695037515],[-74.07992589633115,40.74009753926958],[-74.07987060630684,40.740155184816594],[-74.07980727045887,40.740148526838794],[-74.07974805858215,40.74015795239357],[-74.07968454068818,40.740180217078674],[-74.07965063883593,40.740196162169575],[-74.07960826655606,40.74021529010965],[-74.07957011934315,40.74023443342443],[-74.07949418913022,40.74021487455695],[-74.07940980878523,40.74019528484816],[-74.07932957259514,40.74018856502286],[-74.07923678265905,40.74016251711656],[-74.07913986898461,40.7401203855477],[-74.0788784204862,40.740039089176165],[-74.0788740332687,40.74006478285213],[-74.0789161422109,40.740087432455184],[-74.07895408688952,40.74010042572117],[-74.07901732130013,40.74012315234883],[-74.07907637118426,40.74013943626097],[-74.07914801533785,40.740168620906374],[-74.07920279970341,40.740191316621456],[-74.07924917442615,40.74020755423405],[-74.07930401959884,40.74022060899168],[-74.07940525982555,40.74024668763689],[-74.07943899983881,40.74025645171114],[-74.07950227503862,40.740272750801],[-74.07956973489605,40.74029549251972],[-74.07962460043619,40.74030533348879],[-74.0797174918592,40.740315312901295],[-74.07975950012235,40.740354030381035],[-74.07920837416694,40.74064768379142],[-74.07925452646222,40.74069927140068],[-74.07917396562857,40.740743969644],[-74.07914000260314,40.74076955548976],[-74.07910599903805,40.74080156859733],[-74.07899547709498,40.74090721794379],[-74.07872423728308,40.74103799036743],[-74.07869898781689,40.741021829657335],[-74.07838537372714,40.74117172885986],[-74.07839780568287,40.74121033878766],[-74.07833838973036,40.741251899967516],[-74.0782710511185,40.74120987571694],[-74.07819902052621,40.74124174960338],[-74.07817801656633,40.74122239058533],[-74.0781441341303,40.741235121590904],[-74.07812286623137,40.741257539823785],[-74.07814797352312,40.74129619610701],[-74.07807594277922,40.74132806991529],[-74.07810948008866,40.74136997073197],[-74.07765094692398,40.74171858810524],[-74.07755001015299,40.741644303395674],[-74.07728276592243,40.74181043783405],[-74.07738368230324,40.74188793640984],[-74.07722241272614,40.74199982562538],[-74.07694834475542,40.74190883754903],[-74.07689317284408,40.74194719982433],[-74.07691832040337,40.741979429099025],[-74.07693916133695,40.74202449741944],[-74.07692175145573,40.74210477633254],[-74.07701464495726,40.7421147579276],[-74.07712401190904,40.742192287695424],[-74.07684382398206,40.74240015189014],[-74.07675978797866,40.74232592845874],[-74.07661635459063,40.74229005160772],[-74.07652342014349,40.742286496959885],[-74.076443100206,40.74229262965612],[-74.07636269869467,40.74231161683303],[-74.07630328049852,40.74235317694609],[-74.07624369906296,40.74242044610013],[-74.0761717885978,40.742433036899456],[-74.07610814494396,40.74247458139464],[-74.0760444604003,40.74252255312188],[-74.07596385440812,40.742573676356564],[-74.07592133668976,40.742615298359105],[-74.0759293381279,40.742686029350324],[-74.07595852705488,40.742747197056765],[-74.07596618158836,40.74287255981635],[-74.07591006935773,40.74305874875267],[-74.07578741408419,40.74307758026304],[-74.07577459534626,40.74310002910786],[-74.07573207717246,40.743141651034676],[-74.07563477334237,40.74316057556805],[-74.07550348336913,40.743208298404134],[-74.07540597501261,40.7432593590759],[-74.07537188663531,40.74330422558714],[-74.07538005107081,40.74334924754053],[-74.07543063188893,40.74336871586228],[-74.0750682304578,40.74387836180117],[-74.0749416550175,40.743848972355],[-74.07488176393352,40.743964445264126],[-74.07474934606012,40.74418891701124],[-74.07467688065864,40.74428827493808],[-74.07451033088415,40.74456403993619],[-74.07444580335721,40.744743769660836],[-74.07432212008953,40.74492328118512],[-74.07454538968015,40.745030156757444],[-74.07449411148829,40.74511995152965],[-74.07441401330819,40.7450907328437],[-74.07429443176201,40.74528954169404],[-74.07426905882063,40.745292661813636],[-74.07426635701515,40.7453089525883],[-74.07160136520929,40.74421245400581],[-74.06977724364737,40.743306269419335],[-74.06831935508855,40.742527420860576],[-74.06489647545102,40.73983330250478],[-74.06465916070943,40.73954412724884],[-74.06416499174897,40.73944437593436],[-74.06313697033757,40.73925440484044],[-74.06229885455502,40.739092019399735],[-74.06170928853432,40.73892961092372],[-74.06091255834647,40.73860489561428],[-74.06034410508876,40.73835013693106],[-74.05968827076934,40.737966302005944],[-74.0595986600217,40.737890389059125],[-74.05939226047303,40.73771685764344],[-74.05880021046586,40.73720642901428],[-74.05880017723977,40.73720638555156],[-74.0582436617425,40.73672659818796],[-74.05702106625856,40.73567342949738],[-74.05652632787005,40.73524742187038],[-74.05592315739717,40.734728030534676],[-74.05560253226054,40.73445031546415],[-74.05559029290261,40.73443971406681],[-74.05543264562378,40.73430316413271],[-74.05444445744659,40.73345345215778],[-74.05422178583167,40.73326197897552],[-74.05333179684023,40.732493415617895],[-74.05312006381699,40.73231055418268],[-74.05292531297684,40.73214304033343],[-74.05287823851396,40.732108299025796],[-74.052730514513,40.73199929816258],[-74.0526243718992,40.7319154120113],[-74.05245785505872,40.731783802103806],[-74.0522083650105,40.7316220041281],[-74.05197030801327,40.731498955167716],[-74.05188767408151,40.73146659909228]]],"type":"Polygon"},"properties":{"geo_point_2d":{"lon":-74.07674591795643,"lat":40.72748946939102},"id":"0","name":"West"}},{"type":"Feature","geometry":{"coordinates":[[[-74.05188767408151,40.73146659909228],[-74.05197030801327,40.731498955167716],[-74.0522083650105,40.7316220041281],[-74.05245785505872,40.731783802103806],[-74.0526243718992,40.7319154120113],[-74.052730514513,40.73199929816258],[-74.05287823851396,40.732108299025796],[-74.05292531297684,40.73214304033343],[-74.05312006381699,40.73231055418268],[-74.05333179684023,40.732493415617895],[-74.05422178583167,40.73326197897552],[-74.05444445744659,40.73345345215778],[-74.05543264562378,40.73430316413271],[-74.05559029290261,40.73443971406681],[-74.05560253226054,40.73445031546415],[-74.05592315739717,40.734728030534676],[-74.05652632787005,40.73524742187038],[-74.05702106625856,40.73567342949738],[-74.0582436617425,40.73672659818796],[-74.05880017723977,40.73720638555156],[-74.05880021046586,40.73720642901428],[-74.05939226047303,40.73771685764344],[-74.0595986600217,40.737890389059125],[-74.05968827076934,40.737966302005944],[-74.06034410508876,40.73835013693106],[-74.06091255834647,40.73860489561428],[-74.06170928853432,40.73892961092372],[-74.06229885455502,40.739092019399735],[-74.06313697033757,40.73925440484044],[-74.06416499174897,40.73944437593436],[-74.06465916070943,40.73954412724884],[-74.06489647545102,40.73983330250478],[-74.06831935508855,40.742527420860576],[-74.06977724364737,40.743306269419335],[-74.07160136520929,40.74421245400581],[-74.07426635701515,40.7453089525883],[-74.0742339029153,40.745504636802316],[-74.07427193171053,40.74550477708029],[-74.07410183046258,40.74633649959081],[-74.07403809976965,40.74639089741513],[-74.07390723302971,40.74637113212367],[-74.0738896132091,40.746483546802736],[-74.07390612543121,40.74654466818601],[-74.07389714115439,40.74662819138527],[-74.07387566497539,40.74668274510543],[-74.07384145071917,40.74674689290783],[-74.07377755528013,40.746826999625576],[-74.0737386433971,40.74696504529117],[-74.07377458019829,40.74729297603266],[-74.07388138746866,40.748434235944465],[-74.07399843295897,40.74863391774982],[-74.0741077249862,40.74872430484237],[-74.07421285317217,40.74880503535369],[-74.0743470282795,40.74896942923086],[-74.07446438338413,40.7491209061144],[-74.07444639496714,40.749291166155984],[-74.07451263312275,40.74950672859425],[-74.0747689048695,40.74974227352017],[-74.07502497382455,40.7500099541692],[-74.07641679027032,40.75110130270213],[-74.07661432144103,40.751272353804005],[-74.0767529777246,40.75139819681946],[-74.07682404203855,40.75152057815159],[-74.07684043591635,40.751600980856026],[-74.07690335452926,40.75167512671299],[-74.07699201515304,40.75168830651352],[-74.0769960984048,40.75171081740547],[-74.07697488785597,40.75172359448036],[-74.07685656498589,40.75172316073533],[-74.07678466497273,40.75173253821808],[-74.07647595601539,40.751766756537975],[-74.07615052712556,40.75177198929706],[-74.07593935865951,40.751751931385364],[-74.07572406664397,40.751715789410405],[-74.07551736955253,40.751657182719526],[-74.07518024547696,40.75150811194986],[-74.0740515450222,40.75090620297907],[-74.07378199905767,40.75076380490531],[-74.07374837771945,40.750734757402746],[-74.07371896163794,40.75070893912651],[-74.0736939355233,40.75065742742461],[-74.07368177140397,40.75057703988931],[-74.07361438835615,40.749879417118514],[-74.07351719729739,40.74987905802024],[-74.07345340111738,40.74994309635485],[-74.07354527469434,40.75077578527715],[-74.07357032126794,40.750824083381595],[-74.07359544999461,40.75085952696767],[-74.07364589226947,40.7509014914695],[-74.07374694118562,40.75095971138145],[-74.07390704849324,40.75103421777309],[-74.07534739658841,40.75180438782104],[-74.07606921601464,40.75193237584318],[-74.07678360539894,40.75189964692547],[-74.0769569254491,40.7518906412356],[-74.07700328735523,40.75191009338427],[-74.07701978336677,40.751974427914355],[-74.07703207393749,40.752035533325895],[-74.07704854964292,40.75210308147979],[-74.07692581692987,40.752131554976295],[-74.0768201097402,40.752140808548184],[-74.07662984488066,40.75215617928158],[-74.07647759214893,40.75217490289954],[-74.0763423243103,40.75218083385102],[-74.0761435667257,40.75220260001432],[-74.07600401171479,40.75221815593492],[-74.07593652065839,40.75219862575382],[-74.07589428261473,40.75219525684874],[-74.07585198331061,40.7522015288133],[-74.07582223900123,40.75222712912651],[-74.07582201434772,40.75226247903838],[-74.0757710386123,40.752304069822046],[-74.07547449308089,40.75241867274692],[-74.07537690985347,40.752479374129784],[-74.07523665874388,40.75260419246867],[-74.07517704654501,40.75267467452951],[-74.07512564049745,40.75278375120499],[-74.07510379505139,40.75289615038942],[-74.07512843439899,40.75300872070048],[-74.07515327838681,40.75308915472874],[-74.07521574654214,40.753234001290366],[-74.07529109722253,40.753346758194425],[-74.07535811898207,40.753440202186624],[-74.07543777783543,40.75354012003176],[-74.07550494306814,40.753611068545666],[-74.07577783137754,40.7538948777417],[-74.07587443608219,40.75398843016056],[-74.0759460119579,40.75403047129987],[-74.07621077838344,40.754262830377684],[-74.07629041908758,40.75436596125855],[-74.07635329886902,40.75444653464448],[-74.07641558731402,40.75462030318731],[-74.07646148188789,40.754713668979726],[-74.07646089045947,40.75480686416883],[-74.07642651128285,40.75489672165588],[-74.07639225439812,40.75496729736849],[-74.07632847645804,40.755028123598464],[-74.07625632795921,40.75507606425234],[-74.07614616548108,40.75512065155852],[-74.0759050570603,40.75515511655419],[-74.0755795298681,40.755173202124624],[-74.07541879744794,40.75519510684482],[-74.07523679156522,40.75523942896026],[-74.07508838916692,40.7553160115266],[-74.0749525622371,40.75540870872313],[-74.0748802076363,40.755488784768296],[-74.0748374148025,40.75557218337332],[-74.07479027294525,40.755674848146825],[-74.07474306950911,40.75578715377639],[-74.07472114047782,40.755912407325226],[-74.07474959678858,40.75608926574855],[-74.07481184159775,40.756269462345706],[-74.07490789565865,40.75644978343723],[-74.07499116952485,40.75664612588561],[-74.07503647000996,40.75683268734787],[-74.0750609469355,40.756970966606524],[-74.07505575900852,40.75712199143733],[-74.07500806379318,40.75731142414929],[-74.0749691686199,40.757446256336],[-74.07490893764549,40.757613146926516],[-74.07485291209191,40.75778326667243],[-74.07480970821089,40.757930937722016],[-74.07474543448315,40.75806889001697],[-74.07468567346245,40.75816186710245],[-74.07458797864636,40.75823863583486],[-74.07439301876167,40.75832468693416],[-74.07420232562566,40.75840432604437],[-74.0739525056659,40.75847731918192],[-74.07401124225616,40.75854502369373],[-74.07339322406762,40.75869699847714],[-74.073270724284,40.7586869045015],[-74.0730846456781,40.75870549852576],[-74.072966145967,40.758730769719534],[-74.07285187242692,40.75875605643301],[-74.07269092471891,40.75881009352682],[-74.07257658918859,40.758845020836155],[-74.07250847484599,40.75892189734252],[-74.07244442189635,40.759024498449165],[-74.07236309291365,40.75918488209379],[-74.07233179942321,40.75945150317452],[-74.07230934966867,40.75965709672597],[-74.0722652119263,40.75994937975822],[-74.07219266371374,40.76005837661715],[-74.07214570001999,40.760132117592775],[-74.07174487151788,40.76028712566515],[-74.07173829809754,40.760290449864975],[-74.07086003621298,40.76075611119973],[-74.07051832816363,40.760959180405465],[-74.06859564872256,40.7618374839895],[-74.06773353309462,40.762168013909694],[-74.0673298096028,40.76226185983271],[-74.06704231691391,40.76239019715146],[-74.06658422409701,40.762579195261615],[-74.06623375719157,40.76274816208656],[-74.06599105024135,40.76287666509059],[-74.06570328633414,40.763045866078855],[-74.06540607491209,40.76328995551359],[-74.06524394253462,40.76342557166382],[-74.06512668866901,40.7635477340194],[-74.06494694980721,40.76363560401883],[-74.06461501171154,40.76370927697155],[-74.06438205676187,40.76371520923339],[-74.06414041065496,40.763680240161676],[-74.0639146979068,40.76358440433937],[-74.06364040581848,40.76342633112823],[-74.06321255946168,40.763097768299886],[-74.06282968566791,40.762742128875225],[-74.0626067189082,40.76259143455186],[-74.06228552879352,40.762392687911806],[-74.06214278321288,40.76230359898902],[-74.06184739603437,40.762268421210415],[-74.06165041176138,40.76225405050056],[-74.06137276175066,40.76224618424148],[-74.06095138213786,40.762299072683525],[-74.06053022618276,40.76231790373187],[-74.06029709625719,40.76235107245292],[-74.06010857604251,40.76241165610972],[-74.05990173529801,40.762533471662444],[-74.05982926302312,40.762655799405515],[-74.05982831939424,40.76279883395717],[-74.05989017152382,40.76292848531445],[-74.05992510495885,40.763064845332366],[-74.05995033893753,40.76313591571293],[-74.05997343988551,40.76326706429025],[-74.05998045331224,40.763321757974616],[-74.05993132253943,40.763480360774025],[-74.05986803201039,40.76356866683378],[-74.05975157708929,40.76356822264868],[-74.0593941988586,40.76342382066404],[-74.05892964100099,40.76323132861861],[-74.0586883600188,40.7631418588106],[-74.0587953607168,40.763217192662694],[-74.05897416098728,40.76327236679715],[-74.0592063497883,40.76338223529899],[-74.05947446154156,40.763478617781594],[-74.0595995146859,40.763533585774226],[-74.05965303831192,40.763567846707964],[-74.05967950796204,40.76362924975717],[-74.05966965083425,40.763765438935245],[-74.05957061717655,40.763839985766914],[-74.05954252877959,40.76402378472425],[-74.05959443417659,40.76430324770224],[-74.05962900803847,40.764494097113044],[-74.05970832824651,40.76469192856712],[-74.05976982231198,40.76487606928647],[-74.05987619793596,40.76504675846454],[-74.05990172481347,40.765251195943044],[-74.05996290543817,40.76548301470911],[-74.05987170450504,40.765727875066574],[-74.0597544817143,40.76584322067829],[-74.05961020349422,40.76598570827452],[-74.05946601461092,40.766114573354194],[-74.05929494988169,40.76624333562135],[-74.0592280533321,40.766285289494434],[-74.05913302298472,40.76634488719473],[-74.05885454558496,40.76645961574853],[-74.05869279772209,40.7665339220398],[-74.05854892138373,40.766615107802295],[-74.05841391301406,40.76670994998782],[-74.05829655068221,40.7668457275659],[-74.0581614061519,40.76696100293572],[-74.05804413310985,40.767083157921505],[-74.05796255846815,40.76722588353106],[-74.05787211517995,40.76735495243306],[-74.05774543076889,40.767545184395146],[-74.05761865529497,40.76774903853036],[-74.05752784920297,40.76793259643122],[-74.0574012078929,40.76811601682499],[-74.05733720937563,40.76820017839203],[-74.0572566032708,40.76830617949279],[-74.05713000571839,40.76848278840965],[-74.0570666614638,40.76857790397244],[-74.05699345360102,40.76880920829606],[-74.05689633939899,40.76887185042845],[-74.05688788625037,40.768873230090534],[-74.05580126094603,40.76708057595929],[-74.05509999018297,40.76592360414184],[-74.05418834800228,40.76441948767917],[-74.05361104983423,40.763439196668884],[-74.05318188557848,40.762724211818956],[-74.05278684709599,40.76206606659245],[-74.05216656371027,40.76103262801079],[-74.05182939366516,40.76047867034975],[-74.05178189059741,40.76042741357943],[-74.05155630412884,40.760256640594456],[-74.05141244640464,40.76015179263636],[-74.05134791927173,40.76010232021932],[-74.0507035786741,40.75984428728083],[-74.05053194777385,40.759775713814776],[-74.0501336571643,40.75961657813192],[-74.04986265078165,40.759508297527525],[-74.04957657850107,40.75919810077741],[-74.0494555619329,40.7589764495935],[-74.0493585723573,40.75879880563118],[-74.04930843640655,40.758706976001626],[-74.04931165157944,40.75861075990627],[-74.04900876543735,40.7584971789135],[-74.04889361167011,40.75845168509345],[-74.0481745007281,40.75820151314223],[-74.04768471989657,40.75803111996733],[-74.04690062751973,40.757758330100415],[-74.04664526556076,40.757669486684],[-74.04581471976842,40.7573805242226],[-74.04552257570384,40.75727105870823],[-74.04510621240028,40.757119814577976],[-74.04439251089273,40.756860557938836],[-74.04417644276758,40.75678206782409],[-74.04365901831457,40.7565941048885],[-74.04360688580437,40.75640630366392],[-74.04351526077848,40.75607622899353],[-74.04342363664456,40.755746154236405],[-74.04335552275026,40.75550077361793],[-74.04325277667341,40.75513062536599],[-74.04315319742817,40.754771883772534],[-74.04300573987116,40.75424065113639],[-74.04291197329599,40.753902837646145],[-74.0427860072272,40.75344901605294],[-74.04272656717042,40.75323486840381],[-74.04261565460905,40.75283527658919],[-74.04259685218138,40.752767400878575],[-74.04257163829433,40.75270073822769],[-74.04254014525125,40.75263563838136],[-74.04250253829782,40.75257244288444],[-74.04245901475443,40.752511483289496],[-74.04230472825915,40.75235521839409],[-74.04222460307939,40.75229616989553],[-74.04213862039848,40.75224209556163],[-74.04204731269358,40.75219333025755],[-74.0419512454139,40.752150175970655],[-74.04185101347971,40.752112899940485],[-74.04118649183935,40.7518674885847],[-74.04064682611444,40.75166699911523],[-74.04054958324774,40.75163086229496],[-74.04019062727473,40.751497505610345],[-74.03993563718528,40.751402772440464],[-74.03950161553209,40.75124152483973],[-74.0393749996089,40.75119448348255],[-74.03916229063928,40.75111545699082],[-74.0391296575456,40.75110333265146],[-74.03913684446476,40.7511057614176],[-74.03908646403355,40.7510855758316],[-74.03903945281773,40.75106113759085],[-74.03899642873304,40.7510327679138],[-74.038957957286,40.75100083969368],[-74.03892454414074,40.75096577259703],[-74.03876893870556,40.75088778401958],[-74.03768432601335,40.75025684666558],[-74.03793251892452,40.74992071792166],[-74.03806349158802,40.74970065296671],[-74.03867352447178,40.74835657793122],[-74.03907494261881,40.747869186366835],[-74.03911688862225,40.74780570386208],[-74.03919201299485,40.747707012907576],[-74.03926138933815,40.74759131295087],[-74.03931240305161,40.74748875129479],[-74.03933793080985,40.74742482312164],[-74.03936657700113,40.747353089376034],[-74.03947274787065,40.747103032277224],[-74.03952974893936,40.746982479025036],[-74.03957432732099,40.74689704778541],[-74.03967194128218,40.74672908382857],[-74.03977582200987,40.74656330839787],[-74.03988588472926,40.74639985670554],[-74.04000203962538,40.74623886206747],[-74.04012419191616,40.746080455794576],[-74.04025224193029,40.745924767085825],[-74.04069034419352,40.7454480544748],[-74.04097477763327,40.745171972974134],[-74.0410930050072,40.74505458389935],[-74.04116756327194,40.74497050565504],[-74.04123661153612,40.74488374824577],[-74.04129998372922,40.74479452036192],[-74.04135752743636,40.74470303663564],[-74.04136970541303,40.744682595293064],[-74.04138551376907,40.74466364594693],[-74.04140464333108,40.74464655919721],[-74.0414267199722,40.74463166921638],[-74.04145131192936,40.74461926721351],[-74.04145944342889,40.744614774922724],[-74.04146654877572,40.74460936891812],[-74.04147245237176,40.7446031828012],[-74.04147700831857,40.74459636945288],[-74.04148010402301,40.7445890972551],[-74.04148166297989,40.744581545929364],[-74.04150544761295,40.7443352562833],[-74.04150968832295,40.74427860038124],[-74.04152204676184,40.744222636587935],[-74.04154237478437,40.74416803567103],[-74.04157042872549,40.74411545206173],[-74.04160587232164,40.74406551601077],[-74.04164828074204,40.7440188260349],[-74.04174409596902,40.74392763793727],[-74.04183308054574,40.74383253038435],[-74.04191495792257,40.743733798986426],[-74.04198947364357,40.74363175061594],[-74.0420563961373,40.74352670245378],[-74.04211551743624,40.743418981002876],[-74.04216665382269,40.74330892107375],[-74.04220964639934,40.74319686474332],[-74.04224436158293,40.74308316029203],[-74.04227069151874,40.742968161120835],[-74.04228875490762,40.74285811766543],[-74.04229713974325,40.74274424254103],[-74.04232536790381,40.74250194816814],[-74.04214636996817,40.74156853889396],[-74.04214685906408,40.74151938539387],[-74.04215531935768,40.74147065349653],[-74.04217162150219,40.74142308814987],[-74.04219551627634,40.74137741646758],[-74.04222663839539,40.74133433661436],[-74.04226451209566,40.7412945071331],[-74.04230855840801,40.741258536878725],[-74.04235810400864,40.74122697571105],[-74.04241239151223,40.741200306089695],[-74.04276982391805,40.74097502159687],[-74.04286734352662,40.74091508044365],[-74.0429603210286,40.7408511000198],[-74.04304846761912,40.74078327906909],[-74.0431315095019,40.74071182826469],[-74.04320918874011,40.7406369695544],[-74.04328126405737,40.74055893547144],[-74.04334751158707,40.7404779684117],[-74.04347426669754,40.74015607932355],[-74.04367435844183,40.74000779139812],[-74.04378102229485,40.739848880653476],[-74.04378311108887,40.73945909819189],[-74.04376428080273,40.739170835804124],[-74.04376465828028,40.739106401867936],[-74.04375160629668,40.738856936313674],[-74.043638819585,40.7387063422172],[-74.04355843528846,40.73859901262236],[-74.0434198275639,40.73850121146433],[-74.04337550716927,40.73847757035486],[-74.04350542545225,40.73826306921562],[-74.04370904465448,40.73791219020676],[-74.04378033971217,40.73775474442654],[-74.04387214639486,40.73759653760515],[-74.04270328021717,40.736570451993494],[-74.04278162845307,40.73628792266395],[-74.04374287503305,40.73617441331523],[-74.04588239192925,40.735691274915126],[-74.04607367105449,40.735640970221844],[-74.04688299747916,40.735428145994625],[-74.04754583227536,40.73526991592396],[-74.04800083306928,40.735155529611816],[-74.04818121995174,40.73511453927339],[-74.04825187705684,40.7350880254493],[-74.0482991034299,40.73505244302766],[-74.04834253115423,40.735001994323056],[-74.04857565135245,40.73468717639274],[-74.0487853049545,40.734384178459386],[-74.04893563897637,40.73414946335654],[-74.04903050474704,40.73402177957407],[-74.04910934228083,40.73393271021951],[-74.04922362192941,40.7338318937736],[-74.04938914705278,40.73367170979902],[-74.04953906729395,40.73350847324382],[-74.05002818248326,40.73297721792024],[-74.05023727377318,40.732739766698835],[-74.05031222276436,40.73265962889801],[-74.05037920002144,40.73260029682867],[-74.05045009415413,40.732538040793386],[-74.0506468146123,40.732395847350176],[-74.05089468960541,40.732218084072244],[-74.0511150186215,40.73205811078759],[-74.05188767408151,40.73146659909228]]],"type":"Polygon"},"properties":{"geo_point_2d":{"lon":-74.05726748901459,"lat":40.74966292612958},"id":"0","name":"North"}}]};

const districtStyle = {
  north:{ name:'North District', color:'#4CC9F0' },
  south:{ name:'South District', color:'#F72585' },
  east:{ name:'East District', color:'#7B61FF' },
  west:{ name:'West District', color:'#FF9F1C' }
};

const districtGeoJSON = {
  type:'FeatureCollection',
  features: districtBaseGeoJSON.features
    .map((feature)=>{
      const rawName = (feature.properties && feature.properties.name ? feature.properties.name : '').trim();
      const id = rawName.toLowerCase();
      const style = districtStyle[id] || { name: rawName || 'District', color:'#4CC9F0' };
      return {
        ...feature,
        properties:{
          ...feature.properties,
          id,
          name: style.name,
          color: style.color
        }
      };
    })
    .filter((feature)=>feature.properties.id)
};

function getFeatureCenter(feature){
  if(!feature || !feature.geometry) return null;
  const { type, coordinates } = feature.geometry;
  let points = [];
  if(type === 'Polygon'){
    points = (coordinates || []).flat();
  }else if(type === 'MultiPolygon'){
    points = (coordinates || []).flat(2);
  }
  if(!points.length) return null;

  let minLng = Infinity, maxLng = -Infinity, minLat = Infinity, maxLat = -Infinity;
  points.forEach((point)=>{
    const lng = Number(point[0]);
    const lat = Number(point[1]);
    if(!Number.isFinite(lng) || !Number.isFinite(lat)) return;
    minLng = Math.min(minLng, lng);
    maxLng = Math.max(maxLng, lng);
    minLat = Math.min(minLat, lat);
    maxLat = Math.max(maxLat, lat);
  });

  if(!Number.isFinite(minLng) || !Number.isFinite(minLat)) return null;
  return [(minLng + maxLng) / 2, (minLat + maxLat) / 2];
}

const districtCenters = districtGeoJSON.features.reduce((acc, feature)=>{
  const id = feature.properties && feature.properties.id;
  if(!id) return acc;
  const center = getFeatureCenter(feature);
  if(center) acc[id] = center;
  return acc;
}, {});

function getDistrictCenter(id, fallback){
  return districtCenters[id] || fallback;
}


const wardsGeoJSON = {"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"coordinates":[[[-74.07747388,40.74325374],[-74.0748024,40.74272944],[-74.07231331,40.74237991],[-74.06158447,40.73991686],[-74.06014681,40.74207508],[-74.05927509,40.7433147],[-74.05823976,40.74472094],[-74.056153,40.743839],[-74.05486554,40.74330454],[-74.05452222,40.74295501],[-74.05393749,40.74375162],[-74.05159056,40.7427965],[-74.05123651,40.74323748],[-74.04769331,40.74182715],[-74.04852211,40.74056311],[-74.05064642,40.73823413],[-74.05109704,40.73698222],[-74.04939383,40.73603311],[-74.049941,40.73519373],[-74.04861599,40.73452303],[-74.04938847,40.73364096],[-74.05033797,40.73256375],[-74.05171126,40.73157393],[-74.05206263,40.73116946],[-74.05166835,40.73112271],[-74.05599475,40.72376253],[-74.05438542,40.72312018],[-74.05507207,40.72091865],[-74.06704545,40.72472605],[-74.06810224,40.72529114],[-74.06757116,40.7263644],[-74.06863332,40.72663271],[-74.07483459,40.72920195],[-74.07543003559114,40.728411265696884],[-74.07663167,40.72833199],[-74.07978058,40.729954],[-74.08056378,40.73051498],[-74.08136845,40.7307345],[-74.08405066,40.7318036],[-74.08946335,40.73446206],[-74.09146965,40.73535632],[-74.09503698,40.7351043],[-74.09336329,40.7366733],[-74.09129262,40.7380309],[-74.08983886,40.73855523],[-74.08480167,40.74012009],[-74.08052087,40.74141258],[-74.07747388,40.74325374]]],"type":"Polygon"},"properties":{"ward":"C","council_pe":"Richard Boggiano"}},{"type":"Feature","geometry":{"coordinates":[[[-74.08735782,40.70584143],[-74.08488214,40.70883641],[-74.08397555,40.70996483],[-74.08334523,40.71077606],[-74.08240646,40.71195934],[-74.0807569,40.71407171],[-74.08018023,40.71463283],[-74.07901883,40.71581401],[-74.07694817,40.71748104],[-74.07546222,40.71841212],[-74.07473266,40.71895694],[-74.07095075,40.72289251],[-74.06850457,40.72160778],[-74.06839728,40.7211199],[-74.06673968,40.72022139],[-74.0670079,40.72005063],[-74.06747997,40.71878617],[-74.06677991,40.71854426],[-74.06587869,40.71978026],[-74.06503916,40.7194367],[-74.06160057,40.72300228],[-74.05506939,40.72091459],[-74.05444443,40.72290064],[-74.05140281,40.72196149],[-74.05050695,40.7219127],[-74.04677117,40.72064829],[-74.04809403426044,40.71800390936354],[-74.04657483,40.71751357],[-74.04619932,40.71815191],[-74.04416299,40.71752495],[-74.04479384,40.71618604],[-74.03916121,40.71551719],[-74.03430104,40.71491948],[-74.0295589,40.7144031],[-74.02487576,40.71388264],[-74.02579308,40.70965376],[-74.03862476,40.7107354],[-74.04487967,40.71043449],[-74.04788375,40.71159135],[-74.05112386,40.71202237],[-74.05130625,40.71222568],[-74.05143231,40.71194104],[-74.05534029,40.71232327],[-74.05657679,40.71578148],[-74.05777842,40.71491542],[-74.05845433,40.715444],[-74.05969888,40.71460437],[-74.06028897,40.71510855],[-74.06276464,40.7133947],[-74.06338692,40.71386841],[-74.06455636,40.71305315],[-74.06646609,40.71440716],[-74.06973839,40.71020678],[-74.06561315,40.70932845],[-74.07184392,40.70492238],[-74.07340229,40.70608746],[-74.07482386,40.7034238],[-74.07560706,40.70378167],[-74.07721639,40.70198823],[-74.08003271,40.70407854],[-74.08180296,40.70232171],[-74.08735782,40.70584143]]],"type":"Polygon"},"properties":{"ward":"F","council_pe":"Frank E. Gilmore"}},{"type":"Feature","geometry":{"coordinates":[[[-74.0544498,40.72290471],[-74.05438811,40.72312221],[-74.05599743,40.72377473],[-74.05448198,40.72635627],[-74.05327499,40.72839704],[-74.05233085,40.73000888],[-74.05167103,40.73113084],[-74.05041307,40.73101498],[-74.04827803,40.73088287],[-74.04608667,40.73067555],[-74.04459536,40.73049872],[-74.04437542,40.73201498],[-74.04418766,40.73336658],[-74.0425579548537,40.73319788353301],[-74.04093146,40.73305155],[-74.039236307799,40.732908460472316],[-74.03953671,40.73077921],[-74.0378201,40.73066539],[-74.03642535,40.73047026],[-74.03307796,40.73006375],[-74.03120041,40.72977513],[-74.03122187,40.72946212],[-74.02167052,40.72866534],[-74.02482212,40.71388264],[-74.03312624,40.71477311],[-74.03445661,40.71493981],[-74.03901637,40.71549686],[-74.04480726,40.71618401],[-74.04416621,40.71753186],[-74.04620469,40.71814987],[-74.04657751,40.71751763],[-74.0480994,40.71800228],[-74.04678136,40.72064829],[-74.04769331,40.72096744],[-74.04884934,40.72134758],[-74.05051768,40.72190864],[-74.05139959,40.72196068],[-74.05251753,40.72230869],[-74.05389833,40.72272257],[-74.0544498,40.72290471]]],"type":"Polygon"},"properties":{"ward":"E","council_pe":"Eleana Little"}},{"type":"Feature","geometry":{"coordinates":[[[-74.09504771,40.73509617],[-74.09145623,40.73535226],[-74.08952773,40.73448848],[-74.08719957,40.73335235],[-74.08408821,40.73183612],[-74.08197999,40.73097433],[-74.0813899,40.73074669],[-74.08054769,40.73050482],[-74.07978058,40.72996619],[-74.07791644,40.72898243],[-74.07664776,40.72833199],[-74.07542467,40.72840923],[-74.07482386,40.72921414],[-74.07060742,40.72747016],[-74.06863868,40.72663678],[-74.06758726,40.72636846],[-74.06808078,40.72530334],[-74.06704545,40.72473824],[-74.06609058,40.7244374],[-74.06419158,40.72381132],[-74.06159788,40.72299008],[-74.06322598,40.72133335],[-74.06502574682237,40.71943873274571],[-74.06587869,40.71978229],[-74.06678259,40.71854019],[-74.06747192,40.71878008],[-74.06727612,40.71938791],[-74.06699717,40.72004656],[-74.06672627,40.72022545],[-74.06726271,40.72050802],[-74.06840265,40.72111381],[-74.06850994,40.72160778],[-74.0709427,40.72289251],[-74.07280147,40.72094508],[-74.07478631,40.71891221],[-74.07541394,40.71843651],[-74.07694817,40.71747697],[-74.07903492,40.71581807],[-74.08076227,40.71405341],[-74.08341765,40.71066221],[-74.08577263,40.70773441],[-74.08771455,40.70547544],[-74.08860773,40.70478818],[-74.0900588,40.70369221],[-74.09033775,40.7035946],[-74.09019828,40.70457875],[-74.09005344,40.70479835],[-74.09289658,40.70673405],[-74.09465611,40.70521314],[-74.09509063,40.70496914],[-74.09617424,40.70625419],[-74.09643173,40.70644125],[-74.09751534,40.7071651],[-74.09784257,40.70687637],[-74.09985423,40.70784623],[-74.09959137,40.70987537],[-74.09662485,40.71475278],[-74.10171032,40.71772093],[-74.10497189,40.71829828],[-74.10175323,40.72078652],[-74.09911394,40.72760025],[-74.09830391,40.7302101],[-74.0969038,40.73318162],[-74.09504771,40.73509617]]],"type":"Polygon"},"properties":{"ward":"B","council_pe":"Joel A. Brooks"}},{"type":"Feature","geometry":{"coordinates":[[[-74.10495311021806,40.71829421077463],[-74.10170227289201,40.71771686007551],[-74.09661412239076,40.71474464449408],[-74.09958600997926,40.70988147211011],[-74.0998596,40.7078442],[-74.0978452563286,40.70688044103756],[-74.09752071,40.70716916],[-74.0961796,40.70627453],[-74.09508526,40.70498948],[-74.09462392,40.70525788],[-74.09289658,40.70673608],[-74.09005344,40.70480648],[-74.09020901,40.70459095],[-74.09035385,40.7035885],[-74.09006417,40.70370034],[-74.08784329891206,40.705383941406424],[-74.08739805221559,40.70583940137569],[-74.08180296,40.70232374],[-74.08003271,40.70407854],[-74.07721639,40.70199636],[-74.07561511,40.70378574],[-74.07482922,40.70343803],[-74.07340229,40.70609153],[-74.07184124,40.70493254],[-74.06710446,40.70828135],[-74.06561583,40.70934268],[-74.06973839,40.71020881],[-74.06647146,40.71441123],[-74.06455904,40.71306128],[-74.06339496,40.71386841],[-74.06277806,40.7134008],[-74.06028897,40.71510855],[-74.05970961,40.71461656],[-74.05845702,40.7154501],[-74.05778915,40.71492558],[-74.05657947,40.71578961],[-74.05535102,40.71232327],[-74.05144304,40.71194714],[-74.05131429,40.71223178],[-74.05109972,40.71200814],[-74.04788375,40.71161371],[-74.0448904,40.71045889],[-74.03862476,40.71075166],[-74.0258038,40.70967815],[-74.0269196,40.70424528],[-74.03363585,40.68866803],[-74.05000806,40.66206035],[-74.06599939,40.66673374],[-74.06603694,40.66688429],[-74.09834683,40.68090652],[-74.09947336,40.68462467],[-74.09979254,40.68578198],[-74.10185784,40.69013644],[-74.10191685,40.6909357],[-74.10132408,40.69160277],[-74.10106122,40.69216815],[-74.10165668,40.69327448],[-74.1027832,40.69518001],[-74.10291195,40.69546471],[-74.10356104,40.69581856],[-74.10519719,40.69666454],[-74.11656439,40.7031188],[-74.11621034,40.70655918],[-74.11881208,40.71234563],[-74.10897374,40.71647676],[-74.10495311021806,40.71829421077463]]],"type":"Polygon"},"properties":{"ward":"A","council_pe":"Denise Ridley"}},{"type":"Feature","geometry":{"coordinates":[[[-74.03873742,40.73614895],[-74.03767526,40.73571402],[-74.03589964,40.73517747],[-74.03414011,40.73464092],[-74.03240204,40.73425069],[-74.03068542,40.73386859],[-74.03012753,40.73335642],[-74.0295589,40.73285236],[-74.02749896,40.73222636],[-74.02403355,40.73116133],[-74.02268171,40.73065726],[-74.02134061,40.73016132],[-74.02150154,40.7294052],[-74.02166784,40.72865721],[-74.024055,40.72885234],[-74.02643681,40.72904747],[-74.0312165,40.72944992],[-74.03119504,40.72975887],[-74.03291166,40.73001497],[-74.03467655,40.73027514],[-74.03607666,40.73040522],[-74.03707445,40.73056783],[-74.03784156,40.73065319],[-74.03953671,40.73076702],[-74.03930926375325,40.73241416195083],[-74.0392277242063,40.73291577718962],[-74.04041648,40.73300683],[-74.04211164,40.73315317],[-74.04418766,40.73336455],[-74.04434323,40.73220197],[-74.04459,40.73049466],[-74.04605985,40.73066539],[-74.04855967,40.73089913],[-74.05047476,40.73102311],[-74.05208409,40.73116539],[-74.05170858,40.73156783],[-74.05033529,40.73256375],[-74.04975593,40.73320601],[-74.04861867,40.73452303],[-74.04993832,40.73518154],[-74.04940188,40.73602701],[-74.05109167,40.73697815],[-74.05086637,40.7376224],[-74.05066788,40.73821381],[-74.04945552,40.73956325],[-74.04854357,40.74052857],[-74.04769063,40.74182919],[-74.04847652,40.74214011],[-74.04985249,40.74269083],[-74.05123383,40.74322935],[-74.0515852,40.74278634],[-74.05274928,40.7432578],[-74.05393481,40.74375365],[-74.05451953,40.74295705],[-74.05486822,40.74329438],[-74.05611277,40.74382274],[-74.0582478,40.74472094],[-74.05875742,40.74400767],[-74.05943871,40.7430871],[-74.06054914,40.74145729],[-74.06158984,40.73991889],[-74.06261444,40.74016073],[-74.0642184,40.74052247],[-74.06807542,40.74140039],[-74.07054037,40.7419816],[-74.07238841,40.74239617],[-74.07473803,40.74270912],[-74.07736123,40.74323748],[-74.07631516,40.74392841],[-74.07539248,40.74557848],[-74.07490432,40.74754551],[-74.07594502,40.74874846],[-74.0767175,40.74956125],[-74.07761335,40.74987417],[-74.0786916,40.75015458],[-74.07853067,40.75055284],[-74.07824099,40.75121118],[-74.07768309,40.75195892],[-74.07705009,40.75225151],[-74.07591283,40.7523084],[-74.07529056,40.75264976],[-74.07523155,40.75305206],[-74.07656729,40.75456781],[-74.07625616,40.75513671],[-74.07510817,40.75535615],[-74.07481849,40.75594943],[-74.07517254,40.75698968],[-74.074561,40.75831436],[-74.07265127,40.75889948],[-74.07231867,40.75996407],[-74.07103121,40.7606467],[-74.06855285,40.7619388],[-74.06747997,40.76234512],[-74.06617105,40.76282457],[-74.0652591,40.76352342],[-74.0644598,40.76378752],[-74.06322598,40.76322681],[-74.06156301,40.76226792],[-74.06016827,40.76242232],[-74.0596962,40.76317805],[-74.05967474,40.76426289],[-74.05998588,40.76561993],[-74.05900955,40.76634313],[-74.057706,40.76770418],[-74.05682623,40.76875238],[-74.0565902,40.76838673],[-74.05552804,40.76665597],[-74.05434251,40.76473826],[-74.05380607,40.76363312],[-74.05318916,40.76189004],[-74.05199826,40.76063045],[-74.05065179,40.75991938],[-74.04966474,40.75937489],[-74.04924631,40.75859473],[-74.04849529,40.75827779],[-74.04667675,40.75765609],[-74.0452069,40.75710346],[-74.04368877,40.75659146],[-74.04337764,40.75552682],[-74.04306114,40.75429961],[-74.04253542,40.75259286],[-74.04217064,40.75223525],[-74.04047549,40.75153628],[-74.03879106,40.75099173],[-74.03826535,40.75077228],[-74.03776646,40.75050407],[-74.0378952,40.75025211],[-74.03808832,40.74988636],[-74.03850675,40.74924426],[-74.03882861,40.74848023],[-74.03926849,40.74769994],[-74.03967619,40.74701718],[-74.04014826,40.74638318],[-74.0406096,40.74585891],[-74.04096365,40.74545249],[-74.04137135,40.74496479],[-74.04169321,40.74451773],[-74.04198289,40.7441113],[-74.04222965,40.74362359],[-74.04246569,40.74305459],[-74.04247642,40.74264816],[-74.04247642,40.74220108],[-74.04244423,40.74188405],[-74.04240131,40.74151826],[-74.04242277,40.74120123],[-74.04261589,40.7409655],[-74.04280901,40.74069724],[-74.04308796,40.74042086],[-74.04338837,40.74017699],[-74.04359221,40.74005505],[-74.04371023,40.73982744],[-74.04379606,40.73960796],[-74.04389799,40.73941692],[-74.04383361,40.73915679],[-74.0437907,40.73892918],[-74.04377997,40.73870969],[-74.04384434,40.73848207],[-74.04381216,40.73824632],[-74.04377997,40.73804309],[-74.04376924,40.73779922],[-74.04366195,40.73766102],[-74.04356539,40.73749843],[-74.04352248,40.73737649],[-74.04334009,40.737157],[-74.04318988,40.73692125],[-74.04303968,40.73671801],[-74.0428412,40.73645787],[-74.04198825,40.73633186],[-74.04113531,40.73620586],[-74.04076517,40.73624244],[-74.04039502,40.73627496],[-74.04012144,40.73629528],[-74.03984785,40.73631561],[-74.03959572,40.73629528],[-74.0393436,40.73627902],[-74.03904319,40.73620992],[-74.03873742,40.73614895]]],"type":"Polygon"},"properties":{"ward":"D","council_pe":"Jake Ephros"}}]};

function isPointInRing(lng, lat, ring) {
  let inside = false;
  for (let i = 0, j = ring.length - 1; i < ring.length; j = i++) {
    const xi = ring[i][0];
    const yi = ring[i][1];
    const xj = ring[j][0];
    const yj = ring[j][1];
    const intersects = ((yi > lat) !== (yj > lat)) && (lng < ((xj - xi) * (lat - yi)) / ((yj - yi) || 1e-12) + xi);
    if (intersects) inside = !inside;
  }
  return inside;
}

function isInsideJerseyCity(lng, lat) {
  if (!Number.isFinite(lng) || !Number.isFinite(lat) || !wardsGeoJSON || !wardsGeoJSON.features) return false;

  function pointInPolygonRings(rings) {
    if (!rings || !rings.length) return false;
    if (!isPointInRing(lng, lat, rings[0])) return false;
    for (let i = 1; i < rings.length; i += 1) {
      if (isPointInRing(lng, lat, rings[i])) return false;
    }
    return true;
  }

  return wardsGeoJSON.features.some((feature) => {
    const geom = feature && feature.geometry;
    if (!geom) return false;
    if (geom.type === 'Polygon') {
      return pointInPolygonRings(geom.coordinates || []);
    }
    if (geom.type === 'MultiPolygon') {
      return (geom.coordinates || []).some((poly) => pointInPolygonRings(poly || []));
    }
    return false;
  });
}

/* ‚îÄ‚îÄ MAP INIT ‚îÄ‚îÄ */
const map = new mapboxgl.Map({
  container:'map', style:'mapbox://styles/mapbox/standard',
  center:[-74.0776,40.7282], zoom:12.2
});
map.addControl(new mapboxgl.NavigationControl(),'top-right');

const layerState = {
  wardBoundaries:false,
  crimeHeatmap:false,
  districts:true,
  precincts:true,
  schools:false,
  libraries:false,
  affordableHousing:false,
  pathStations:false,
  poiLiquor:false,
  poiParks:false
};
const allMarkers = [];

function updateCommunityLegend(){
  const legendEl = document.getElementById('communityLegend');
  const schoolsRow = document.getElementById('schoolsLegendRow');
  const librariesRow = document.getElementById('librariesLegendRow');
  if(!legendEl || !schoolsRow || !librariesRow) return;

  schoolsRow.style.display = layerState.schools ? 'flex' : 'none';
  librariesRow.style.display = layerState.libraries ? 'flex' : 'none';
  legendEl.style.display = (layerState.schools || layerState.libraries) ? 'block' : 'none';
}

function updateAffordableLegend(){
  const affordableLegend = document.getElementById('affordableLegend');
  if(!affordableLegend) return;
  affordableLegend.style.display = layerState.affordableHousing ? 'block' : 'none';
}

function updatePathLegend(){
  const pathLegend = document.getElementById('pathLegend');
  if(!pathLegend) return;
  pathLegend.style.display = layerState.pathStations ? 'block' : 'none';
}

function updatePoiLegend(){
  const poiLegend = document.getElementById('poiLegend');
  const liquorLegendRow = document.getElementById('liquorLegendRow');
  const parksLegendRow = document.getElementById('parksLegendRow');
  if(!poiLegend || !liquorLegendRow || !parksLegendRow) return;

  liquorLegendRow.style.display = layerState.poiLiquor ? 'flex' : 'none';
  parksLegendRow.style.display = layerState.poiParks ? 'flex' : 'none';
  poiLegend.style.display = (layerState.poiLiquor || layerState.poiParks) ? 'block' : 'none';
}

function updateHeatmapLegend(){
  const heatmapLegend = document.getElementById('heatmapLegend');
  if(!heatmapLegend) return;
  heatmapLegend.style.display = layerState.crimeHeatmap ? 'block' : 'none';
}

/* ‚îÄ‚îÄ SIDEBAR: WARDS ‚îÄ‚îÄ */
const wardList = document.getElementById('wardList');
[...wardsGeoJSON.features].sort((a,b)=>a.properties.ward.localeCompare(b.properties.ward)).forEach(f=>{
  const w=f.properties.ward.toUpperCase(), d=wardData[w]||{description:'',incidents:'N/A',dot:'#457b9d',safetyScore:50};
  const score = d.safetyScore || calculateSafetyScore(d);
  const tier = getSafetyTier(score);
  const el=document.createElement('div'); el.className='ward-item';
  el.innerHTML=`
    <div class="ward-dot" style="background:${d.dot}"></div>
    <div class="ward-content">
      <div class="ward-main-row">
        <div class="ward-name">Ward ${w} ‚Äî ${d.description}</div>
        <div class="ward-score-pill" style="background:${tier.color};">${score} ${tier.label.toUpperCase()}</div>
      </div>
      <div class="ward-meta">
        <div class="ward-top-crime">Top crime: ${d.topCrime}</div>
        <div class="ward-incidents">${d.incidents} incidents</div>
      </div>
    </div>`;
  el.addEventListener('click',()=>zoomToFeature(f));
  wardList.appendChild(el);
});

/* ‚îÄ‚îÄ SIDEBAR: PRECINCTS ‚îÄ‚îÄ */
const precinctList=document.getElementById('precinctList');
precincts.forEach(p=>{
  const el=document.createElement('div'); el.className='precinct-item';
  const initials=p.name.split(' ').map(w=>w[0]).join('').slice(0,2);
  const districtCenter = getDistrictCenter(p.id, p.coords);
  el.innerHTML=`
    <div class="precinct-badge" style="background:${p.color}25;border:2px solid ${p.color}">
      <span style="color:${p.color};font-size:9px;font-weight:700;font-family:monospace">${initials}</span>
    </div>
    <div class="precinct-info">
      <div class="precinct-name" style="color:${p.color}">${p.name}</div>
      <div class="precinct-addr">${p.address}</div>
      <div class="precinct-addr">${p.phone}</div>
      <div class="precinct-wards">${p.wards}</div>
    </div>`;
  el.addEventListener('click',()=>map.flyTo({center:districtCenter,zoom:13.9,duration:800}));
  precinctList.appendChild(el);
});

/* ‚îÄ‚îÄ MAP LOAD ‚îÄ‚îÄ */
map.on('load',()=>{
  map.setConfigProperty('basemap', 'lightPreset', 'night');
  map.setConfigProperty('basemap', 'showPointOfInterestLabels', false);

  // District polygons (behind wards)
  map.addSource('districts',{type:'geojson',data:'police-districts.geojson'});
  map.addLayer({id:'districts-fill',type:'fill',source:'districts',
    paint:{'fill-color':['match',['get','name'],'North','#4CC9F0','South','#F72585','East','#7B61FF','West','#FF9F1C','#ffffff'],'fill-opacity':0.25,'fill-emissive-strength':1}});
  map.addLayer({id:'districts-border',type:'line',source:'districts',
    paint:{'line-color':['match',['get','name'],'North','#4CC9F0','South','#F72585','East','#7B61FF','West','#FF9F1C','#ffffff'],'line-width':3,'line-opacity':1,'line-dasharray':[5,3],'line-emissive-strength':1}});
  map.addLayer({id:'district-labels',type:'symbol',source:'districts',
    layout:{'text-field':['get','name'],'text-font':['DIN Pro Italic','Arial Unicode MS Regular'],'text-size':11,'text-anchor':'center'},
    paint:{'text-color':['match',['get','name'],'North','#4CC9F0','South','#F72585','East','#7B61FF','West','#FF9F1C','#ffffff'],'text-halo-color':'rgba(0,0,0,0.85)','text-halo-width':1.5,'text-opacity':0.9}});

  // Ward polygons (on top)
  map.addSource('wards',{type:'geojson',data:wardsGeoJSON});
  map.addLayer({id:'wards-fill',type:'fill',source:'wards',
    paint:{'fill-color':['match',['upcase',['get','ward']],'A','#e63946','B','#c1121f','C','#e9c46a','D','#f4a261','E','#2d6a4f','F','#1a472a','#457b9d'],'fill-opacity':0.75,'fill-emissive-strength':1}});
  map.addLayer({id:'wards-border',type:'line',source:'wards',
    paint:{'line-color':'#ffffff','line-width':1.5,'line-opacity':0.9,'line-emissive-strength':1}});
  map.addLayer({id:'ward-labels',type:'symbol',source:'wards',
    layout:{'text-field':['concat','Ward ',['upcase',['get','ward']]],'text-font':['DIN Pro Bold','Arial Unicode MS Bold'],'text-size':13,'text-anchor':'center'},
    paint:{'text-color':'#ffffff','text-halo-color':'rgba(0,0,0,0.7)','text-halo-width':1.5}});
  if(!layerState.wardBoundaries){
    ['wards-fill','wards-border','ward-labels'].forEach(l=>map.setLayoutProperty(l,'visibility','none'));
  }

  map.addSource('crime-heatmap',{ type:'geojson', data:heatmapPointsData });
  map.addLayer({
    id:'crime-heatmap',
    type:'heatmap',
    source:'crime-heatmap',
    paint:{
      'heatmap-weight':['get','weight'],
      'heatmap-intensity':1.5,
      'heatmap-radius':40,
      'heatmap-opacity':0.6,
      'heatmap-color':[
        'interpolate',['linear'],['heatmap-density'],
        0,'rgba(74,222,128,0)',
        0.2,'rgba(74,222,128,0.8)',
        0.4,'rgba(250,204,21,0.8)',
        0.6,'rgba(251,146,60,0.8)',
        0.8,'rgba(239,68,68,0.8)',
        1,'rgba(185,28,28,0.9)'
      ]
    },
    layout:{ visibility:'none' }
  },'ward-labels');

  // Community layers
  map.addSource('schools',{type:'geojson',data:schoolsData});
  map.addLayer({id:'schools-points',type:'circle',source:'schools',
    paint:{'circle-color':'#4ade80','circle-radius':6,'circle-stroke-color':'#ffffff','circle-stroke-width':1.5,'circle-emissive-strength':1},
    layout:{visibility:'none'}});
  map.addSource('libraries',{type:'geojson',data:librariesData});
  map.addLayer({id:'libraries-points',type:'circle',source:'libraries',
    paint:{'circle-color':'#60a5fa','circle-radius':6,'circle-stroke-color':'#ffffff','circle-stroke-width':1.5,'circle-emissive-strength':1},
    layout:{visibility:'none'}});

  map.addSource('affordable-housing', { type:'geojson', data:affordableHousingData });
  map.addLayer({
    id:'affordable-housing-circles',
    type:'circle',
    source:'affordable-housing',
    layout:{visibility:'none'},
    paint:{
      'circle-radius':['interpolate',['linear'],['get','units'],0,6,100,10,300,16,600,22],
      'circle-color':['get','color'],
      'circle-opacity':0.85,
      'circle-stroke-width':1.5,
      'circle-stroke-color':'#0a0c10',
      'circle-emissive-strength':1
    }
  });

  map.addSource('path-stations', { type:'geojson', data:pathStationsData });
  map.addLayer({
    id:'path-stations-bg',
    type:'circle',
    source:'path-stations',
    layout:{visibility:'none'},
    paint:{
      'circle-radius':10,
      'circle-color':'#1d4ed8',
      'circle-opacity':0.9,
      'circle-stroke-width':2,
      'circle-stroke-color':'#93c5fd',
      'circle-emissive-strength':1
    }
  });
  map.addLayer({
    id:'path-stations-label',
    type:'symbol',
    source:'path-stations',
    layout:{
      visibility:'none',
      'text-field':'P',
      'text-font':['Space Mono Bold','Arial Unicode MS Bold'],
      'text-size':11,
      'text-anchor':'center'
    },
    paint:{'text-color':'#ffffff'}
  });

  updateCommunityLegend();
  updateAffordableLegend();
  updatePathLegend();
  updatePoiLegend();
  updateHeatmapLegend();

  // Precinct markers
  precincts.forEach(p=>{
    const districtCenter = getDistrictCenter(p.id, p.coords);
    const el=document.createElement('div'); el.className='precinct-marker';
    el.style.cssText=`background:${p.color}30;border-color:${p.color};`;
    el.innerHTML=`<svg width="18" height="18" viewBox="0 0 24 24">
      <path d="M12 2L3 6v6c0 5.5 3.8 10.7 9 12 5.2-1.3 9-6.5 9-12V6L12 2z" fill="${p.color}" opacity="0.9"/>
      <text x="12" y="16" text-anchor="middle" font-family="monospace" font-size="9" fill="white" font-weight="bold">${p.id[0].toUpperCase()}</text>
    </svg>`;

    const popup=new mapboxgl.Popup({offset:18,closeButton:false,closeOnClick:false}).setHTML(`
      <div class="popup-title" style="color:${p.color}">‚öë ${p.name}</div>
      <div class="popup-stat"><span>Address</span><span class="popup-stat-val">${p.address}</span></div>
      <div class="popup-stat"><span>Non-Emergency</span><span class="popup-stat-val">${p.phone}</span></div>
      <div class="popup-stat"><span>Covers</span><span class="popup-stat-val">${p.wards}</span></div>
      <div class="popup-stat"><span>Neighborhoods</span><span class="popup-stat-val" style="max-width:130px;white-space:normal;line-height:1.4">${p.neighborhoods}</span></div>
    `);

    const marker=new mapboxgl.Marker(el).setLngLat(districtCenter).addTo(map);
    el.addEventListener('mouseenter',()=>{ if(!popup.isOpen()) marker.setPopup(popup).togglePopup(); });
    el.addEventListener('mouseleave',()=>{ setTimeout(()=>{ if(popup.isOpen()) popup.remove(); },300); });
    el.addEventListener('click',()=>map.flyTo({center:districtCenter,zoom:14.2,duration:700}));
    allMarkers.push({marker, el, id:p.id});
  });

  // Ward hover popup
  const wardPopup=new mapboxgl.Popup({closeButton:false,closeOnClick:false,offset:10});
  map.on('mousemove','wards-fill',e=>{
    map.getCanvas().style.cursor='pointer';
    const props=e.features[0].properties, w=(props.ward||'').toUpperCase();
    const d=wardData[w]||{description:'',incidents:'N/A',level:'N/A',topCrime:'N/A',safetyScore:50};
    const score = d.safetyScore || calculateSafetyScore(d);
    const tier = getSafetyTier(score);
    wardPopup.setLngLat(e.lngLat).setHTML(`
      <div class="popup-title" style="color:#e63946">Ward ${w} ¬∑ ${d.description}</div>
      <div class="score-card">
        <div class="score-value" style="color:${tier.color}">${score}</div>
        <div class="score-label" style="color:${tier.color}">${tier.label}</div>
        <div class="score-caption">JC Safety Index</div>
      </div>
      <div class="popup-stat"><span>2024 Incidents</span><span class="popup-stat-val">${d.incidents}</span></div>
      <div class="popup-stat"><span>Top Crime</span><span class="popup-stat-val">${d.topCrime}</span></div>
      <div class="popup-stat"><span>Council</span><span class="popup-stat-val">${props.council_pe}</span></div>
    `).addTo(map);
  });
  map.on('mouseleave','wards-fill',()=>{ map.getCanvas().style.cursor=''; wardPopup.remove(); });

  const schoolPopup=new mapboxgl.Popup({closeButton:false,closeOnClick:false,offset:10});
  map.on('mousemove','schools-points',e=>{
    map.getCanvas().style.cursor='pointer';
    const p=e.features[0].properties;
    schoolPopup.setLngLat(e.lngLat).setHTML(`
      <div class="popup-title" style="color:#4ade80">üéì ${p.name}</div>
    `).addTo(map);
  });
  map.on('mouseleave','schools-points',()=>{ map.getCanvas().style.cursor=''; schoolPopup.remove(); });

  const libraryPopup=new mapboxgl.Popup({closeButton:false,closeOnClick:false,offset:10});
  map.on('mousemove','libraries-points',e=>{
    map.getCanvas().style.cursor='pointer';
    const p=e.features[0].properties;
    libraryPopup.setLngLat(e.lngLat).setHTML(`
      <div class="popup-title" style="color:#60a5fa">üìö ${p.name}</div>
    `).addTo(map);
  });
  map.on('mouseleave','libraries-points',()=>{ map.getCanvas().style.cursor=''; libraryPopup.remove(); });

  map.on('click','affordable-housing-circles',(e)=>{
    const props = e.features[0].properties;
    new mapboxgl.Popup({ closeButton:false, maxWidth:'260px' })
      .setLngLat(e.features[0].geometry.coordinates)
      .setHTML(`
        <div style="font-family:'DM Sans',sans-serif; padding:4px">
          <div style="font-family:'Space Mono',monospace; font-size:10px; color:#6b7280; text-transform:uppercase; letter-spacing:0.1em; margin-bottom:4px">${props.category}</div>
          <div style="font-size:14px; font-weight:600; color:#e8eaed; margin-bottom:6px">${props.name}</div>
          <div style="font-size:12px; color:#9ca3af; margin-bottom:2px">üìç ${props.address}</div>
          <div style="font-size:12px; color:#9ca3af; margin-bottom:2px">üè† ${props.units} units ¬∑ ${props.ami_level}</div>
          <div style="font-size:12px; color:#9ca3af">üó∫ Ward ${props.ward}</div>
        </div>
      `)
      .addTo(map);
  });
  map.on('mouseenter','affordable-housing-circles',()=>{ map.getCanvas().style.cursor='pointer'; });
  map.on('mouseleave','affordable-housing-circles',()=>{ map.getCanvas().style.cursor=''; });

  map.on('click','path-stations-bg',(e)=>{
    const props = e.features[0].properties;
    let lines = '';
    if(Array.isArray(props.lines)){
      lines = props.lines.join(' ¬∑ ');
    }else{
      try{
        const parsedLines = JSON.parse(props.lines);
        lines = Array.isArray(parsedLines) ? parsedLines.join(' ¬∑ ') : String(props.lines || '');
      }catch(err){
        lines = String(props.lines || '');
      }
    }
    new mapboxgl.Popup({ closeButton:false })
      .setLngLat(e.features[0].geometry.coordinates)
      .setHTML(`
        <div style="font-family:'DM Sans',sans-serif; padding:4px">
          <div style="font-family:'Space Mono',monospace; font-size:10px; color:#93c5fd; text-transform:uppercase; letter-spacing:0.1em; margin-bottom:4px">PATH Station</div>
          <div style="font-size:14px; font-weight:600; color:#e8eaed; margin-bottom:6px">${props.name}</div>
          <div style="font-size:12px; color:#9ca3af">Lines: ${lines}</div>
        </div>
      `)
      .addTo(map);
  });
  map.on('mouseenter','path-stations-bg',()=>{ map.getCanvas().style.cursor='pointer'; });
  map.on('mouseleave','path-stations-bg',()=>{ map.getCanvas().style.cursor=''; });

  const geocoder = new MapboxGeocoder({
    accessToken: mapboxgl.accessToken,
    mapboxgl: mapboxgl,
    placeholder: 'Search address or zip code...',
    bbox: [-74.1400, 40.6500, -74.0200, 40.7700],
    proximity: { longitude: -74.0776, latitude: 40.7282 },
    countries: 'us'
  });
  map.addControl(geocoder, 'top-right');
});

function zoomToFeature(f){
  const c=f.geometry.coordinates[0],lngs=c.map(x=>x[0]),lats=c.map(x=>x[1]);
  map.fitBounds([[Math.min(...lngs),Math.min(...lats)],[Math.max(...lngs),Math.max(...lats)]],{padding:60,duration:800});
}

const wardBoundaryLayers=['wards-border','ward-labels'];
const wardFillLayers=['wards-fill'];
const distLayers=['districts-fill','districts-border','district-labels'];
const schoolLayers=['schools-points'];
const libraryLayers=['libraries-points'];
const affordableHousingLayers=['affordable-housing-circles'];
const pathStationLayers=['path-stations-bg','path-stations-label'];
const heatmapLayers=['crime-heatmap'];
const poiLayerConfig = {
  poiLiquor: { source:'liquor-stores', layer:'liquor-stores-layer', loader:loadLiquorLayer },
  poiParks: { source:'parks', layer:'parks-layer', loader:loadParksLayer }
};

async function toggleLayer(group){
  layerState[group]=!layerState[group];
  const vis=layerState[group]?'visible':'none';

  if(poiLayerConfig[group]){
    const cfg = poiLayerConfig[group];
    if(layerState[group] && !map.getSource(cfg.source)){
      await cfg.loader();
    }
    if(map.getLayer(cfg.layer)){
      map.setLayoutProperty(cfg.layer,'visibility',vis);
    }
    updatePoiLegend();
    return;
  }

  if(group==='wardBoundaries'){
    wardFillLayers.forEach(l=>map.setLayoutProperty(l,'visibility',vis));
    wardBoundaryLayers.forEach(l=>map.setLayoutProperty(l,'visibility',vis));
  }
  if(group==='crimeHeatmap') heatmapLayers.forEach(l=>map.setLayoutProperty(l,'visibility',vis));
  if(group==='districts') distLayers.forEach(l=>map.setLayoutProperty(l,'visibility',vis));
  if(group==='precincts') allMarkers.forEach(m=>{ m.el.style.display=vis==='visible'?'flex':'none'; });
  if(group==='schools') schoolLayers.forEach(l=>map.setLayoutProperty(l,'visibility',vis));
  if(group==='libraries') libraryLayers.forEach(l=>map.setLayoutProperty(l,'visibility',vis));
  if(group==='affordableHousing') affordableHousingLayers.forEach(l=>map.setLayoutProperty(l,'visibility',vis));
  if(group==='pathStations') pathStationLayers.forEach(l=>map.setLayoutProperty(l,'visibility',vis));
  if(group==='schools' || group==='libraries') updateCommunityLegend();
  if(group==='affordableHousing') updateAffordableLegend();
  if(group==='pathStations') updatePathLegend();
  if(group==='crimeHeatmap') updateHeatmapLegend();
}

// TODO: Time filter ‚Äî allow filtering crime data by year (2022/2023/2024)
// TODO: Crime type filter ‚Äî toggle specific crime categories on/off
// TODO: Mobile responsive layout ‚Äî hamburger menu or bottom sheet for sidebar
// TODO: Export to PDF ‚Äî generate a one-page summary report
// TODO: Live data feed ‚Äî connect to JC Open Data Portal calls-for-service API
// TODO: Multi-city support ‚Äî allow switching between JC, Newark, Paterson
// TODO: Authentication layer ‚Äî for paid B2B version
</script>
</body>
</html>
